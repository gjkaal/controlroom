"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[56],{592:(B,h,s)=>{s.r(h),s.d(h,{SettingsPermissionsModule:()=>E});var d=s(9808),p=s(2268),Z=s(655),g=s(4987),C=s(2986),t=s(5e3),f=s(1333),A=s(7087),r=s(776);function _(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"nb-icon",6)(7,"nb-icon",7),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.AsE("",e.firstName," ",e.surname,""),t.xp6(2),t.Oqu(e.emailAddress)}}function b(n,o){if(1&n&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th",3),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"th",3),t._uU(6,"E-mail"),t.qZA(),t.TgZ(7,"th",3),t._UZ(8,"nb-icon",4),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,_,8,3,"tr",5),t.qZA()()),2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.users)}}function v(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1,"There are no users to display."),t.qZA())}let a=class{constructor(o,e,i,l){this.userApi=o,this.cdr=e,this.loaderService=i,this.toastrService=l,this.message="",this.users=[]}ngOnInit(){this.getUserList()}getUserList(){this.loaderService.open(),this.userApi.dataUserListGet().pipe((0,g.t)(this),(0,C.q)(1)).subscribe(o=>{this.users=o,this.loaderService.close(),this.cdr.markForCheck()},o=>{this.loaderService.close(),this.toastrService.danger(o),this.cdr.markForCheck()})}};a.\u0275fac=function(o){return new(o||a)(t.Y36(f.Wj),t.Y36(t.sBO),t.Y36(A.D),t.Y36(r.quB))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],decls:6,vars:2,consts:[["class","table",4,"ngIf","ngIfElse"],["noUsers",""],[1,"table"],["scope","col"],["title","Edit","icon","add_circle"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit"],["title","Delete","icon","close"]],template:function(o,e){if(1&o&&(t.TgZ(0,"h1"),t._uU(1,"Users"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,b,11,1,"table",0),t.YNc(4,v,2,0,"ng-template",null,1,t.W1O)),2&o){const i=t.MAs(5);t.xp6(3),t.Q6J("ngIf",e.users.length)("ngIfElse",i)}},directives:[d.O5,r.fMN,d.sg],styles:[""],changeDetection:0}),a=(0,Z.gn)([(0,g.c)()],a);var T=s(9004),c=s(3075),U=s(8929),x=s(7625),y=s(7253);const N=["edit_dialog"];function S(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nb-icon",6)(5,"nb-icon",7),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.displayValue)}}function R(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t._uU(5,"Role name"),t.qZA(),t.TgZ(6,"th",3)(7,"nb-icon",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().addNew()}),t.qZA()()()(),t.TgZ(8,"tbody"),t.YNc(9,S,6,1,"tr",5),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.items)}}function F(n,o){1&n&&t._uU(0,"Loading data...")}function Y(n,o){1&n&&t.YNc(0,F,1,0,"ng-template")}function I(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h1"),t._uU(3),t.qZA()(),t.TgZ(4,"nb-card-body")(5,"form",8)(6,"div",9)(7,"label",10),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"div",11),t._UZ(10,"input",12),t.qZA()(),t.TgZ(11,"div",13)(12,"label",14),t._uU(13,"Short name"),t.qZA(),t.TgZ(14,"div",15),t._UZ(15,"input",16),t.qZA()()()(),t.TgZ(16,"nb-card-footer")(17,"div",17)(18,"button",18),t.NdJ("click",function(){const m=t.CHM(e).dialogRef,u=t.oxw();return m.close(u.addNewComplete(!1))}),t._uU(19,"Cancel"),t.qZA(),t.TgZ(20,"button",19),t.NdJ("click",function(){const m=t.CHM(e).dialogRef,u=t.oxw();return m.close(u.addNewComplete(!0))}),t._uU(21,"Save changes"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.editLabel),t.xp6(2),t.Q6J("formGroup",e.addNewForm)}}let w=(()=>{class n{constructor(e,i,l,m){this.api=e,this.cdr=i,this.dialogService=l,this.toast=m,this.destroy$=new U.xQ,this.addNewForm=new c.cw({name:new c.NI,nameShort:new c.NI}),this.message="",this.items=[],this.loading=!1,this.dataAvailable=!1,this.editLabel="Edit"}loadData(){return!!(this.items&&this.items.length>0)||(this.loading=!0,this.api.dataRoleActiveSiteRolesGet().subscribe({next:e=>{e.selectItems?this.items=e.selectItems:this.message=`${e.message}`,this.loading=!1,this.dataAvailable=!0,this.cdr.markForCheck()},error:e=>{this.loading=!1,this.message=e,this.cdr.markForCheck()}}),!1)}formControls(e){return this.addNewForm.controls}addNew(){this.editLabel="Add role",this.dialogService.open(this.editItem).onClose.pipe((0,x.R)(this.destroy$)).subscribe(e=>{!e||this.toast.notifyAboutChange(e)})}addNewComplete(e){if(!e)return"Aborted";const i=this.formControls(this.addNewForm);return this.api.dataRoleCreatePost({name:i.name.value,nameShort:i.nameShort.value}).subscribe(m=>{this.toast.notifyAboutChange(`${m}`),this.items=[],this.cdr.markForCheck()}),"Creating new role."}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.Ah),t.Y36(t.sBO),t.Y36(r.Gln),t.Y36(y.ez))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(1&e&&t.Gf(N,5),2&e){let l;t.iGM(l=t.CRH())&&(i.editItem=l.first)}},decls:7,vars:2,consts:[[4,"ngIf"],["edit_dialog",""],[1,"table"],["scope","col"],["title","Add","icon","add_circle",1,"table-icon",3,"click"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit",1,"table-icon"],["title","Delete","icon","close",1,"table-icon"],[3,"formGroup"],[1,"row","mb-10"],["for","name",1,"col-sm-2"],[1,"col-sm-1"],["id","name","formControlName","name"],[1,"row","mb-3"],["for","nameShort",1,"col-sm-2"],[1,"col-sm-10"],["id","nameShort","formControlName","nameShort"],[1,"d-flex","align-items-center","justify-content-center"],["nbButton","","outline","","size","medium",1,"mr-3",3,"click"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Roles"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,R,10,1,"ng-container",0),t.YNc(4,Y,1,0,null,0),t.YNc(5,I,22,2,"ng-template",null,1,t.W1O)),2&e&&(t.xp6(3),t.Q6J("ngIf",i.dataAvailable),t.xp6(1),t.Q6J("ngIf",i.loading))},directives:[d.O5,r.fMN,d.sg,r.Asz,r.ndF,r.yKW,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,r.XWE,r.DPz],styles:[""],changeDetection:0}),n})(),M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:5,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Access"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"p"),t._uU(4,"Use this page to assign menu access rights to roles."),t.qZA())},styles:[""],changeDetection:0}),n})();var O=s(4515);const J=[{path:"user",component:a},{path:"roles",component:w},{path:"access",component:M},{path:"",pathMatch:"full",redirectTo:"user"},{path:"**",component:T.r}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.Bz.forChild(J),O.n],p.Bz]}),n})(),E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,q,c.u5,c.UX,r.T2N,r.zyh,r.KdK,r._WB,r.IIj,r.EoG]]}),n})()}}]);