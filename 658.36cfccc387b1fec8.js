"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[658],{658:(ct,L,f)=>{f.r(L),f.d(L,{SettingsOperationsModule:()=>at});var l=f(9697),u=f(9808),e=f(5e3);let z=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-logistics-overview"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"logistics-overview works!"),e.qZA())},styles:[""]}),o})();var E=f(655),O=f(567),d=f(4987),N=f(3242),p=f(3075),M=f(2125);function G(o,n){if(1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Name is required"),e.qZA()()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("hidden",!(null!=(i=t.form.get("name"))&&null!=i.errors&&i.errors.required))}}function j(o,n){if(1&o&&(e.TgZ(0,"div",16)(1,"span",17),e._uU(2,"Short name is required"),e.qZA()()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("hidden",!(null!=(i=t.form.get("nameShort"))&&null!=i.errors&&i.errors.required))}}let W=(()=>{class o{constructor(t,i,s){this.formBuilder=t,this.dialog=i,this.cdr=s,this.completed=new e.vpe,this.back=new e.vpe,this.close=new e.vpe,this.form=this.formBuilder.group({name:["",p.kI.required],nameShort:["",p.kI.required]})}ngAfterViewInit(){var t,i;!this.newStream||this.form.patchValue({name:null!==(t=this.newStream.name)&&void 0!==t?t:"",nameShort:null!==(i=this.newStream.nameShort)&&void 0!==i?i:""})}ngAfterViewChecked(){this.cdr.detectChanges()}onBack(){this.back.emit(this.form.value)}confirm(){this.completed.emit(this.form.value)}onCloseDialog(){this.form.reset(),this.close.emit(!0),this.dialog.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(l.X4l),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-stream-dialog"]],outputs:{completed:"completed",back:"back",close:"close"},decls:28,vars:4,consts:[[1,"spinner-wrapper"],[1,"delete_action"],[1,""],[1,"modal-title"],["icon","close",1,"close-dialog",3,"click"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-12","col-sm-3","d-flex","align-items-center"],["for","name",1,"mb-0"],[1,"col-12","col-sm-9"],["nbInput","","status","primary","placeholder","Enter stream name","formControlName","name"],["class","errors-wrapper",4,"ngIf"],["nbInput","","status","primary","placeholder","Enter short name","formControlName","nameShort"],[1,"modal-footer","modal-footer--centered-buttons","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"disabled","click"],[1,"errors-wrapper"],[1,"text-danger",3,"hidden"]],template:function(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"nb-card",1)(3,"nb-card-header",2)(4,"h4",3),e._uU(5,"Add Stream"),e.qZA(),e.TgZ(6,"nb-icon",4),e.NdJ("click",function(){return i.onCloseDialog()}),e.qZA()(),e.TgZ(7,"nb-card-body")(8,"form",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Stream:"),e.qZA()(),e.TgZ(13,"div",9),e._UZ(14,"input",10),e.YNc(15,G,3,1,"div",11),e.qZA()(),e.TgZ(16,"div",6)(17,"div",7)(18,"label",8),e._uU(19,"Short:"),e.qZA()(),e.TgZ(20,"div",9),e._UZ(21,"input",12),e.YNc(22,j,3,1,"div",11),e.qZA()()()(),e.TgZ(23,"div",13)(24,"button",14),e.NdJ("click",function(){return i.onBack()}),e._uU(25,"Back"),e.qZA(),e.TgZ(26,"button",15),e.NdJ("click",function(){return i.confirm()}),e._uU(27," Next "),e.qZA()()()(),e.BQk()),2&t){let s,r;e.xp6(8),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",!(null!=(s=i.form.get("name"))&&s.valid)&&((null==(s=i.form.get("name"))?null:s.dirty)||(null==(s=i.form.get("name"))?null:s.touched))),e.xp6(7),e.Q6J("ngIf",!(null!=(r=i.form.get("nameShort"))&&r.valid)&&((null==(r=i.form.get("nameShort"))?null:r.dirty)||(null==(r=i.form.get("nameShort"))?null:r.touched))),e.xp6(4),e.Q6J("disabled",i.form.invalid)}},directives:[l.Asz,l.ndF,l.fMN,l.yKW,p._Y,p.JL,p.sg,l.h8i,p.Fj,p.JJ,p.u,u.O5,l.DPz],styles:[""]}),o})();var R=f(1042),x=f(8946);function $(o,n){1&o&&(e.TgZ(0,"span",25),e._uU(1," This field is required "),e.qZA())}function V(o,n){1&o&&(e.TgZ(0,"span",25),e._uU(1," This field is required "),e.qZA())}function X(o,n){if(1&o&&e._UZ(0,"i",26),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("nbTooltip",i.getWarningInfo(t.missingLinks))}}function K(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",27),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index;return e.oxw(3).toggleEdit(s)}),e.qZA()}}const ee=function(o){return{"table-icon":!0,disabled:o}};function te(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index;return e.oxw(3).saveEdit(s)}),e.qZA()}if(2&o){const t=e.oxw().index,i=e.oxw(3);let s;e.Q6J("ngClass",e.VKq(1,ee,null==(s=i.getControl(t).get("name"))?null:s.getError("required")))}}function ne(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",29),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().index;return e.oxw(3).cancelEdit(s)}),e.qZA()}}function ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",30),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(),r=s.$implicit,a=s.index;return e.oxw(3).onDelete(r.uuid,a)}),e.qZA()}}function oe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr",14)(1,"td"),e._UZ(2,"input",15),e.YNc(3,$,2,0,"span",16),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",17),e.YNc(6,V,2,0,"span",16),e.qZA(),e.TgZ(7,"td")(8,"i",18),e.NdJ("click",function(){const s=e.CHM(t),r=s.$implicit,a=s.index;return e.oxw(3).onOpenConnectionPopup(r,a)}),e.qZA()(),e.TgZ(9,"td")(10,"div",19),e.YNc(11,X,1,1,"i",20),e.YNc(12,K,1,0,"i",21),e.YNc(13,te,1,3,"i",22),e.YNc(14,ne,1,0,"i",23),e.YNc(15,ie,1,0,"i",24),e.qZA()(),e._UZ(16,"td"),e.qZA()}if(2&o){const t=n.$implicit,i=n.index,s=e.oxw(3);let r,a;e.Q6J("formGroupName",i),e.xp6(2),e.s9C("id",t.name),e.s9C("value",t.name),e.xp6(1),e.Q6J("ngIf",(null==(r=s.getControl(i).get("name"))?null:r.touched)&&(null==(r=s.getControl(i).get("name"))?null:r.getError("required"))),e.xp6(2),e.s9C("id",t.nameShort),e.s9C("value",t.nameShort),e.xp6(1),e.Q6J("ngIf",(null==(a=s.getControl(i).get("nameShort"))?null:a.touched)&&(null==(a=s.getControl(i).get("nameShort"))?null:a.getError("required"))),e.xp6(2),e.Gre("iconEcheclon icon-",null!=t.missingLinks&&t.missingLinks.length?"broken":"","connection connection-icon ml-1 cursor-pointer"),e.xp6(3),e.Q6J("ngIf","Warning"===t.linkStatus||"Critical"===t.linkStatus),e.xp6(1),e.Q6J("ngIf",s.editedFieldIndex!==i),e.xp6(1),e.Q6J("ngIf",s.editedFieldIndex===i),e.xp6(1),e.Q6J("ngIf",s.editedFieldIndex===i),e.xp6(1),e.Q6J("ngIf",s.editedFieldIndex!==i)}}function se(o,n){if(1&o&&(e.ynx(0),e.YNc(1,oe,17,15,"tr",13),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.streamsList)}}function re(o,n){1&o&&(e.TgZ(0,"tr")(1,"td",31),e._uU(2,"There are no streams to display."),e.qZA()())}function le(o,n){if(1&o&&(e.TgZ(0,"tr",32),e._UZ(1,"td",33),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("nbSpinner",t.isLoading)}}function ae(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("scroll",function(){return e.CHM(t),e.oxw().checkIfScrolledToBottom()}),e.TgZ(1,"table",3)(2,"thead")(3,"tr")(4,"th",4),e._uU(5,"Stream"),e.qZA(),e.TgZ(6,"th",5),e._uU(7,"Short"),e.qZA(),e.TgZ(8,"th",6),e._uU(9,"Connections"),e.qZA(),e.TgZ(10,"th",7),e._uU(11,"Actions"),e.qZA(),e.TgZ(12,"th",5)(13,"nb-icon",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onOpenCreateStreamDialog()}),e.qZA()()()(),e.TgZ(14,"tbody",9),e.YNc(15,se,2,1,"ng-container",10),e.YNc(16,re,3,0,"ng-template",null,11,e.W1O),e.YNc(18,le,2,1,"tr",12),e.qZA()()()}if(2&o){const t=e.MAs(17),i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(13),e.Q6J("formArrayName","formArrayName"),e.xp6(1),e.Q6J("ngIf",i.streamsList.length)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.isLoading)}}function ce(o,n){1&o&&e._UZ(0,"div",34),2&o&&e.Q6J("nbSpinner",!0)}let b=class{constructor(n,t,i,s,r,a){this.cdr=n,this.flowsApi=t,this.streamApi=i,this.toastrService=s,this.dialog=r,this.formBuilder=a,this.streamsList=[],this.streamsSelectList=[],this.flowsSelectList=[],this.addNewFlow=!1,this.checked=!1,this.dataAvalaible=!1,this.positions=l.fe3,this.currentDataPage=1,this.editedFieldIndex=-1,this.maxPages=1,this.isLoading=!1,this.form=new p.cw({formArrayName:this.formBuilder.array([])})}ngOnInit(){this.getStreamsData(),this.getFlowsSelectList(),this.getStreamsSelectList()}toggleActivity(n){this.checked=n}getStreamsSelectList(){this.streamApi.dataOrchestrationAllStreamsGet().pipe((0,d.t)(this)).subscribe({next:n=>{this.streamsSelectList=null==n?void 0:n.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting streams list failed, please try again later.",3e3)}})}getStreamsData(){this.streamApi.dataOrchestrationListGet(void 0,void 0,this.currentDataPage.toString()).pipe((0,d.t)(this)).subscribe({next:n=>{var t;this.dataAvalaible=!0,this.isLoading=!1,this.streamsReponse=n,this.maxPages=n.totalPages,this.streamsList=[...this.streamsList,...n.items],this.streamsList=null===(t=this.streamsList)||void 0===t?void 0:t.filter((i,s,r)=>s===r.findIndex(a=>a.uuid===i.uuid)),this.cdr.markForCheck(),this.buildForm()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting flows list failed, please try again later.",3e3)}})}getFlowsSelectList(){this.flowsApi.dataFlowAllFlowsGet().pipe((0,d.t)(this)).subscribe({next:n=>{this.flowsSelectList=null==n?void 0:n.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting flows select list failed, please try again later.",3e3)}})}add(){const n=Object.assign({},this.newStream);n.uuid=(0,R.Z)(),this.streamApi.dataOrchestrationCreatePost(n).pipe((0,d.t)(this)).subscribe(t=>{var i;this.streamsList.push(n),this.showToast(this.positions.TOP_RIGHT,"success","Stream succesfully created.",3e3),this.newStream=void 0,this.cdr.markForCheck(),this.buildForm(),(null===(i=this.flowsSelectList)||void 0===i?void 0:i.length)&&this.onOpenConnectionPopup()},t=>{this.showToast(this.positions.TOP_RIGHT,"danger","Adding new stream failed, please try again later.",3e3)})}onOpenCreateStreamDialog(){const n=this.dialog.open(W);n.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{n.close(),this.newStream=void 0}),n.componentRef.instance.newStream=this.newStream,n.componentRef.instance.back.pipe((0,d.t)(this)).subscribe(t=>{if(t){const{name:i,nameShort:s}=t;this.newStream={name:i,nameShort:s}}n.close()}),n.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(t=>{if(t){const{name:i,nameShort:s}=t;this.newStream={name:i,nameShort:s},n.close(),this.add()}}),n.componentRef.instance.close.pipe((0,d.t)(this)).subscribe(()=>{this.newStream=void 0})}clearNewStream(){this.newStream=void 0,this.selectedFlows=[]}onOpenConnectionPopup(n,t){var i,s,r,a,m;const g=this.dialog.open(N.w);if(g.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{this.selectedFlows=[],g.close()}),t>=0){const c=this.streamsList[t],v=(null===(i=null==c?void 0:c.flows)||void 0===i?void 0:i.length)?null===(s=this.flowsSelectList)||void 0===s?void 0:s.filter(w=>{var _;return!(null===(_=null==c?void 0:c.flows)||void 0===_?void 0:_.find(C=>C.reference===w.reference))}):(null===(r=this.flowsSelectList)||void 0===r?void 0:r.length)?[...this.flowsSelectList]:[];g.componentRef.instance.items=v,g.componentRef.instance.selectedItems=null!==(a=null==c?void 0:c.flows)&&void 0!==a?a:[],g.componentRef.instance.rightTitle=`Stream: ${null==n?void 0:n.name}`}else g.componentRef.instance.items=this.flowsSelectList,g.componentRef.instance.selectedItems=null!==(m=this.selectedFlows)&&void 0!==m?m:[],g.componentRef.instance.rightTitle="Stream";g.componentRef.instance.leftTitle="Flows",g.componentRef.instance.title="Connect a Flow to the Stream",g.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(c=>{this.selectedFlows=c,this.addConnections(t),g.close()}),g.componentRef.instance.close.pipe((0,d.t)(this)).subscribe(()=>{this.selectedFlows=[]})}addConnections(n){var t,i;if(!(null===(t=this.flowsSelectList)||void 0===t?void 0:t.length))return;const s=null===(i=this.selectedFlows)||void 0===i?void 0:i.map(r=>{var a;const m={flow:r,orchestration:this.streamsSelectList?this.streamsSelectList[null!=n?n:(null===(a=this.streamsSelectList)||void 0===a?void 0:a.length)-1]:{},removeExistingConnection:!1};return this.streamApi.dataOrchestrationAddLinkPost(m)});(0,O.D)(s).pipe((0,d.t)(this)).subscribe(r=>{null!=this.streamsList[n]&&(this.streamsList[n].flows=this.selectedFlows),this.showToast(this.positions.TOP_RIGHT,"success","Streams connections succesfully created.",3e3),this.clearNewStream()},r=>{this.showToast(this.positions.TOP_RIGHT,"danger","Adding stream connections failed, please try again later.",3e3)})}buildForm(){this.form=this.formBuilder.group({formArrayName:this.formBuilder.array([...this.streamsList].map(n=>{var t,i,s;return this.createStreamGroup(!0,null!==(t=n.name)&&void 0!==t?t:"",null!==(i=n.nameShort)&&void 0!==i?i:"",null!==(s=n.uuid)&&void 0!==s?s:"")}))})}createStreamGroup(n=!0,t="",i="",s=""){return this.formBuilder.group({name:new p.NI({value:t,disabled:n},p.kI.required),nameShort:new p.NI({value:i,disabled:n},p.kI.required),uuid:new p.NI({value:s,disabled:n})})}onRemove(n){this.streamsList.splice(n,1),this.form.get("formArrayName").removeAt(n),this.cdr.markForCheck()}toggleEdit(n){const t=this.form.get("formArrayName");"DISABLED"===t.controls[n].status?(t.controls[n].enable(),this.editedFieldIndex=n):(t.controls[n].disable(),this.editedFieldIndex=-1),this.cdr.detectChanges()}getControl(n){return this.form.get("formArrayName").controls[n]}cancelEdit(n){this.toggleEdit(n);const t=this.form.get("formArrayName"),i=this.streamsList.find(s=>s.uuid===t.controls[n].value.uuid);t.controls[n].patchValue({name:null==i?void 0:i.name,nameShort:null==i?void 0:i.nameShort})}saveEdit(n){const i=this.form.get("formArrayName").controls[n],{name:s,nameShort:r,uuid:a}=i.value,m={name:s,nameShort:r,uuid:a};this.streamApi.dataOrchestrationUpdateUuidPut(a,m).pipe((0,d.t)(this)).subscribe(g=>{var c;let v=null===(c=this.streamsList)||void 0===c?void 0:c.findIndex(w=>w.uuid===a);this.streamsList[v].name=m.name,this.streamsList[v].nameShort=m.nameShort,this.toggleEdit(n),this.showToast(this.positions.TOP_RIGHT,"success","Stream succesfully updated.",3e3)},g=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)})}getWarningInfo(n){const t=null==n?void 0:n.map(i=>i.displayValue).join(". ");return null!=t?t:""}onDelete(n,t){const i=this.dialog.open(M.D),s=this.streamsList[t].name;i.componentRef.instance.title="Delete stream",i.componentRef.instance.text=`When you delete the Stream ${s} you will also lose the connection with the flows. Are you sure you want to delete the Stream ${s}?`,i.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{i.close()}),i.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(r=>{n?this.streamApi.dataOrchestrationDeleteUuidDelete(n).pipe((0,d.t)(this)).subscribe({next:()=>{this.onRemove(t),this.cdr.markForCheck(),i.close(),this.showToast(this.positions.TOP_RIGHT,"success","Stream succesfully removed.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):(this.onRemove(t),i.close())})}showToast(n,t,i,s=5e3,r=""){!i||this.toastrService.show(t||"Success",i,{icon:r,position:n,status:t,duration:s,destroyByClick:!0,limit:1})}checkIfScrolledToBottom(){const n=document.getElementById("logistics-streams-table-list");(null==n?void 0:n.scrollTop)-((null==n?void 0:n.scrollHeight)-(null==n?void 0:n.clientHeight))>-20&&(this.currentDataPage++,this.maxPages>=this.currentDataPage&&(this.isLoading=!0,this.getStreamsData()))}};function de(o,n){if(1&o&&(e.TgZ(0,"nb-option",14),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.displayValue," ")}}function pe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"label",10),e._uU(4,"Stream"),e.qZA()(),e.TgZ(5,"div",11)(6,"nb-select",12),e.NdJ("selectedChange",function(s){return e.CHM(t),e.oxw().onSelectStream(s)}),e.YNc(7,de,2,2,"nb-option",13),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("selected",t.selectedStream),e.xp6(1),e.Q6J("ngForOf",t.streams)}}function ge(o,n){1&o&&(e.TgZ(0,"p"),e._uU(1,"No streams have been created yet"),e.qZA())}b.\u0275fac=function(n){return new(n||b)(e.Y36(e.sBO),e.Y36(x.OF),e.Y36(x.EI),e.Y36(l.quB),e.Y36(l.Gln),e.Y36(p.qu))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-logistics-streams"]],decls:3,vars:2,consts:[["class","table-container table-fixed-header","id","logistics-streams-table-list",3,"scroll",4,"ngIf","ngIfElse"],["loading",""],["id","logistics-streams-table-list",1,"table-container","table-fixed-header",3,"scroll"],[1,"table","stream-table","overflow-auto",3,"formGroup"],["scope","col",1,"streams-col"],["scope","col"],["scope","col",1,"connections-col"],["scope","col",1,"actions-col"],["title","Edit","icon","add_circle",1,"cursor-pointer",3,"click"],[3,"formArrayName"],[4,"ngIf","ngIfElse"],["noData",""],[3,"nbSpinner",4,"ngIf"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["status","primary","nbInput","","type","text","formControlName","name",1,"editable-input",3,"id","value"],["class","text-danger",4,"ngIf"],["status","primary","nbInput","","type","text","formControlName","nameShort",1,"editable-input",3,"id","value"],[3,"click"],[1,"icons-wrapper"],["class","iconEcheclon icon-warning_red cursor-pointer mr-3",3,"nbTooltip",4,"ngIf"],["class","iconEcheclon icon-edit cursor-pointer mr-1",3,"click",4,"ngIf"],["class","iconEcheclon icon-confirm cursor-pointer mr-1",3,"ngClass","click",4,"ngIf"],["class","iconEcheclon icon-close cursor-pointer align-items-start",3,"click",4,"ngIf"],["class","iconEcheclon icon-bin cursor-pointer",3,"click",4,"ngIf"],[1,"text-danger"],[1,"iconEcheclon","icon-warning_red","cursor-pointer","mr-3",3,"nbTooltip"],[1,"iconEcheclon","icon-edit","cursor-pointer","mr-1",3,"click"],[1,"iconEcheclon","icon-confirm","cursor-pointer","mr-1",3,"ngClass","click"],[1,"iconEcheclon","icon-close","cursor-pointer","align-items-start",3,"click"],[1,"iconEcheclon","icon-bin","cursor-pointer",3,"click"],["colspan","7",1,"border-0","text-center"],[3,"nbSpinner"],["colspan","5",1,"spinner-cell"],[1,"spinner-wrapper",3,"nbSpinner"]],template:function(n,t){if(1&n&&(e.YNc(0,ae,19,5,"div",0),e.YNc(1,ce,1,1,"ng-template",null,1,e.W1O)),2&n){const i=e.MAs(2);e.Q6J("ngIf",t.dataAvalaible)("ngIfElse",i)}},directives:[u.O5,p.JL,p.sg,l.fMN,p.CE,u.sg,p.x0,l.h8i,p.Fj,p.JJ,p.u,l.jNv,u.mk,l.Q7R],styles:[".table-container[_ngcontent-%COMP%]{max-height:60vh;overflow:scroll}.stream-table[_ngcontent-%COMP%]{border:none}.stream-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;vertical-align:middle}.stream-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.stream-table[_ngcontent-%COMP%]   .streams-col[_ngcontent-%COMP%]{width:230px}.stream-table[_ngcontent-%COMP%]   .connections-col[_ngcontent-%COMP%]{width:160px}.stream-table[_ngcontent-%COMP%]   .actions-col[_ngcontent-%COMP%]{width:230px}.connection-icon[_ngcontent-%COMP%]:not(.icon-brokenconnection){font-size:13px}.drag-icon[_ngcontent-%COMP%]{font-size:30px}"],changeDetection:0}),b=(0,E.gn)([(0,d.c)()],b);let me=(()=>{class o{constructor(t){this.dialog=t,this.streams=[],this.completed=new e.vpe,this.close=new e.vpe}ngOnInit(){}cancel(){this.dialog.close(),this.close.emit(!0)}confirm(){this.completed.emit(this.selectedStream)}onSelectStream(t){this.selectedStream=t}onCloseDialog(){this.cancel()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.X4l))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-select-stream-dialog"]],outputs:{completed:"completed",close:"close"},decls:16,vars:2,consts:[[1,""],[1,"modal-title"],["icon","close",1,"close-dialog",3,"click"],[4,"ngIf","ngIfElse"],["noStreams",""],[1,"modal-footer","modal-footer--centered-buttons","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"click"],[1,"row"],[1,"col-12","col-sm-3","d-flex","align-items-center"],["for","stream",1,"mb-0"],[1,"col-12","col-sm-9"],["id","stream","status","primary","placeholder","Select stream...",1,"select",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div")(2,"nb-card",0)(3,"nb-card-header",0)(4,"h4",1),e._uU(5,"Select stream"),e.qZA(),e.TgZ(6,"nb-icon",2),e.NdJ("click",function(){return i.onCloseDialog()}),e.qZA()(),e.TgZ(7,"nb-card-body"),e.YNc(8,pe,8,2,"div",3),e.YNc(9,ge,2,0,"ng-template",null,4,e.W1O),e.qZA(),e.TgZ(11,"div",5)(12,"button",6),e.NdJ("click",function(){return i.cancel()}),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return i.confirm()}),e._uU(15,"Next"),e.qZA()()()(),e.BQk()),2&t){const s=e.MAs(10);e.xp6(8),e.Q6J("ngIf",null==i.streams?null:i.streams.length)("ngIfElse",s)}},directives:[l.Asz,l.ndF,l.fMN,l.yKW,u.O5,l.rs,u.sg,l.q51,l.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:500px}nb-card[_ngcontent-%COMP%]   nb-select[_ngcontent-%COMP%]{max-width:210px;width:210px}"]}),o})();function ue(o,n){if(1&o&&(e.TgZ(0,"div",24)(1,"span",25),e._uU(2,"Name is required"),e.qZA()()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("hidden",!(null!=(i=t.form.get("name"))&&null!=i.errors&&i.errors.required))}}function fe(o,n){if(1&o&&(e.TgZ(0,"div",24)(1,"span",25),e._uU(2,"Short name is required"),e.qZA()()),2&o){const t=e.oxw();let i;e.xp6(1),e.Q6J("hidden",!(null!=(i=t.form.get("nameShort"))&&null!=i.errors&&i.errors.required))}}function he(o,n){if(1&o&&(e.TgZ(0,"nb-option",18),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.displayValue," ")}}let _e=(()=>{class o{constructor(t,i,s){this.formBuilder=t,this.dialog=i,this.cdr=s,this.flowsSelectList=[],this.completed=new e.vpe,this.back=new e.vpe,this.close=new e.vpe,this.form=this.formBuilder.group({name:["",p.kI.required],nameShort:["",p.kI.required],isActive:[!0],nextFlow:[{}],addNext:["0"]})}ngAfterViewInit(){var t,i,s,r;!this.newFlow||this.form.patchValue({name:null!==(t=this.newFlow.name)&&void 0!==t?t:"",nameShort:null!==(i=this.newFlow.nameShort)&&void 0!==i?i:"",isActive:null!==(s=this.newFlow.isActive)&&void 0!==s?s:"1",nextFlow:null!==(r=this.newFlow.nextFlow)&&void 0!==r?r:""})}ngAfterViewChecked(){this.cdr.detectChanges()}onBack(){this.back.emit(this.form.value)}confirm(){this.completed.emit(this.form.value)}onCloseDialog(){this.form.reset(),this.close.emit(!0),this.dialog.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.qu),e.Y36(l.X4l),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-flow-dialog"]],outputs:{completed:"completed",back:"back",close:"close"},decls:50,vars:7,consts:[[1,"spinner-wrapper"],[1,"delete_action"],[1,""],[1,"modal-title"],["icon","close",1,"close-dialog",3,"click"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-12","col-sm-3","d-flex","align-items-center"],["for","name",1,"mb-0"],[1,"col-12","col-sm-9"],["nbInput","","status","primary","placeholder","Enter flow name","formControlName","name"],["class","errors-wrapper",4,"ngIf"],["nbInput","","status","primary","placeholder","Enter short name","formControlName","nameShort"],["for","nextFlow",1,"mb-0"],["id","nextFlow","status","primary","placeholder","Select flow...","formControlName","nextFlow",1,"select"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mb-2"],["status","control","formControlName","isActive","name","reactive-forms-group",1,"d-flex"],[3,"value"],[1,"row"],["status","control","formControlName","addNext",1,"activity-checkbox","ml-1"],[1,"modal-footer","modal-footer--centered-buttons","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"disabled","click"],[1,"errors-wrapper"],[1,"text-danger",3,"hidden"]],template:function(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",0)(2,"nb-card",1)(3,"nb-card-header",2)(4,"h4",3),e._uU(5,"Add flow"),e.qZA(),e.TgZ(6,"nb-icon",4),e.NdJ("click",function(){return i.onCloseDialog()}),e.qZA()(),e.TgZ(7,"nb-card-body")(8,"form",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Flow:"),e.qZA()(),e.TgZ(13,"div",9),e._UZ(14,"input",10),e.YNc(15,ue,3,1,"div",11),e.qZA()(),e.TgZ(16,"div",6)(17,"div",7)(18,"label",8),e._uU(19,"Short:"),e.qZA()(),e.TgZ(20,"div",9),e._UZ(21,"input",12),e.YNc(22,fe,3,1,"div",11),e.qZA()(),e.TgZ(23,"div",6)(24,"div",7)(25,"label",13),e._uU(26,"Next flow"),e.qZA()(),e.TgZ(27,"div",9)(28,"nb-select",14),e.YNc(29,he,2,2,"nb-option",15),e.qZA()()(),e.TgZ(30,"div",16)(31,"div",7)(32,"label",8),e._uU(33,"Active:"),e.qZA()(),e.TgZ(34,"div",9)(35,"nb-radio-group",17)(36,"nb-radio",18),e._uU(37,"Yes"),e.qZA(),e.TgZ(38,"nb-radio",18),e._uU(39,"No"),e.qZA()()()(),e.TgZ(40,"div",19),e._UZ(41,"div",7),e.TgZ(42,"div",9)(43,"nb-checkbox",20),e._uU(44,"Add new flow"),e.qZA()()()()(),e.TgZ(45,"div",21)(46,"button",22),e.NdJ("click",function(){return i.onBack()}),e._uU(47,"Back"),e.qZA(),e.TgZ(48,"button",23),e.NdJ("click",function(){return i.confirm()}),e._uU(49," Next "),e.qZA()()()(),e.BQk()),2&t){let s,r;e.xp6(8),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",!(null!=(s=i.form.get("name"))&&s.valid)&&((null==(s=i.form.get("name"))?null:s.dirty)||(null==(s=i.form.get("name"))?null:s.touched))),e.xp6(7),e.Q6J("ngIf",!(null!=(r=i.form.get("nameShort"))&&r.valid)&&((null==(r=i.form.get("nameShort"))?null:r.dirty)||(null==(r=i.form.get("nameShort"))?null:r.touched))),e.xp6(7),e.Q6J("ngForOf",i.flowsSelectList),e.xp6(7),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(10),e.Q6J("disabled",i.form.invalid)}},directives:[l.Asz,l.ndF,l.fMN,l.yKW,p._Y,p.JL,p.sg,l.h8i,p.Fj,p.JJ,p.u,u.O5,l.rs,u.sg,l.q51,l.MFI,l.r3g,l.NTf,l.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:500px}nb-card[_ngcontent-%COMP%]   nb-select[_ngcontent-%COMP%], nb-card[_ngcontent-%COMP%]   [nbInput][_ngcontent-%COMP%]{max-width:210px;width:210px}"]}),o})();const P=["move","copy","link"],T="application/x-dnd",F="application/json",S="Text";function J(o){return o.substr(0,T.length)===T}function q(o){if(o.dataTransfer){const n=o.dataTransfer.types;if(!n)return S;for(let t=0;t<n.length;t++)if(n[t]===S||n[t]===F||J(n[t]))return n[t]}return null}function I(o,n){return"all"===n||"uninitialized"===n?o:o.filter(function(t){return-1!==n.toLowerCase().indexOf(t)})}function xe(o,n){const t=window.getComputedStyle(n),i=parseFloat(t.paddingTop)||0,s=parseFloat(t.paddingLeft)||0,r=parseFloat(t.borderTopWidth)||0,a=parseFloat(t.borderLeftWidth)||0;return{x:o.offsetX+s+a,y:o.offsetY+i+r}}const h={isDragging:!1,dropEffect:"none",effectAllowed:"all",type:void 0};function H(){h.isDragging=!1,h.dropEffect=void 0,h.effectAllowed=void 0,h.type=void 0}function y(o,n){!0===h.isDragging&&(h.dropEffect=n),o.dataTransfer&&(o.dataTransfer.dropEffect=n)}function U(o,n){let i=I(P,o.dataTransfer?o.dataTransfer.effectAllowed:"uninitialized");return!0===h.isDragging&&(i=I(i,h.effectAllowed)),n&&(i=I(i,n)),0===i.length?"none":o.ctrlKey&&-1!==i.indexOf("copy")?"copy":o.altKey&&-1!==i.indexOf("link")?"link":i[0]}function A(o){if(!0===h.isDragging)return h.type;const n=q(o);return null!==n&&n!==S&&n!==F&&n.substr(T.length+1)||void 0}function k(){return!1===h.isDragging}const Y=h;let Se=(()=>{class o{constructor(t,i,s){this.elementRef=t,this.renderer=i,this.ngZone=s,this.dndEffectAllowed="copy",this.dndDraggingClass="dndDragging",this.dndDraggingSourceClass="dndDraggingSource",this.dndDraggableDisabledClass="dndDraggableDisabled",this.dndDragImageOffsetFunction=xe,this.dndStart=new e.vpe,this.dndDrag=new e.vpe,this.dndEnd=new e.vpe,this.dndMoved=new e.vpe,this.dndCopied=new e.vpe,this.dndLinked=new e.vpe,this.dndCanceled=new e.vpe,this.draggable=!0,this.isDragStarted=!1,this.dragEventHandler=r=>this.onDrag(r)}set dndDisableIf(t){this.draggable=!t,this.draggable?this.renderer.removeClass(this.elementRef.nativeElement,this.dndDraggableDisabledClass):this.renderer.addClass(this.elementRef.nativeElement,this.dndDraggableDisabledClass)}set dndDisableDragIf(t){this.dndDisableIf=t}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.elementRef.nativeElement.addEventListener("drag",this.dragEventHandler)})}ngOnDestroy(){this.elementRef.nativeElement.removeEventListener("drag",this.dragEventHandler),!0===this.isDragStarted&&H()}onDragStart(t){if(!1===this.draggable||void 0!==this.dndHandle&&void 0===t._dndUsingHandle)return!1;(function Te(o,n,t){h.isDragging=!0,h.dropEffect="none",h.effectAllowed=n,h.type=t,o.dataTransfer&&(o.dataTransfer.effectAllowed=n)})(t,this.dndEffectAllowed,this.dndType),this.isDragStarted=!0,function ve(o,n,t){var i,s,r;const a=T+(n.type?"-"+n.type:""),m=JSON.stringify(n);try{null===(i=o.dataTransfer)||void 0===i||i.setData(a,m)}catch(g){try{null===(s=o.dataTransfer)||void 0===s||s.setData(F,m)}catch(c){const v=I(P,t);o.dataTransfer&&(o.dataTransfer.effectAllowed=v[0]),null===(r=o.dataTransfer)||void 0===r||r.setData(S,m)}}}(t,{data:this.dndDraggable,type:this.dndType},Y.effectAllowed),this.dragImage=this.determineDragImage(),this.renderer.addClass(this.dragImage,this.dndDraggingClass),(void 0!==this.dndDragImageElementRef||void 0!==t._dndUsingHandle)&&function Ce(o,n,t){const i=t(o,n)||{x:0,y:0};o.dataTransfer.setDragImage(n,i.x,i.y)}(t,this.dragImage,this.dndDragImageOffsetFunction);const i=this.renderer.listen(this.elementRef.nativeElement,"drag",()=>{this.renderer.addClass(this.elementRef.nativeElement,this.dndDraggingSourceClass),i()});return this.dndStart.emit(t),t.stopPropagation(),!0}onDrag(t){this.dndDrag.emit(t)}onDragEnd(t){let s;switch(Y.dropEffect){case"copy":s=this.dndCopied;break;case"link":s=this.dndLinked;break;case"move":s=this.dndMoved;break;default:s=this.dndCanceled}s.emit(t),this.dndEnd.emit(t),H(),this.isDragStarted=!1,this.renderer.removeClass(this.dragImage,this.dndDraggingClass),window.setTimeout(()=>{this.renderer.removeClass(this.elementRef.nativeElement,this.dndDraggingSourceClass)},0),t.stopPropagation()}registerDragHandle(t){this.dndHandle=t}registerDragImage(t){this.dndDragImageElementRef=t}determineDragImage(){return void 0!==this.dndDragImageElementRef?this.dndDragImageElementRef.nativeElement:this.elementRef.nativeElement}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b))},o.\u0275dir=e.lG2({type:o,selectors:[["","dndDraggable",""]],hostVars:1,hostBindings:function(t,i){1&t&&e.NdJ("dragstart",function(r){return i.onDragStart(r)})("dragend",function(r){return i.onDragEnd(r)}),2&t&&e.uIk("draggable",i.draggable)},inputs:{dndDraggable:"dndDraggable",dndEffectAllowed:"dndEffectAllowed",dndType:"dndType",dndDraggingClass:"dndDraggingClass",dndDraggingSourceClass:"dndDraggingSourceClass",dndDraggableDisabledClass:"dndDraggableDisabledClass",dndDragImageOffsetFunction:"dndDragImageOffsetFunction",dndDisableIf:"dndDisableIf",dndDisableDragIf:"dndDisableDragIf"},outputs:{dndStart:"dndStart",dndDrag:"dndDrag",dndEnd:"dndEnd",dndMoved:"dndMoved",dndCopied:"dndCopied",dndLinked:"dndLinked",dndCanceled:"dndCanceled"}}),o})(),Q=(()=>{class o{constructor(t){this.elementRef=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","dndPlaceholderRef",""]]}),o})(),Ie=(()=>{class o{constructor(t,i,s){this.ngZone=t,this.elementRef=i,this.renderer=s,this.dndDropzone="",this.dndEffectAllowed="uninitialized",this.dndAllowExternal=!1,this.dndHorizontal=!1,this.dndDragoverClass="dndDragover",this.dndDropzoneDisabledClass="dndDropzoneDisabled",this.dndDragover=new e.vpe,this.dndDrop=new e.vpe,this.placeholder=null,this.disabled=!1,this.dragEnterEventHandler=r=>this.onDragEnter(r),this.dragOverEventHandler=r=>this.onDragOver(r),this.dragLeaveEventHandler=r=>this.onDragLeave(r)}set dndDisableIf(t){this.disabled=!!t,this.disabled?this.renderer.addClass(this.elementRef.nativeElement,this.dndDropzoneDisabledClass):this.renderer.removeClass(this.elementRef.nativeElement,this.dndDropzoneDisabledClass)}set dndDisableDropIf(t){this.dndDisableIf=t}ngAfterViewInit(){this.placeholder=this.tryGetPlaceholder(),this.removePlaceholderFromDOM(),this.ngZone.runOutsideAngular(()=>{this.elementRef.nativeElement.addEventListener("dragenter",this.dragEnterEventHandler),this.elementRef.nativeElement.addEventListener("dragover",this.dragOverEventHandler),this.elementRef.nativeElement.addEventListener("dragleave",this.dragLeaveEventHandler)})}ngOnDestroy(){this.elementRef.nativeElement.removeEventListener("dragenter",this.dragEnterEventHandler),this.elementRef.nativeElement.removeEventListener("dragover",this.dragOverEventHandler),this.elementRef.nativeElement.removeEventListener("dragleave",this.dragLeaveEventHandler)}onDragEnter(t){if(!0===t._dndDropzoneActive)return void this.cleanupDragoverState();if(void 0===t._dndDropzoneActive){const s=document.elementFromPoint(t.clientX,t.clientY);this.elementRef.nativeElement.contains(s)&&(t._dndDropzoneActive=!0)}const i=A(t);!1!==this.isDropAllowed(i)&&t.preventDefault()}onDragOver(t){if(t.defaultPrevented)return;const i=A(t);if(!1===this.isDropAllowed(i))return;this.checkAndUpdatePlaceholderPosition(t);const s=U(t,this.dndEffectAllowed);"none"!==s?(t.preventDefault(),y(t,s),this.dndDragover.emit(t),this.renderer.addClass(this.elementRef.nativeElement,this.dndDragoverClass)):this.cleanupDragoverState()}onDrop(t){try{const i=A(t);if(!1===this.isDropAllowed(i))return;const s=function we(o,n){var t,i,s,r;const a=q(o);return!0===n?null!==a&&J(a)?JSON.parse(null!==(i=null===(t=o.dataTransfer)||void 0===t?void 0:t.getData(a))&&void 0!==i?i:"{}"):{}:null!==a?JSON.parse(null!==(r=null===(s=o.dataTransfer)||void 0===s?void 0:s.getData(a))&&void 0!==r?r:"{}"):{}}(t,k());if(!1===this.isDropAllowed(s.type))return;t.preventDefault();const r=U(t);if(y(t,r),"none"===r)return;const a=this.getPlaceholderIndex();if(-1===a)return;this.dndDrop.emit({event:t,dropEffect:r,isExternal:k(),data:s.data,index:a,type:i}),t.stopPropagation()}finally{this.cleanupDragoverState()}}onDragLeave(t){if(void 0===t._dndDropzoneActive){const i=document.elementFromPoint(t.clientX,t.clientY);if(this.elementRef.nativeElement.contains(i))return void(t._dndDropzoneActive=!0)}this.cleanupDragoverState(),y(t,"none")}isDropAllowed(t){if(!0===this.disabled||!0===k()&&!1===this.dndAllowExternal)return!1;if(!this.dndDropzone||!t)return!0;if(!1===Array.isArray(this.dndDropzone))throw new Error("dndDropzone: bound value to [dndDropzone] must be an array!");return-1!==this.dndDropzone.indexOf(t)}tryGetPlaceholder(){return void 0!==this.dndPlaceholderRef?this.dndPlaceholderRef.elementRef.nativeElement:this.elementRef.nativeElement.querySelector("[dndPlaceholderRef]")}removePlaceholderFromDOM(){null!==this.placeholder&&null!==this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder)}checkAndUpdatePlaceholderPosition(t){if(null===this.placeholder)return;this.placeholder.parentNode!==this.elementRef.nativeElement&&this.renderer.appendChild(this.elementRef.nativeElement,this.placeholder);const i=function be(o,n){let t=n;for(;t.parentNode!==o;){if(!t.parentNode)return null;t=t.parentNode}return t}(this.elementRef.nativeElement,t.target);null!==i&&i!==this.placeholder&&(function De(o,n,t){const i=n.getBoundingClientRect();return t?o.clientX<i.left+i.width/2:o.clientY<i.top+i.height/2}(t,i,this.dndHorizontal)?i.previousSibling!==this.placeholder&&this.renderer.insertBefore(this.elementRef.nativeElement,this.placeholder,i):i.nextSibling!==this.placeholder&&this.renderer.insertBefore(this.elementRef.nativeElement,this.placeholder,i.nextSibling))}getPlaceholderIndex(){if(null!==this.placeholder)return Array.prototype.indexOf.call(this.elementRef.nativeElement.children,this.placeholder)}cleanupDragoverState(){this.renderer.removeClass(this.elementRef.nativeElement,this.dndDragoverClass),this.removePlaceholderFromDOM()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.Qsj))},o.\u0275dir=e.lG2({type:o,selectors:[["","dndDropzone",""]],contentQueries:function(t,i,s){if(1&t&&e.Suo(s,Q,5),2&t){let r;e.iGM(r=e.CRH())&&(i.dndPlaceholderRef=r.first)}},hostBindings:function(t,i){1&t&&e.NdJ("drop",function(r){return i.onDrop(r)})},inputs:{dndDropzone:"dndDropzone",dndEffectAllowed:"dndEffectAllowed",dndAllowExternal:"dndAllowExternal",dndHorizontal:"dndHorizontal",dndDragoverClass:"dndDragoverClass",dndDropzoneDisabledClass:"dndDropzoneDisabledClass",dndDisableIf:"dndDisableIf",dndDisableDropIf:"dndDisableDropIf"},outputs:{dndDragover:"dndDragover",dndDrop:"dndDrop"}}),o})(),Fe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez]]}),o})();function ye(o,n){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function Ae(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",29),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(4).editedItem.name=s}),e.qZA()}if(2&o){const t=e.oxw(4);e.s9C("id",t.editedItem.name),e.s9C("value",t.editedItem.name),e.Q6J("ngModel",t.editedItem.name)}}function ke(o,n){1&o&&(e.TgZ(0,"span",30),e._uU(1," Name is required. "),e.qZA())}function Ze(o,n){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.nameShort)}}function Le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"input",31),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(4).editedItem.nameShort=s}),e.qZA()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.s9C("id",t.nameShort),e.s9C("value",t.nameShort),e.Q6J("ngModel",i.editedItem.nameShort)}}function Ee(o,n){1&o&&(e.TgZ(0,"span",30),e._uU(1," Short name is required. "),e.qZA())}function Oe(o,n){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t.nextFlow?null:t.nextFlow.displayValue)}}function Ne(o,n){if(1&o&&(e.TgZ(0,"nb-option",34),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.code," ")}}function Me(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"nb-select",32),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(4).editedItem.nextFlow=s}),e.YNc(1,Ne,2,2,"nb-option",33),e.qZA()}if(2&o){const t=e.oxw(4);e.Q6J("ngModel",t.editedItem.nextFlow),e.xp6(1),e.Q6J("ngForOf",t.flowsSelectList)}}function Re(o,n){if(1&o&&(e.TgZ(0,"nb-checkbox",35),e._uU(1,"Active"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Q6J("checked",t.isActive)}}function Pe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"nb-checkbox",36),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw(4).editedItem.isActive=s}),e._uU(1,"Active"),e.qZA()}if(2&o){const t=e.oxw(4);e.Q6J("ngModel",t.editedItem.isActive)}}function Je(o,n){if(1&o&&e._UZ(0,"i",37),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("nbTooltip",i.getWarningInfo(t.missingLinks))}}function qe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",38),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).openEdit(s)}),e.qZA()}}function He(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",39),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).saveEdit(s)}),e.qZA()}}function Ue(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).cancelEdit(s)}),e.qZA()}}function Ye(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",41),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).onDelete(s.uuid)}),e.qZA()}}function Qe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr",12),e.NdJ("dndMoved",function(){const r=e.CHM(t).$implicit,a=e.oxw(3);return a.onDragged(r,a.flowsData)}),e.TgZ(1,"td"),e.YNc(2,ye,2,1,"p",13),e.YNc(3,Ae,1,3,"input",14),e.YNc(4,ke,2,0,"span",15),e.qZA(),e.TgZ(5,"td"),e.YNc(6,Ze,2,1,"p",13),e.YNc(7,Le,1,3,"input",16),e.YNc(8,Ee,2,0,"span",15),e.qZA(),e.TgZ(9,"td"),e.YNc(10,Oe,2,1,"p",13),e.YNc(11,Me,2,2,"nb-select",17),e.qZA(),e.TgZ(12,"td")(13,"div",18),e.YNc(14,Re,2,1,"nb-checkbox",19),e.YNc(15,Pe,2,1,"nb-checkbox",20),e.qZA()(),e.TgZ(16,"td")(17,"i",21),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(3).onOpenConnectionPopup(r)}),e.qZA()(),e.TgZ(18,"td")(19,"div",22),e.YNc(20,Je,1,1,"i",23),e.YNc(21,qe,1,0,"i",24),e.YNc(22,He,1,0,"i",25),e.YNc(23,Ue,1,0,"i",26),e.YNc(24,Ye,1,0,"i",27),e.qZA()(),e.TgZ(25,"td"),e._UZ(26,"i",28),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw(3);e.Q6J("dndDraggable",t),e.xp6(2),e.Q6J("ngIf",t.disabled),e.xp6(1),e.Q6J("ngIf",!t.disabled),e.xp6(1),e.Q6J("ngIf",!t.disabled&&0===i.editedItem.name.length),e.xp6(2),e.Q6J("ngIf",t.disabled),e.xp6(1),e.Q6J("ngIf",!t.disabled),e.xp6(1),e.Q6J("ngIf",!t.disabled&&0===i.editedItem.nameShort.length),e.xp6(2),e.Q6J("ngIf",t.disabled),e.xp6(1),e.Q6J("ngIf",!t.disabled),e.xp6(3),e.Q6J("ngIf",t.disabled),e.xp6(1),e.Q6J("ngIf",!t.disabled),e.xp6(2),e.Gre("iconEcheclon icon-",null!=t.workstations&&t.workstations.length?"":"broken","connection connection-icon ml-1 cursor-pointer"),e.xp6(3),e.Q6J("ngIf","Warning"===t.linkStatus||"Critical"===t.linkStatus),e.xp6(1),e.Q6J("ngIf",i.editedItem.uuid!==t.uuid),e.xp6(1),e.Q6J("ngIf",i.editedItem.uuid===t.uuid),e.xp6(1),e.Q6J("ngIf",i.editedItem.uuid===t.uuid),e.xp6(1),e.Q6J("ngIf",i.editedItem.uuid!==t.uuid)}}function Be(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"tr",10),e.YNc(2,Qe,27,19,"tr",11),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.flowsData)}}function ze(o,n){1&o&&(e.TgZ(0,"tr")(1,"td",42),e._uU(2,"There are no flows to display."),e.qZA()())}function Ge(o,n){if(1&o&&(e.TgZ(0,"tr",43),e._UZ(1,"td",44),e.qZA()),2&o){const t=e.oxw(2);e.Q6J("nbSpinner",t.isLoading)}}function je(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("scroll",function(){return e.CHM(t),e.oxw().checkIfScrolledToBottom()}),e.TgZ(1,"table",3)(2,"thead")(3,"tr")(4,"th",4),e._uU(5,"Flows"),e.qZA(),e.TgZ(6,"th",4),e._uU(7,"Short"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"Next Flow"),e.qZA(),e.TgZ(10,"th",4),e._uU(11,"Active"),e.qZA(),e.TgZ(12,"th",4),e._uU(13,"Connections"),e.qZA(),e.TgZ(14,"th",4),e._uU(15,"Actions"),e.qZA(),e.TgZ(16,"th",4)(17,"nb-icon",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().onOpenSelectStreamDialog()}),e.qZA()()()(),e.TgZ(18,"tbody",6),e.NdJ("dndDrop",function(s){e.CHM(t);const r=e.oxw();return r.onDrop(s,r.flowsData)}),e.YNc(19,Be,3,1,"ng-container",7),e.YNc(20,ze,3,0,"ng-template",null,8,e.W1O),e.YNc(22,Ge,2,1,"tr",9),e.qZA()()()}if(2&o){const t=e.MAs(21),i=e.oxw();e.xp6(19),e.Q6J("ngIf",i.flowsData.length)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.isLoading)}}function We(o,n){1&o&&e._UZ(0,"div",45),2&o&&e.Q6J("nbSpinner",!0)}let D=class{constructor(n,t,i,s,r,a){this.cdr=n,this.flowsApi=t,this.streamApi=i,this.toastrService=s,this.dialog=r,this.workstationApi=a,this.flowsList=[],this.streamsSelectList=[],this.flowsSelectList=[],this.addNewFlow=!1,this.checked=!1,this.dataAvalaible=!1,this.positions=l.fe3,this.flowsData=[],this.editedName="",this.editedItem={},this.currentDataPage=1,this.editedFieldIndex=-1,this.maxPages=1,this.isLoading=!1}ngOnInit(){this.getFlowsData(),this.getFlowsSelectList(),this.getStreamsSelectList(),this.getWorkstationsSelectList()}toggleActivity(n){this.checked=n}getWorkstationsSelectList(){this.workstationApi.dataWorkstationAllWorkstationsGet().pipe((0,d.t)(this)).subscribe({next:n=>{this.workstationsSelectList=n.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}})}buildFlowsList(){this.flowsData=this.flowsList.map(n=>Object.assign(Object.assign({},n),{disabled:!0}))}getFlowsData(){this.flowsApi.dataFlowListGet(void 0,void 0,this.currentDataPage.toString()).pipe((0,d.t)(this)).subscribe({next:n=>{var t;this.dataAvalaible=!0,this.isLoading=!1,this.maxPages=n.totalPages,this.flowsList=[...this.flowsList,...n.items],this.flowsList=null===(t=this.flowsList)||void 0===t?void 0:t.filter((i,s,r)=>s===r.findIndex(a=>a.uuid===i.uuid)),this.flowsResponse=n,this.buildFlowsList(),this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting flows list failed, please try again later.",3e3)}})}getStreamsSelectList(){this.streamApi.dataOrchestrationAllStreamsGet().pipe((0,d.t)(this)).subscribe({next:n=>{this.streamsSelectList=null==n?void 0:n.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting streams list failed, please try again later.",3e3)}})}getFlowsSelectList(){this.flowsApi.dataFlowAllFlowsGet().pipe((0,d.t)(this)).subscribe({next:n=>{this.flowsSelectList=null==n?void 0:n.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting flows select list failed, please try again later.",3e3)}})}add(){var n;const t=Object.assign({},this.newFlow);this.newFlowStream&&(t.flowOrchestration=this.newFlowStream),t.uuid=(0,R.Z)(),(null===(n=t.nextFlow)||void 0===n?void 0:n.reference)||(t.nextFlow=void 0),this.flowsApi.dataFlowCreatePost(t).pipe((0,d.t)(this)).subscribe(i=>{var s;this.flowsList.push(t),null===(s=this.flowsSelectList)||void 0===s||s.push({reference:t.uuid,displayValue:t.name,code:t.nameShort}),this.showToast(this.positions.TOP_RIGHT,"success","Flow succesfully created.",3e3),this.newFlow=void 0,this.newFlowStream=void 0,this.buildFlowsList(),this.cdr.markForCheck(),this.onOpenConnectionPopup()},i=>{this.showToast(this.positions.TOP_RIGHT,"danger","Adding mew flow failed, please try again later.",3e3)})}onOpenSelectStreamDialog(){const n=this.dialog.open(me);n.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{n.close(),this.newFlow=void 0}),n.componentRef.instance.selectedStream=this.newFlowStream,n.componentRef.instance.streams=this.streamsSelectList,n.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(t=>{t&&(this.newFlowStream=t),n.close(),this.onOpenCreateFlowDialog()}),n.componentRef.instance.close.pipe((0,d.t)(this)).subscribe(()=>{this.clearNewFlow()})}onOpenCreateFlowDialog(){const n=this.dialog.open(_e);n.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{n.close(),this.newFlow=void 0,this.newFlowStream=void 0,this.addNewFlow=!1}),n.componentRef.instance.newFlow=this.newFlow,n.componentRef.instance.flowsSelectList=this.flowsSelectList,n.componentRef.instance.back.pipe((0,d.t)(this)).subscribe(t=>{if(t){const{name:i,nameShort:s,isActive:r,nextFlow:a,addNext:m}=t;this.newFlow={name:i,nameShort:s,isActive:r,nextFlow:a},this.addNewFlow=m}n.close(),this.onOpenSelectStreamDialog()}),n.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(t=>{if(t){const{name:i,nameShort:s,isActive:r,nextFlow:a,addNext:m}=t;this.newFlow={name:i,nameShort:s,isActive:r,nextFlow:a},this.addNewFlow=m,n.close(),this.add()}}),n.componentRef.instance.close.pipe((0,d.t)(this)).subscribe(()=>{this.newFlow=void 0,this.newFlowStream=void 0})}onDrop(n,t){let i=n.index;void 0===i&&(i=t.length),t.splice(i,0,n.data),this.saveOrder(n.data,i)}onDragged(n,t){const i=t.indexOf(n);t.splice(i,1)}saveOrder(n,t){const{name:i,nameShort:s,isActive:r,nextFlow:a,uuid:m,flowOrchestration:g,workstations:c}=n;this.flowsApi.dataFlowUpdateUuidPut(m,{name:i,nameShort:s,isActive:r,nextFlow:a,uuid:m,flowOrchestration:g,workstations:c,sortOrder:t}).pipe((0,d.t)(this)).subscribe({next:w=>{},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}})}clearNewFlow(){this.newFlow=void 0,this.newFlowStream=void 0,this.selectedWorkstations=[]}onOpenConnectionPopup(n,t){var i,s,r,a,m;const g=this.dialog.open(N.w);if(g.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{this.selectedWorkstations=[],g.close()}),n){const c=this.flowsData.find(w=>w.uuid===n.uuid),v=(null===(i=null==c?void 0:c.workstations)||void 0===i?void 0:i.length)?null===(s=this.workstationsSelectList)||void 0===s?void 0:s.filter(w=>{var _;return!(null===(_=null==c?void 0:c.workstations)||void 0===_?void 0:_.find(C=>C.reference===w.reference))}):(null===(r=this.workstationsSelectList)||void 0===r?void 0:r.length)?[...this.workstationsSelectList]:[];g.componentRef.instance.items=v,g.componentRef.instance.selectedItems=null!==(a=null==c?void 0:c.workstations)&&void 0!==a?a:[],g.componentRef.instance.rightTitle=`Flow: ${null==n?void 0:n.name}`}else g.componentRef.instance.items=this.workstationsSelectList,g.componentRef.instance.selectedItems=null!==(m=this.selectedWorkstations)&&void 0!==m?m:[],g.componentRef.instance.rightTitle="Flow";g.componentRef.instance.leftTitle="Workstations",g.componentRef.instance.title="Connect a Workstation to the flow",g.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(c=>{this.selectedWorkstations=c,this.addConnections(null!=n?n:this.flowsData[this.flowsData.length-1]),g.close()}),g.componentRef.instance.close.pipe((0,d.t)(this)).subscribe(()=>{this.selectedWorkstations=[]})}addConnections(n){var t,i,s;if(!(null===(t=this.flowsSelectList)||void 0===t?void 0:t.length)||!(null===(i=this.workstationsSelectList)||void 0===i?void 0:i.length))return;const r={reference:n.uuid,displayValue:n.name,code:n.nameShort},a=null===(s=this.selectedWorkstations)||void 0===s?void 0:s.map(m=>this.flowsApi.dataFlowAddLinkPost({workstation:m,flow:r,removeExistingConnection:!1}));(0,O.D)(a).pipe((0,d.t)(this)).subscribe(m=>{this.showToast(this.positions.TOP_RIGHT,"success","Flows connections succesfully created.",3e3),this.flowsList.find(g=>g.uuid===n.uuid).workstations=this.selectedWorkstations,this.clearNewFlow(),this.cdr.detectChanges(),n||(this.onOpenCreateFlowDialog(),this.addNewFlow=!1)},m=>{this.showToast(this.positions.TOP_RIGHT,"danger","Adding flow connections, please try again later.",3e3)})}onRemove(n){const t=this.flowsData.findIndex(i=>i.uuid===n);this.flowsData.splice(t,1),this.flowsList.splice(t,1),this.cdr.markForCheck()}openEdit(n){if(this.editedItem.uuid)return;const t=this.flowsData.find(r=>r.uuid===n.uuid),i=this.flowsData.findIndex(r=>r.uuid===n.uuid);t.disabled=!1;const s=[...this.flowsData];s[i]=t,this.flowsData=s,this.editedItem=Object.assign({},t),this.cdr.markForCheck()}cancelEdit(n){const t=this.flowsData.find(r=>r.uuid===n.uuid);t.disabled=!0;const i=this.flowsData.findIndex(r=>r.uuid===n.uuid),s=[...this.flowsData];s[i]=t,this.flowsData=s,this.editedItem={},this.cdr.markForCheck()}saveEdit(n){const{name:t,nameShort:i,isActive:s,nextFlow:r,uuid:a,flowOrchestration:m,workstations:g}=this.editedItem,c={name:t,nameShort:i,isActive:s,nextFlow:r,uuid:a,flowOrchestration:m,workstations:g};this.flowsApi.dataFlowUpdateUuidPut(a,c).pipe((0,d.t)(this)).subscribe(v=>{var w;let _=null===(w=this.flowsList)||void 0===w?void 0:w.findIndex(Z=>Z.uuid===a);this.flowsList[_].name=c.name,this.flowsList[_].nameShort=c.nameShort,this.flowsList[_].isActive=c.isActive,this.flowsList[_].nextFlow=c.nextFlow,this.flowsList[_].flowOrchestration=c.flowOrchestration,this.flowsList[_].workstations=c.workstations,this.flowsData.find(Z=>Z.uuid===n.uuid).disabled=!0,this.editedItem={},this.cdr.detectChanges(),this.showToast(this.positions.TOP_RIGHT,"success","Flow succesfully updated.",3e3)},v=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)})}getWarningInfo(n){const t=null==n?void 0:n.map(i=>i.displayValue).join(". ");return null!=t?t:""}onDelete(n){const t=this.dialog.open(M.D);t.componentRef.instance.title="Remove flow",t.componentRef.instance.text="Are you sure you want to remove this flow?",t.onBackdropClick.pipe((0,d.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,d.t)(this)).subscribe(i=>{this.flowsApi.dataFlowDeleteUuidDelete(n).pipe((0,d.t)(this)).subscribe({next:()=>{this.onRemove(n),this.cdr.markForCheck(),t.close(),this.showToast(this.positions.TOP_RIGHT,"success","Flow succesfully removed.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}})})}showToast(n,t,i,s=5e3,r=""){!i||this.toastrService.show(t||"Success",i,{icon:r,position:n,status:t,duration:s,destroyByClick:!0,limit:1})}checkIfScrolledToBottom(){const n=document.getElementById("logistics-flows-table-list");(null==n?void 0:n.scrollTop)-((null==n?void 0:n.scrollHeight)-(null==n?void 0:n.clientHeight))>-20&&(this.currentDataPage++,this.maxPages>=this.currentDataPage&&(this.isLoading=!0,this.getFlowsData()))}};D.\u0275fac=function(n){return new(n||D)(e.Y36(e.sBO),e.Y36(x.OF),e.Y36(x.EI),e.Y36(l.quB),e.Y36(l.Gln),e.Y36(x.F))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-logistics-flows"]],decls:3,vars:2,consts:[["class","table-container table-fixed-header","id","logistics-flows-table-list",3,"scroll",4,"ngIf","ngIfElse"],["loading",""],["id","logistics-flows-table-list",1,"table-container","table-fixed-header",3,"scroll"],[1,"table","flows-table","overflow-auto"],["scope","col"],["title","Edit","icon","add_circle",1,"cursor-pointer",3,"click"],["dndDropzone","","dndEffectAllowed","move",3,"dndDrop"],[4,"ngIf","ngIfElse"],["noData",""],[3,"nbSpinner",4,"ngIf"],["dndPlaceholderRef","",1,"dndPlaceholder"],["dndEffectAllowed","move",3,"dndDraggable","dndMoved",4,"ngFor","ngForOf"],["dndEffectAllowed","move",3,"dndDraggable","dndMoved"],[4,"ngIf"],["status","primary","nbInput","","type","text","class","editable-input","name","editedName",3,"id","value","ngModel","ngModelChange",4,"ngIf"],["class","text-danger",4,"ngIf"],["status","primary","nbInput","","type","text","class","editable-input",3,"id","value","ngModel","ngModelChange",4,"ngIf"],["id","nextFlow","status","control","placeholder","Select flow...","class","select","class","editable-input",3,"ngModel","ngModelChange",4,"ngIf"],[1,"checkbox-container","d-flex","align-items-center"],["disabled","","class","activity-checkbox ml-1 editable-input","status","control",3,"checked",4,"ngIf"],["class","activity-checkbox ml-1 editable-input","status","control",3,"ngModel","ngModelChange",4,"ngIf"],[3,"click"],[1,"float-right","icons-wrapper"],["class","iconEcheclon icon-warning_red cursor-pointer mr-3",3,"nbTooltip",4,"ngIf"],["class","iconEcheclon icon-edit cursor-pointer mr-1",3,"click",4,"ngIf"],["class","iconEcheclon icon-confirm cursor-pointer mr-1",3,"click",4,"ngIf"],["class","iconEcheclon icon-close cursor-pointer",3,"click",4,"ngIf"],["class","iconEcheclon icon-bin cursor-pointer",3,"click",4,"ngIf"],[1,"iconEcheclon","icon-drag","drag-icon","cursor-pointer"],["status","primary","nbInput","","type","text","name","editedName",1,"editable-input",3,"id","value","ngModel","ngModelChange"],[1,"text-danger"],["status","primary","nbInput","","type","text",1,"editable-input",3,"id","value","ngModel","ngModelChange"],["id","nextFlow","status","control","placeholder","Select flow...",1,"editable-input",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["disabled","","status","control",1,"activity-checkbox","ml-1","editable-input",3,"checked"],["status","control",1,"activity-checkbox","ml-1","editable-input",3,"ngModel","ngModelChange"],[1,"iconEcheclon","icon-warning_red","cursor-pointer","mr-3",3,"nbTooltip"],[1,"iconEcheclon","icon-edit","cursor-pointer","mr-1",3,"click"],[1,"iconEcheclon","icon-confirm","cursor-pointer","mr-1",3,"click"],[1,"iconEcheclon","icon-close","cursor-pointer",3,"click"],[1,"iconEcheclon","icon-bin","cursor-pointer",3,"click"],["colspan","7",1,"border-0","text-center"],[3,"nbSpinner"],["colspan","5",1,"spinner-cell"],[1,"spinner-wrapper",3,"nbSpinner"]],template:function(n,t){if(1&n&&(e.YNc(0,je,23,3,"div",0),e.YNc(1,We,1,1,"ng-template",null,1,e.W1O)),2&n){const i=e.MAs(2);e.Q6J("ngIf",t.dataAvalaible)("ngIfElse",i)}},directives:[u.O5,l.fMN,Ie,Q,u.sg,Se,l.h8i,p.Fj,p.JJ,p.On,l.rs,l.q51,l.NTf,l.jNv,l.Q7R],styles:[".table-container[_ngcontent-%COMP%]{max-height:60vh;overflow:scroll}.flows-table[_ngcontent-%COMP%]{border:none}.flows-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;vertical-align:middle}.flows-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.connection-icon[_ngcontent-%COMP%]:not(.icon-brokenconnection){font-size:13px}.drag-icon[_ngcontent-%COMP%]{font-size:30px}"],changeDetection:0}),D=(0,E.gn)([(0,d.c)()],D);const $e=function(o){return{"single-tab--active":o}};function Ve(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"h3",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().activeSection=r}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,$e,i.activeSection===t)),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function Xe(o,n){1&o&&e._UZ(0,"app-logistics-overview")}function Ke(o,n){1&o&&e._UZ(0,"app-logistics-streams")}function et(o,n){1&o&&e._UZ(0,"app-logistics-flows")}let tt=(()=>{class o{constructor(){this.tabs=["overview","streams","flows"],this.activeSection=this.tabs[0]}ngOnInit(){}search(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-logistics"]],decls:14,vars:4,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"page-title","mt-2","mb-0"],[1,"search-input"],["type","text","nbInput","","placeholder","Search by: Stream, Flow, Workstation"],["nbSuffix","","nbButton","","ghost","",1,"btn","d-flex","align-items-center","justify-content-center",3,"click"],["title","Search","icon","search"],[1,"d-flex","w-100","flex-column","tabs-navigation","mb-4"],[1,"d-flex","pl-3","tabs-container"],[4,"ngFor","ngForOf"],[1,"underline","w-100"],[4,"ngIf"],[1,"single-tab","d-flex","justify-content-center","mb-0",3,"ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Logistics"),e.qZA(),e.TgZ(3,"nb-form-field",2),e._UZ(4,"input",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.search()}),e._UZ(6,"nb-icon",5),e.qZA()()(),e.TgZ(7,"div",6)(8,"div",7),e.YNc(9,Ve,4,6,"div",8),e.qZA(),e._UZ(10,"div",9),e.qZA(),e.YNc(11,Xe,1,0,"app-logistics-overview",10),e.YNc(12,Ke,1,0,"app-logistics-streams",10),e.YNc(13,et,1,0,"app-logistics-flows",10)),2&t&&(e.xp6(9),e.Q6J("ngForOf",i.tabs),e.xp6(2),e.Q6J("ngIf","overview"===i.activeSection),e.xp6(1),e.Q6J("ngIf","streams"===i.activeSection),e.xp6(1),e.Q6J("ngIf","flows"===i.activeSection))},directives:[l.jBG,l.h8i,l.DPz,l.yyc,l.fMN,u.sg,u.mk,u.O5,z,b,D],pipes:[u.rS],styles:[".tabs-navigation[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{margin-bottom:-2px;z-index:1}.tabs-navigation[_ngcontent-%COMP%]   .single-tab[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-right:45px;cursor:pointer;-webkit-user-select:none;user-select:none}.tabs-navigation[_ngcontent-%COMP%]   .single-tab--active[_ngcontent-%COMP%]{border-bottom:2px solid white}.underline[_ngcontent-%COMP%]{height:2px;background:#3D536F}.page-title[_ngcontent-%COMP%]{font-size:40px}.search-input[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),o})();var B=f(6798);let nt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Schedule"),e.qZA())},styles:[""],changeDetection:0}),o})();var it=f(9004),ot=f(4515);const st=[{path:"schedule",component:nt},{path:"logistics",component:tt},{path:"",pathMatch:"full",redirectTo:"schedule"},{path:"**",component:it.r}];let rt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[B.Bz.forChild(st),ot.n],B.Bz]}),o})(),lt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,l.KdK,l.MfT,l.nKr,l.V7y,l.uuI,l.T2N,l.zyh,p.UX,l.rgH,l.x4g,l.YNG,l.IIj,Fe,p.u5]]}),o})(),at=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,rt,lt,l.zyh,l.KdK,l.T2N,l.IIj,l.nKr,l.YNG,l.MfT,p.UX]]}),o})()}}]);