"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[756],{6756:(oe,w,m)=>{m.r(w),m.d(w,{SiteModule:()=>ie});var p=m(9808),l=m(3075),r=m(6781),e=m(5e3);let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,r.KdK,l.u5,l.UX,r.IIj,r.nKr,r.zyh,r.T2N,r.uuI]]}),o})();var h=m(655),c=m(4987),u=m(8471);function x(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",4)(7,"nb-icon",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).edit(a.uuid)}),e.qZA(),e.TgZ(8,"nb-icon",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).delete(a.uuid)}),e.qZA()()()()}if(2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.nameShort)}}function D(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th",3),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"Name Short"),e.qZA(),e.TgZ(7,"th",3)(8,"div",4)(9,"nb-icon",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e.qZA()()()()(),e.TgZ(10,"tbody"),e.YNc(11,x,9,2,"tr",6),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.data)}}let b=class{constructor(i,t){this.api=i,this.cdr=t,this.dataAvailable=!1,this.data=[],this.reloadData="",this.editItem=new e.vpe,this.removeItem=new e.vpe,this.addNewItem=new e.vpe}ngOnInit(){this.findData()}findData(){this.api.dataWorkCenterListGet().pipe((0,c.t)(this)).subscribe(i=>{this.data=i,this.dataAvailable=!0,this.cdr.markForCheck()})}ngOnChanges(i){for(const t in i)"reloadData"===t&&this.findData()}add(){this.addNewItem.emit("")}edit(i){i&&this.editItem.emit(i)}delete(i){i&&this.removeItem.emit(i)}};b.\u0275fac=function(i){return new(i||b)(e.Y36(u.Uv),e.Y36(e.sBO))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-workcenter-table"]],inputs:{reloadData:"reloadData"},outputs:{editItem:"editItem",removeItem:"removeItem",addNewItem:"addNewItem"},features:[e.TTD],decls:3,vars:2,consts:[[1,"spinner-wrapper",3,"nbSpinner"],["class","table",4,"ngIf"],[1,"table"],["scope","col"],[1,"float-right"],["title","Create","icon","add_circle",1,"table-icon",3,"click"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Delete","icon","close",1,"table-icon",3,"click"]],template:function(i,t){1&i&&(e.ynx(0),e.TgZ(1,"div",0),e.YNc(2,D,12,1,"table",1),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("nbSpinner",!t.dataAvailable),e.xp6(1),e.Q6J("ngIf",t.dataAvailable))},directives:[r.Q7R,p.O5,r.fMN,p.sg],styles:[""],changeDetection:0}),b=(0,h.gn)([(0,c.c)()],b);var Z=m(6199);function q(o,i){if(1&o&&(e.TgZ(0,"nb-option",20),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.s9C("value",t.reference),e.xp6(1),e.Oqu(t.displayValue)}}function N(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"label",17),e._uU(2,"Workstations"),e.qZA(),e.TgZ(3,"div",12)(4,"nb-select",18),e.NdJ("selectedChange",function(s){return e.CHM(t),e.oxw(2).selectedWorkstationRef=s}),e.YNc(5,q,2,2,"nb-option",19),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("selected",t.selectedWorkstationRef),e.xp6(1),e.Q6J("ngForOf",t.workstationsList)}}function R(o,i){if(1&o&&(e.TgZ(0,"form",9)(1,"div",10)(2,"label",11),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"div",12),e._UZ(5,"input",13),e.qZA()(),e.TgZ(6,"div",10)(7,"label",14),e._uU(8,"Name Short"),e.qZA(),e.TgZ(9,"div",12),e._UZ(10,"input",15),e.qZA()(),e.YNc(11,N,6,2,"div",16),e.qZA()),2&o){const t=e.oxw();e.Q6J("formGroup",t.addForm),e.xp6(11),e.Q6J("ngIf",t.workstationsList)}}function U(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Are you sure you want to remove this item?"),e.qZA())}let f=class{constructor(i,t,n,s){this.messageService=i,this.api=t,this.formBuilder=n,this.cdr=s,this.isSubmitted=!1,this.isCompleted=!1,this.dataAvailable=!1,this.label="",this.action="",this.commit="apply changes",this.completed=new e.vpe}ngOnInit(){this.initForm()}ngOnChanges(i){for(const t in i)"uuid"===t&&this.initForm()}getSelectedWorkcentersObjectsArray(){var i;return(null===(i=this.workstationsList)||void 0===i?void 0:i.filter(n=>this.selectedWorkstationRef.includes(n.reference)))||[]}getWorskstationsRefs(i){return i.map(t=>t.reference)}initForm(){this.addForm=this.formBuilder.group({name:["",l.kI.required],nameShort:["",l.kI.required]}),this.uuid&&""!==this.uuid?this.api.dataWorkCenterGetUuidGet(this.uuid).pipe((0,c.t)(this)).subscribe({next:i=>{var t,n;if(this.uuid=i.uuid,null===(t=this.addForm.get("name"))||void 0===t||t.setValue(i.name),null===(n=this.addForm.get("nameShort"))||void 0===n||n.setValue(i.nameShort),i.workstations){const s=this.getWorskstationsRefs(i.workstations);this.selectedWorkstationRef=s,this.selectedWorkstations=i.workstations}this.dataAvailable=!0,this.cdr.markForCheck()},error:()=>{this.messageService.notifyAboutChange(`Could not load: ${this.uuid}`),this.completed.emit(!1)}}):(this.dataAvailable=!0,this.uuid=void 0)}cancel(){this.messageService.notifyAboutChange("Operation cancelled."),this.completed.emit(!0)}submit(i){this.messageService.notifyAboutChange("Saving changes."),this.addOrUpdateRecord(i),this.completed.emit(!0)}addOrUpdateRecord(i){var t,n;const s={name:null===(t=this.addForm.get("name"))||void 0===t?void 0:t.value,nameShort:null===(n=this.addForm.get("nameShort"))||void 0===n?void 0:n.value,workstations:this.getSelectedWorkcentersObjectsArray()};console.log(`Action: ${i}`),this.isSubmitted=!0,"add"===i?this.api.dataWorkCenterCreatePost(s).pipe((0,c.t)(this)).subscribe({next:a=>{console.log(`result: ${a}`),a===u.Mx.Created?(this.messageService.notifyAboutChange(`Added: ${s.name}`),this.completed.emit(!0)):(this.messageService.notifyAboutChange(`Failed to add: ${s.name}, ${a}`),this.completed.emit(!1)),this.isCompleted=!0},error:()=>{console.log("Add failed"),this.messageService.notifyAboutChange(`Failed to add: ${s.name}`),this.isCompleted=!1,this.completed.emit(!1)}}):"update"===i?this.uuid?this.api.dataWorkCenterUpdateUuidPut(this.uuid,s).pipe((0,c.t)(this)).subscribe({next:()=>{this.messageService.notifyAboutChange(`Modified: ${s.name}`),this.isCompleted=!0},error:()=>{this.messageService.notifyAboutChange(`Falsed to modify: ${s.name}`),this.isCompleted=!1,this.completed.emit(!1)}}):(this.messageService.notifyAboutChange(`Failed to add: ${s.name}, invalid key`),this.isCompleted=!0,this.completed.emit(!1)):"delete"===i&&(this.uuid?this.api.dataWorkCenterDeleteUuidDelete(this.uuid).pipe((0,c.t)(this)).subscribe({next:()=>{this.messageService.notifyAboutChange(`Removed: ${s.name}`),this.isCompleted=!0,this.completed.emit(!0)},error:()=>{this.messageService.notifyAboutChange(`Failed to remove: ${s.name}`),this.isCompleted=!1,this.completed.emit(!1)}}):(this.messageService.notifyAboutChange(`Failed to remove: ${s.name}, invalid key`),this.isCompleted=!0,this.completed.emit(!1)))}onCloseDialog(){this.cancel()}};function O(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",4)(9,"nb-icon",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).edit(a.uuid)}),e.qZA(),e.TgZ(10,"nb-icon",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).delete(a.uuid)}),e.qZA()()()()}if(2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.nameShort),e.xp6(2),e.Oqu(t.amountOfWorkstations)}}function J(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th",3),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",3),e._uU(6,"Name Short"),e.qZA(),e.TgZ(7,"th",3),e._uU(8,"Amount of workstations"),e.qZA(),e.TgZ(9,"th",3)(10,"div",4)(11,"nb-icon",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e.qZA()()()()(),e.TgZ(12,"tbody"),e.YNc(13,O,11,3,"tr",6),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.data)}}f.\u0275fac=function(i){return new(i||f)(e.Y36(Z.e),e.Y36(u.Uv),e.Y36(l.qu),e.Y36(e.sBO))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-workcenter-detail"]],inputs:{workstationsList:"workstationsList",uuid:"uuid"},outputs:{completed:"completed"},features:[e.TTD],decls:16,vars:7,consts:[[1,"spinner-wrapper",3,"nbSpinner"],[1,""],[1,"modal-title","text-center"],["icon","close",1,"close-dialog",3,"click"],[3,"formGroup",4,"ngIf","ngIfElse"],["deleteWarning",""],[1,"modal-footer","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"click"],[3,"formGroup"],[1,"row","mb-3"],["for","name",1,"col-sm-2"],[1,"col-sm-10"],["nbInput","","status","control","fullWidth","","id","name","formControlName","name"],["for","nameShort",1,"col-sm-2"],["nbInput","","status","control","fullWidth","","id","nameShort","formControlName","nameShort"],["class","row mb-3",4,"ngIf"],["for","workstations",1,"col-sm-2"],["multiple","","fullWidth","","status","control","placeholder","Workstations",1,"select",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,t){if(1&i&&(e.ynx(0),e.TgZ(1,"div",0)(2,"nb-card")(3,"nb-card-header",1)(4,"h4",2),e._uU(5),e.qZA(),e.TgZ(6,"nb-icon",3),e.NdJ("click",function(){return t.onCloseDialog()}),e.qZA()(),e.TgZ(7,"nb-card-body"),e.YNc(8,R,12,2,"form",4),e.YNc(9,U,2,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return t.cancel()}),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){return t.submit(t.action)}),e._uU(15),e.qZA()()()(),e.BQk()),2&i){const n=e.MAs(10);e.xp6(1),e.Q6J("nbSpinner",!t.dataAvailable&&"delete"!==t.action),e.xp6(1),e.ekj("delete_action","delete"===t.action),e.xp6(3),e.Oqu(t.label),e.xp6(3),e.Q6J("ngIf","delete"!==t.action)("ngIfElse",n),e.xp6(7),e.hij(" ",t.commit," ")}},directives:[r.Q7R,r.Asz,r.ndF,r.fMN,r.yKW,p.O5,l._Y,l.JL,l.sg,r.h8i,l.Fj,l.JJ,l.u,r.rs,p.sg,r.q51,r.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:650px}"],changeDetection:0}),f=(0,h.gn)([(0,c.c)()],f);let g=class{constructor(i,t){this.api=i,this.cdr=t,this.dataAvailable=!1,this.data=[],this.reloadData="",this.editItem=new e.vpe,this.removeItem=new e.vpe,this.addNewItem=new e.vpe}ngOnInit(){this.findData()}findData(){this.api.dataWorkstationListGet().pipe((0,c.t)(this)).subscribe(i=>{this.data=i,this.dataAvailable=!0,this.cdr.markForCheck()})}ngOnChanges(i){for(const t in i)"reloadData"===t&&this.findData()}add(){this.addNewItem.emit("")}edit(i){i&&this.editItem.emit(i)}delete(i){i&&this.removeItem.emit(i)}};function $(o,i){if(1&o&&(e.TgZ(0,"nb-option",21),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.s9C("value",t.reference),e.xp6(1),e.Oqu(t.displayValue)}}function Y(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"label",18),e._uU(2,"Activity"),e.qZA(),e.TgZ(3,"div",12)(4,"nb-select",19),e.NdJ("selectedChange",function(s){return e.CHM(t),e.oxw(2).selectedActivityRef=s}),e.YNc(5,$,2,2,"nb-option",20),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("selected",t.selectedActivityRef),e.xp6(1),e.Q6J("ngForOf",t.activitiesList)}}function B(o,i){if(1&o&&(e.TgZ(0,"nb-option",21),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.s9C("value",t.reference),e.xp6(1),e.Oqu(t.displayValue)}}function L(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"label",22),e._uU(2,"Workcenter"),e.qZA(),e.TgZ(3,"div",12)(4,"nb-select",23),e.NdJ("selectedChange",function(s){return e.CHM(t),e.oxw(2).selectedWorkcenterRef=s}),e.YNc(5,B,2,2,"nb-option",20),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("selected",t.selectedWorkcenterRef),e.xp6(1),e.Q6J("ngForOf",t.workcentersList)}}function Q(o,i){if(1&o&&(e.TgZ(0,"form",9)(1,"div",10)(2,"label",11),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"div",12),e._UZ(5,"input",13),e.qZA()(),e.TgZ(6,"div",10)(7,"label",14),e._uU(8,"Name Short"),e.qZA(),e.TgZ(9,"div",12),e._UZ(10,"input",15),e.qZA()(),e.TgZ(11,"div",10)(12,"label",14),e._uU(13,"Amount"),e.qZA(),e.TgZ(14,"div",12),e._UZ(15,"input",16),e.qZA()(),e.YNc(16,Y,6,2,"div",17),e.YNc(17,L,6,2,"div",17),e.qZA()),2&o){const t=e.oxw();e.Q6J("formGroup",t.addForm),e.xp6(16),e.Q6J("ngIf",t.activitiesList),e.xp6(1),e.Q6J("ngIf",t.workcentersList)}}function M(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Are you sure you want to remove this item?"),e.qZA())}g.\u0275fac=function(i){return new(i||g)(e.Y36(u.F),e.Y36(e.sBO))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-workstation-table"]],inputs:{reloadData:"reloadData"},outputs:{editItem:"editItem",removeItem:"removeItem",addNewItem:"addNewItem"},features:[e.TTD],decls:3,vars:2,consts:[[1,"spinner-wrapper",3,"nbSpinner"],["class","table",4,"ngIf"],[1,"table"],["scope","col"],[1,"float-right"],["title","Create","icon","add_circle",1,"table-icon",3,"click"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Delete","icon","close",1,"table-icon",3,"click"]],template:function(i,t){1&i&&(e.ynx(0),e.TgZ(1,"div",0),e.YNc(2,J,14,1,"table",1),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("nbSpinner",!t.dataAvailable),e.xp6(1),e.Q6J("ngIf",t.dataAvailable))},directives:[r.Q7R,p.O5,r.fMN,p.sg],styles:[""],changeDetection:0}),g=(0,h.gn)([(0,c.c)()],g);let _=class{constructor(i,t,n,s){this.messageService=i,this.api=t,this.formBuilder=n,this.cdr=s,this.isSubmitted=!1,this.isCompleted=!1,this.dataAvailable=!1,this.label="",this.action="",this.commit="apply changes",this.completed=new e.vpe}ngOnInit(){this.initForm()}ngOnChanges(i){for(const t in i)"uuid"===t&&this.initForm()}initForm(){this.addForm=this.formBuilder.group({name:["",l.kI.required],nameShort:["",l.kI.required],amount:[0]}),this.uuid&&""!==this.uuid?this.api.dataWorkstationGetUuidGet(this.uuid).pipe((0,c.t)(this)).subscribe({next:i=>{var t,n,s,a,d;this.uuid=i.uuid,null===(t=this.addForm.get("name"))||void 0===t||t.setValue(i.name),null===(n=this.addForm.get("nameShort"))||void 0===n||n.setValue(i.nameShort),null===(s=this.addForm.get("amount"))||void 0===s||s.setValue(i.amountOfWorkstations),this.dataAvailable=!0;const F=null===(a=i.activity)||void 0===a?void 0:a.reference;F&&(this.selectedActivityRef=F,this.selectedActivity=this.getSelectedActivityObject());const S=null===(d=i.workCenter)||void 0===d?void 0:d.reference;S&&(this.selectedWorkcenterRef=S,this.selectedWorkcenter=this.getSelectedWorkcenterObject()),this.cdr.markForCheck()},error:()=>{this.messageService.notifyAboutChange(`Could not load: ${this.uuid}`),this.completed.emit(!1)}}):(this.dataAvailable=!0,this.uuid=void 0)}cancel(){this.messageService.notifyAboutChange("Operation cancelled."),this.completed.emit(!0)}submit(i){console.log(`Submit: ${i}`),this.messageService.notifyAboutChange("Saving changes."),this.addOrUpdateRecord(i),this.completed.emit(!0)}getSelectedActivityObject(){var i;return(null===(i=this.activitiesList)||void 0===i?void 0:i.filter(n=>n.reference===this.selectedActivityRef)[0])||{}}getSelectedWorkcenterObject(){var i;return(null===(i=this.workcentersList)||void 0===i?void 0:i.filter(n=>n.reference===this.selectedWorkcenterRef)[0])||{}}addOrUpdateRecord(i){var t,n,s;const a={name:null===(t=this.addForm.get("name"))||void 0===t?void 0:t.value,nameShort:null===(n=this.addForm.get("nameShort"))||void 0===n?void 0:n.value,amountOfWorkstations:null===(s=this.addForm.get("amount"))||void 0===s?void 0:s.value,workStationBuffers:[],activity:this.getSelectedActivityObject(),workCenter:this.getSelectedWorkcenterObject()};console.log(`Action: ${i}`),this.isSubmitted=!0,"add"===i?(console.log(`Post: ${JSON.stringify(a)}`),this.api.dataWorkstationCreatePost(a).pipe((0,c.t)(this)).subscribe({next:d=>{console.log(`Response: ${d}`),d===u.Mx.Created?(this.messageService.notifyAboutChange(`Added: ${a.name}`),this.completed.emit(!0)):(this.messageService.notifyAboutChange(`Failed to add: ${a.name}, ${d}`),this.completed.emit(!1)),this.isCompleted=!0},error:()=>{console.log("Error"),this.messageService.notifyAboutChange(`Failed to add: ${a.name}`),this.isCompleted=!1}})):"update"===i?this.uuid?this.api.dataWorkstationUpdateUuidPut(this.uuid,a).pipe((0,c.t)(this)).subscribe({next:()=>{this.messageService.notifyAboutChange(`Modified: ${a.name}`),this.isCompleted=!0},error:()=>{this.messageService.notifyAboutChange(`Falsed to modify: ${a.name}`),this.isCompleted=!1}}):(this.messageService.notifyAboutChange(`Failed to add: ${a.name}, invalid key`),this.completed.emit(!1)):"delete"===i&&(this.uuid?this.api.dataWorkstationDeleteUuidDelete(this.uuid).pipe((0,c.t)(this)).subscribe({next:()=>{this.messageService.notifyAboutChange(`Removed: ${a.name}`),this.isCompleted=!0},error:()=>{this.messageService.notifyAboutChange(`Falsed to remove: ${a.name}`),this.isCompleted=!1}}):(this.messageService.notifyAboutChange(`Failed to remove: ${a.name}, invalid key`),this.completed.emit(!1)))}onCloseDialog(){this.cancel()}};function G(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",5)(9,"nb-icon",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).edit(a.uuid)}),e.qZA(),e.TgZ(10,"nb-icon",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).delete(a.uuid)}),e.qZA()()()()}if(2&o){const t=i.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.nameShort),e.xp6(2),e.Oqu(t.description)}}function E(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",4),e._uU(6,"Name Short"),e.qZA(),e.TgZ(7,"th",4),e._uU(8,"Description"),e.qZA(),e.TgZ(9,"th",4)(10,"div",5)(11,"nb-icon",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().add()}),e.qZA()()()()(),e.TgZ(12,"tbody"),e.YNc(13,G,11,3,"tr",7),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.data)}}function j(o,i){1&o&&e._uU(0,"loading data")}_.\u0275fac=function(i){return new(i||_)(e.Y36(Z.e),e.Y36(u.F),e.Y36(l.qu),e.Y36(e.sBO))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-workstation-detail"]],inputs:{workcentersList:"workcentersList",activitiesList:"activitiesList",uuid:"uuid"},outputs:{completed:"completed"},features:[e.TTD],decls:16,vars:7,consts:[[1,"spinner-wrapper",3,"nbSpinner"],[1,""],[1,"modal-title","text-center"],["icon","close",1,"close-dialog",3,"click"],[3,"formGroup",4,"ngIf","ngIfElse"],["deleteWarning",""],[1,"modal-footer","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"click"],[3,"formGroup"],[1,"row","mb-3"],["for","name",1,"col-sm-2"],[1,"col-sm-10"],["nbInput","","status","control","fullWidth","","id","name","formControlName","name"],["for","nameShort",1,"col-sm-2"],["nbInput","","status","control","fullWidth","","id","nameShort","formControlName","nameShort"],["nbInput","","status","control","fullWidth","","id","amount","formControlName","amount"],["class","row mb-3",4,"ngIf"],["for","activity",1,"col-sm-2"],["fullWidth","","status","control","placeholder","Activity",1,"select",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","workcenter",1,"col-sm-2"],["fullWidth","","status","control","placeholder","Workcenter",1,"select",3,"selected","selectedChange"]],template:function(i,t){if(1&i&&(e.ynx(0),e.TgZ(1,"div",0)(2,"nb-card")(3,"nb-card-header",1)(4,"h4",2),e._uU(5),e.qZA(),e.TgZ(6,"nb-icon",3),e.NdJ("click",function(){return t.onCloseDialog()}),e.qZA()(),e.TgZ(7,"nb-card-body"),e.YNc(8,Q,18,3,"form",4),e.YNc(9,M,2,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return t.cancel()}),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){return t.submit(t.action)}),e._uU(15),e.qZA()()()(),e.BQk()),2&i){const n=e.MAs(10);e.xp6(1),e.Q6J("nbSpinner",!t.dataAvailable&&"delete"!==t.action),e.xp6(1),e.ekj("delete_action","delete"===t.action),e.xp6(3),e.Oqu(t.label),e.xp6(3),e.Q6J("ngIf","delete"!==t.action)("ngIfElse",n),e.xp6(7),e.hij(" ",t.commit," ")}},directives:[r.Q7R,r.Asz,r.ndF,r.fMN,r.yKW,p.O5,l._Y,l.JL,l.sg,r.h8i,l.Fj,l.JJ,l.u,r.rs,p.sg,r.q51,r.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:650px}"],changeDetection:0}),_=(0,h.gn)([(0,c.c)()],_);let k=class{constructor(i,t){this.api=i,this.cdr=t,this.dataAvailable=!1,this.data=[],this.reloadData="",this.editItem=new e.vpe,this.removeItem=new e.vpe,this.addNewItem=new e.vpe}ngOnInit(){this.findData()}findData(){this.api.dataActivityListGet().pipe((0,c.t)(this)).subscribe(i=>{this.data=i,this.dataAvailable=!0,this.cdr.markForCheck()})}ngOnChanges(i){for(const t in i)"reloadData"===t&&this.findData()}add(){this.addNewItem.emit("")}edit(i){i&&this.editItem.emit(i)}delete(i){i&&this.removeItem.emit(i)}};function z(o,i){if(1&o&&(e.TgZ(0,"form",9)(1,"div",10)(2,"label",11),e._uU(3,"Name"),e.qZA(),e.TgZ(4,"div",12),e._UZ(5,"input",13),e.qZA()(),e.TgZ(6,"div",10)(7,"label",14),e._uU(8,"Name Short"),e.qZA(),e.TgZ(9,"div",12),e._UZ(10,"input",15),e.qZA()(),e.TgZ(11,"div",10)(12,"label",16),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"div",12),e._UZ(15,"textarea",17),e.qZA()()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.addForm)}}function X(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"Are you sure you want to remove this item?"),e.qZA())}k.\u0275fac=function(i){return new(i||k)(e.Y36(u.B0),e.Y36(e.sBO))},k.\u0275cmp=e.Xpm({type:k,selectors:[["app-activity-table"]],inputs:{reloadData:"reloadData"},outputs:{editItem:"editItem",removeItem:"removeItem",addNewItem:"addNewItem"},features:[e.TTD],decls:5,vars:2,consts:[[1,"spinner-wrapper",3,"nbSpinner"],["class","table",4,"ngIf"],["loading",""],[1,"table"],["scope","col"],[1,"float-right"],["title","Create","icon","add_circle",1,"table-icon",3,"click"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Delete","icon","close",1,"table-icon",3,"click"]],template:function(i,t){1&i&&(e.ynx(0),e.TgZ(1,"div",0),e.YNc(2,E,14,1,"table",1),e.qZA(),e.BQk(),e.YNc(3,j,1,0,"ng-template",null,2,e.W1O)),2&i&&(e.xp6(1),e.Q6J("nbSpinner",!t.dataAvailable),e.xp6(1),e.Q6J("ngIf",t.dataAvailable))},directives:[r.Q7R,p.O5,r.fMN,p.sg],styles:[""],changeDetection:0}),k=(0,h.gn)([(0,c.c)()],k);let v=class{constructor(i,t,n,s){this.messageService=i,this.api=t,this.formBuilder=n,this.cdr=s,this.isSubmitted=!1,this.isCompleted=!1,this.dataAvailable=!1,this.label="",this.action="",this.commit="apply changes",this.completed=new e.vpe}ngOnInit(){this.initForm()}ngOnChanges(i){for(const t in i)"uuid"===t&&this.initForm()}initForm(){this.addForm=this.formBuilder.group({name:["",l.kI.required],nameShort:["",l.kI.required],description:[""]}),this.uuid&&""!==this.uuid?this.api.dataActivityGetUuidGet(this.uuid).pipe((0,c.t)(this)).subscribe({next:i=>{var t,n,s;this.uuid=i.uuid,null===(t=this.addForm.get("name"))||void 0===t||t.setValue(i.name),null===(n=this.addForm.get("nameShort"))||void 0===n||n.setValue(i.nameShort),null===(s=this.addForm.get("description"))||void 0===s||s.setValue(i.description),this.dataAvailable=!0,this.cdr.markForCheck()},error:()=>{this.messageService.notifyAboutChange(`Could not load: ${this.uuid}`),this.completed.emit(!1)}}):(this.dataAvailable=!0,this.uuid=void 0)}cancel(){this.messageService.notifyAboutChange("Operation cancelled."),this.completed.emit(!0)}submit(i){this.messageService.notifyAboutChange("Saving changes."),this.addOrUpdateRecord(i),this.completed.emit(!0)}addOrUpdateRecord(i){var t,n,s;const a={name:null===(t=this.addForm.get("name"))||void 0===t?void 0:t.value,nameShort:null===(n=this.addForm.get("nameShort"))||void 0===n?void 0:n.value,description:null===(s=this.addForm.get("description"))||void 0===s?void 0:s.value};this.isSubmitted=!0,"add"===i?this.api.dataActivityCreatePost(a).pipe((0,c.t)(this)).subscribe({next:d=>{d===u.Mx.Created?(this.messageService.notifyAboutChange(`Added: ${a.name}`),this.completed.emit(!0)):(this.messageService.notifyAboutChange(`Failed to add: ${a.name}, ${d}`),this.completed.emit(!1)),this.isCompleted=!0},error:()=>{this.messageService.notifyAboutChange(`Failed to add: ${a.name}`),this.isCompleted=!1,this.completed.emit(!1)}}):"update"===i?this.uuid?this.api.dataActivityUpdateUuidPut(this.uuid,a).pipe((0,c.t)(this)).subscribe({next:()=>{this.messageService.notifyAboutChange(`Modified: ${a.name}`),this.isCompleted=!0,this.completed.emit(!0)},error:()=>{this.messageService.notifyAboutChange(`Falsed to modify: ${a.name}`),this.isCompleted=!1,this.completed.emit(!1)}}):(this.messageService.notifyAboutChange(`Failed to add: ${a.name}, invalid key`),this.isCompleted=!1,this.completed.emit(!1)):"delete"===i&&(this.uuid?this.api.dataActivityDeleteUuidDelete(this.uuid).pipe((0,c.t)(this)).subscribe({next:()=>{this.messageService.notifyAboutChange(`Removed: ${a.name}`),this.isCompleted=!0,this.completed.emit(!0)},error:()=>{this.messageService.notifyAboutChange(`Falsed to remove: ${a.name}`),this.isCompleted=!1,this.completed.emit(!1)}}):(this.messageService.notifyAboutChange(`Failed to remove: ${a.name}, invalid key`),this.isCompleted=!1,this.completed.emit(!1)))}onCloseDialog(){this.cancel()}};v.\u0275fac=function(i){return new(i||v)(e.Y36(Z.e),e.Y36(u.B0),e.Y36(l.qu),e.Y36(e.sBO))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-activity-detail"]],inputs:{uuid:"uuid"},outputs:{completed:"completed"},features:[e.TTD],decls:16,vars:7,consts:[[1,"spinner-wrapper",3,"nbSpinner"],[1,""],[1,"modal-title","text-center"],["icon","close",1,"close-dialog",3,"click"],[3,"formGroup",4,"ngIf","ngIfElse"],["deleteWarning",""],[1,"modal-footer","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"click"],[3,"formGroup"],[1,"row","mb-3"],["for","name",1,"col-sm-2"],[1,"col-sm-10"],["nbInput","","status","control","fullWidth","","id","name","formControlName","name"],["for","nameShort",1,"col-sm-2"],["nbInput","","status","control","fullWidth","","id","nameShort","formControlName","nameShort"],["for","description",1,"col-sm-2"],["nbInput","","status","control","fullWidth","","id","description","formControlName","description"]],template:function(i,t){if(1&i&&(e.ynx(0),e.TgZ(1,"div",0)(2,"nb-card")(3,"nb-card-header",1)(4,"h4",2),e._uU(5),e.qZA(),e.TgZ(6,"nb-icon",3),e.NdJ("click",function(){return t.onCloseDialog()}),e.qZA()(),e.TgZ(7,"nb-card-body"),e.YNc(8,z,16,1,"form",4),e.YNc(9,X,2,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return t.cancel()}),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){return t.submit(t.action)}),e._uU(15),e.qZA()()()(),e.BQk()),2&i){const n=e.MAs(10);e.xp6(1),e.Q6J("nbSpinner",!t.dataAvailable&&"delete"!==t.action),e.xp6(1),e.ekj("delete_action","delete"===t.action),e.xp6(3),e.Oqu(t.label),e.xp6(3),e.Q6J("ngIf","delete"!==t.action)("ngIfElse",n),e.xp6(7),e.hij(" ",t.commit," ")}},directives:[r.Q7R,r.Asz,r.ndF,r.fMN,r.yKW,p.O5,l._Y,l.JL,l.sg,r.h8i,l.Fj,l.JJ,l.u,r.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:650px}"],changeDetection:0}),v=(0,h.gn)([(0,c.c)()],v);let C=class{};C.\u0275fac=function(i){return new(i||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-flow-table"]],decls:2,vars:0,template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"Flow table is not implkemented"),e.qZA())},styles:[""]}),C=(0,h.gn)([(0,c.c)()],C);var W=m(2268),P=m(9004),V=m(4515);let A=class{constructor(i,t){this.dialog=i,this.cdr=t,this.reload="0"}create(i){const t=this.dialog.open(v);t.componentRef.instance.label="Add activity",t.componentRef.instance.action="add",t.componentRef.instance.commit="Add new",t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}update(i){const t=this.dialog.open(v);t.componentRef.instance.label="Edit activity",t.componentRef.instance.action="update",t.componentRef.instance.commit="Update",t.componentRef.instance.uuid=i,t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}delete(i){const t=this.dialog.open(v);t.componentRef.instance.label="Remove activity",t.componentRef.instance.action="delete",t.componentRef.instance.commit="Delete",t.componentRef.instance.uuid=i,t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}};A.\u0275fac=function(i){return new(i||A)(e.Y36(r.Gln),e.Y36(e.sBO))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-activities"]],decls:6,vars:1,consts:[[3,"reloadData","addNewItem","editItem","removeItem"]],template:function(i,t){1&i&&(e.TgZ(0,"h1"),e._uU(1,"Activities"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p"),e._uU(4," Define and describe activities. An activity can be linked to a workstation to help planning and have a better understanding of the work (the activity) that is execuited by the workforce on a specific workstation.\n"),e.qZA(),e.TgZ(5,"app-activity-table",0),e.NdJ("addNewItem",function(s){return t.create(s)})("editItem",function(s){return t.update(s)})("removeItem",function(s){return t.delete(s)}),e.qZA()),2&i&&(e.xp6(5),e.Q6J("reloadData",t.reload))},directives:[k],styles:[""],changeDetection:0}),A=(0,h.gn)([(0,c.c)()],A);let H=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-flows"]],decls:3,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"flows"),e.qZA(),e._UZ(2,"app-flow-table"))},directives:[C],styles:[""]}),o})(),K=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-overview"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"overview"),e.qZA())},styles:[""]}),o})(),T=class{constructor(i,t,n){this.dialog=i,this.cdr=t,this.workstationApi=n,this.reload="0",this.workstationsList=[]}ngOnInit(){this.fetchWorkstations()}create(i){const t=this.dialog.open(f);t.componentRef.instance.label="Add work center",t.componentRef.instance.action="add",t.componentRef.instance.commit="Add new",this.workstationsList&&(t.componentRef.instance.workstationsList=this.workstationsList),t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}update(i){const t=this.dialog.open(f);t.componentRef.instance.label="Edit work center",t.componentRef.instance.action="update",t.componentRef.instance.commit="Update",t.componentRef.instance.uuid=i,this.workstationsList&&(t.componentRef.instance.workstationsList=this.workstationsList),t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}delete(i){const t=this.dialog.open(f);t.componentRef.instance.label="Remove work center",t.componentRef.instance.action="delete",t.componentRef.instance.commit="Delete",t.componentRef.instance.uuid=i,t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}fetchWorkstations(){this.workstationApi.dataWorkstationAllWorkstationsGet().pipe((0,c.t)(this)).subscribe({next:i=>{(null==i?void 0:i.selectItems)&&(this.workstationsList=i.selectItems)}})}};T.\u0275fac=function(i){return new(i||T)(e.Y36(r.Gln),e.Y36(e.sBO),e.Y36(u.F))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-workcenters"]],decls:6,vars:1,consts:[[3,"reloadData","addNewItem","editItem","removeItem"]],template:function(i,t){1&i&&(e.TgZ(0,"h1"),e._uU(1,"Workcenters"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p"),e._uU(4," View and define your work centers here. A work center can contain zero or more workstations. These workstations can be linked to the work center in the details view.\n"),e.qZA(),e.TgZ(5,"app-workcenter-table",0),e.NdJ("addNewItem",function(s){return t.create(s)})("editItem",function(s){return t.update(s)})("removeItem",function(s){return t.delete(s)}),e.qZA()),2&i&&(e.xp6(5),e.Q6J("reloadData",t.reload))},directives:[b],styles:[""],changeDetection:0}),T=(0,h.gn)([(0,c.c)()],T);let y=class{constructor(i,t,n,s){this.dialog=i,this.cdr=t,this.activityApi=n,this.workcenterApi=s,this.reload="0",this.activitiesList=[],this.workcentersList=[]}ngOnInit(){this.fetchActivities(),this.fetchWorkcenters()}create(i){const t=this.dialog.open(_);t.componentRef.instance.label="Add work station",t.componentRef.instance.action="add",t.componentRef.instance.commit="Add new",this.activitiesList&&(t.componentRef.instance.activitiesList=this.activitiesList),this.workcentersList&&(t.componentRef.instance.workcentersList=this.workcentersList),t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}update(i){const t=this.dialog.open(_);t.componentRef.instance.label="Edit work station",t.componentRef.instance.action="update",t.componentRef.instance.commit="Update",t.componentRef.instance.uuid=i,this.activitiesList&&(t.componentRef.instance.activitiesList=this.activitiesList),this.workcentersList&&(t.componentRef.instance.workcentersList=this.workcentersList),t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}delete(i){const t=this.dialog.open(_);t.componentRef.instance.label="Remove work station",t.componentRef.instance.action="delete",t.componentRef.instance.commit="Delete",t.componentRef.instance.uuid=i,t.onBackdropClick.pipe((0,c.t)(this)).subscribe(()=>{t.close()}),t.componentRef.instance.completed.pipe((0,c.t)(this)).subscribe(n=>{t.close(),n&&(this.reload+=1,this.cdr.markForCheck())})}fetchActivities(){this.activityApi.dataActivityAllActivitiesGet().pipe((0,c.t)(this)).subscribe({next:i=>{(null==i?void 0:i.selectItems)&&(this.activitiesList=i.selectItems)}})}fetchWorkcenters(){this.workcenterApi.dataWorkCenterAllWorkCentersGet().pipe((0,c.t)(this)).subscribe({next:i=>{(null==i?void 0:i.selectItems)&&(this.workcentersList=i.selectItems)}})}};y.\u0275fac=function(i){return new(i||y)(e.Y36(r.Gln),e.Y36(e.sBO),e.Y36(u.B0),e.Y36(u.Uv))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-workstations"]],decls:6,vars:1,consts:[[3,"reloadData","addNewItem","editItem","removeItem"]],template:function(i,t){1&i&&(e.TgZ(0,"p"),e._uU(1,"Workstations"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p"),e._uU(4,"View and define your work stations here."),e.qZA(),e.TgZ(5,"app-workstation-table",0),e.NdJ("addNewItem",function(s){return t.create(s)})("editItem",function(s){return t.update(s)})("removeItem",function(s){return t.delete(s)}),e.qZA()),2&i&&(e.xp6(5),e.Q6J("reloadData",t.reload))},directives:[g],styles:[""],changeDetection:0}),y=(0,h.gn)([(0,c.c)()],y);const ee=[{path:"overview",component:K},{path:"activity",component:A},{path:"workcenter",component:T},{path:"workstation",component:y},{path:"flow",component:H},{path:"",pathMatch:"full",redirectTo:"overview"},{path:"**",component:P.r}];let te=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[W.Bz.forChild(ee),V.n],W.Bz]}),o})(),ie=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,l.u5,l.UX,te,r.T2N,r.zyh,r.KdK,r._WB,r.IIj,r.EoG,I]]}),o})()}}]);