"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[301],{2301:(gt,x,g)=>{g.r(x),g.d(x,{SettingsOperationsModule:()=>mt});var a=g(776),w=g(9808),t=g(5e3);let A=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logistics-overview"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"logistics-overview works!"),t.qZA())},styles:[""]}),i})(),y=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logistics-streams"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"logistics-streams works!"),t.qZA())},styles:[""]}),i})();var F=g(655),Z=g(567),h=g(4987);function H(i,o){if(1&i&&(t.TgZ(0,"nb-option",14),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.displayValue," ")}}function k(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"label",10),t._uU(4,"Stream"),t.qZA()(),t.TgZ(5,"div",11)(6,"nb-select",12),t.NdJ("selectedChange",function(s){return t.CHM(e),t.oxw().onSelectStream(s)}),t.YNc(7,H,2,2,"nb-option",13),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(6),t.Q6J("selected",e.selectedStream),t.xp6(1),t.Q6J("ngForOf",e.streams)}}function N(i,o){1&i&&(t.TgZ(0,"p"),t._uU(1,"No streams have been created yet"),t.qZA())}let L=(()=>{class i{constructor(e){this.dialog=e,this.streams=[],this.completed=new t.vpe,this.close=new t.vpe}ngOnInit(){}cancel(){this.dialog.close(),this.close.emit(!0)}confirm(){this.completed.emit(this.selectedStream)}onSelectStream(e){this.selectedStream=e}onCloseDialog(){this.cancel()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(a.X4l))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-select-stream-dialog"]],outputs:{completed:"completed",close:"close"},decls:16,vars:2,consts:[[1,""],[1,"modal-title"],["icon","close",1,"close-dialog",3,"click"],[4,"ngIf","ngIfElse"],["noStreams",""],[1,"modal-footer","modal-footer--centered-buttons","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"click"],[1,"row"],[1,"col-12","col-sm-3","d-flex","align-items-center"],["for","stream",1,"mb-0"],[1,"col-12","col-sm-9"],["id","stream","status","primary","placeholder","Select stream...",1,"select",3,"selected","selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div")(2,"nb-card",0)(3,"nb-card-header",0)(4,"h4",1),t._uU(5,"Select stream"),t.qZA(),t.TgZ(6,"nb-icon",2),t.NdJ("click",function(){return n.onCloseDialog()}),t.qZA()(),t.TgZ(7,"nb-card-body"),t.YNc(8,k,8,2,"div",3),t.YNc(9,N,2,0,"ng-template",null,4,t.W1O),t.qZA(),t.TgZ(11,"div",5)(12,"button",6),t.NdJ("click",function(){return n.cancel()}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",7),t.NdJ("click",function(){return n.confirm()}),t._uU(15,"Next"),t.qZA()()()(),t.BQk()),2&e){const s=t.MAs(10);t.xp6(8),t.Q6J("ngIf",null==n.streams?null:n.streams.length)("ngIfElse",s)}},directives:[a.Asz,a.ndF,a.fMN,a.yKW,w.O5,a.rs,w.sg,a.q51,a.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:500px}nb-card[_ngcontent-%COMP%]   nb-select[_ngcontent-%COMP%]{max-width:210px;width:210px}"]}),i})();var u=g(3075);function O(i,o){if(1&i&&(t.TgZ(0,"div",24)(1,"span",25),t._uU(2,"Name is required"),t.qZA()()),2&i){const e=t.oxw();let n;t.xp6(1),t.Q6J("hidden",!(null!=(n=e.form.get("name"))&&null!=n.errors&&n.errors.required))}}function I(i,o){if(1&i&&(t.TgZ(0,"div",24)(1,"span",25),t._uU(2,"Short name is required"),t.qZA()()),2&i){const e=t.oxw();let n;t.xp6(1),t.Q6J("hidden",!(null!=(n=e.form.get("nameShort"))&&null!=n.errors&&n.errors.required))}}function q(i,o){if(1&i&&(t.TgZ(0,"nb-option",18),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.displayValue," ")}}let j=(()=>{class i{constructor(e,n,s){this.formBuilder=e,this.dialog=n,this.cdr=s,this.flowsSelectList=[],this.completed=new t.vpe,this.back=new t.vpe,this.close=new t.vpe,console.log(this.newFlow),this.form=this.formBuilder.group({name:["",u.kI.required],nameShort:["",u.kI.required],isActive:[!0],nextFlow:[{}],addNext:["0"]})}ngOnInit(){console.log(this.newFlow)}ngAfterViewInit(){var e,n,s,l;console.log("after view init"),this.newFlow&&this.form.patchValue({name:null!==(e=this.newFlow.name)&&void 0!==e?e:"",nameShort:null!==(n=this.newFlow.nameShort)&&void 0!==n?n:"",isActive:null!==(s=this.newFlow.isActive)&&void 0!==s?s:"1",nextFlow:null!==(l=this.newFlow.nextFlow)&&void 0!==l?l:""})}ngAfterViewChecked(){this.cdr.detectChanges()}onBack(){console.log(this.form.value),this.back.emit(this.form.value)}confirm(){this.completed.emit(this.form.value)}onCloseDialog(){this.form.reset(),this.close.emit(!0),this.dialog.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.qu),t.Y36(a.X4l),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-flow-dialog"]],outputs:{completed:"completed",back:"back",close:"close"},decls:50,vars:7,consts:[[1,"spinner-wrapper"],[1,"delete_action"],[1,""],[1,"modal-title"],["icon","close",1,"close-dialog",3,"click"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-12","col-sm-3","d-flex","align-items-center"],["for","name",1,"mb-0"],[1,"col-12","col-sm-9"],["nbInput","","status","primary","placeholder","Enter flow name","formControlName","name"],["class","errors-wrapper",4,"ngIf"],["nbInput","","status","primary","placeholder","Enter short name","formControlName","nameShort"],["for","nextFlow",1,"mb-0"],["id","nextFlow","status","primary","placeholder","Select flow...","formControlName","nextFlow",1,"select"],[3,"value",4,"ngFor","ngForOf"],[1,"row","mb-2"],["status","control","formControlName","isActive","name","reactive-forms-group",1,"d-flex"],[3,"value"],[1,"row"],["status","control","formControlName","addNext",1,"activity-checkbox","ml-1"],[1,"modal-footer","modal-footer--centered-buttons","modal-footer--no-border"],["nbButton","","outline","","size","medium","type","button",3,"click"],["nbButton","","status","primary","size","medium","type","submit",3,"disabled","click"],[1,"errors-wrapper"],[1,"text-danger",3,"hidden"]],template:function(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",0)(2,"nb-card",1)(3,"nb-card-header",2)(4,"h4",3),t._uU(5,"Add flow"),t.qZA(),t.TgZ(6,"nb-icon",4),t.NdJ("click",function(){return n.onCloseDialog()}),t.qZA()(),t.TgZ(7,"nb-card-body")(8,"form",5)(9,"div",6)(10,"div",7)(11,"label",8),t._uU(12,"Flow:"),t.qZA()(),t.TgZ(13,"div",9),t._UZ(14,"input",10),t.YNc(15,O,3,1,"div",11),t.qZA()(),t.TgZ(16,"div",6)(17,"div",7)(18,"label",8),t._uU(19,"Short:"),t.qZA()(),t.TgZ(20,"div",9),t._UZ(21,"input",12),t.YNc(22,I,3,1,"div",11),t.qZA()(),t.TgZ(23,"div",6)(24,"div",7)(25,"label",13),t._uU(26,"Next flow"),t.qZA()(),t.TgZ(27,"div",9)(28,"nb-select",14),t.YNc(29,q,2,2,"nb-option",15),t.qZA()()(),t.TgZ(30,"div",16)(31,"div",7)(32,"label",8),t._uU(33,"Active:"),t.qZA()(),t.TgZ(34,"div",9)(35,"nb-radio-group",17)(36,"nb-radio",18),t._uU(37,"Yes"),t.qZA(),t.TgZ(38,"nb-radio",18),t._uU(39,"No"),t.qZA()()()(),t.TgZ(40,"div",19),t._UZ(41,"div",7),t.TgZ(42,"div",9)(43,"nb-checkbox",20),t._uU(44,"Add new flow"),t.qZA()()()()(),t.TgZ(45,"div",21)(46,"button",22),t.NdJ("click",function(){return n.onBack()}),t._uU(47,"Back"),t.qZA(),t.TgZ(48,"button",23),t.NdJ("click",function(){return n.confirm()}),t._uU(49," Next "),t.qZA()()()(),t.BQk()),2&e){let s,l;t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngIf",!(null!=(s=n.form.get("name"))&&s.valid)&&((null==(s=n.form.get("name"))?null:s.dirty)||(null==(s=n.form.get("name"))?null:s.touched))),t.xp6(7),t.Q6J("ngIf",!(null!=(l=n.form.get("nameShort"))&&l.valid)&&((null==(l=n.form.get("nameShort"))?null:l.dirty)||(null==(l=n.form.get("nameShort"))?null:l.touched))),t.xp6(7),t.Q6J("ngForOf",n.flowsSelectList),t.xp6(7),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(10),t.Q6J("disabled",n.form.invalid)}},directives:[a.Asz,a.ndF,a.fMN,a.yKW,u._Y,u.JL,u.sg,a.h8i,u.Fj,u.JJ,u.u,w.O5,a.rs,w.sg,a.q51,a.MFI,a.r3g,a.NTf,a.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:500px}nb-card[_ngcontent-%COMP%]   nb-select[_ngcontent-%COMP%], nb-card[_ngcontent-%COMP%]   [nbInput][_ngcontent-%COMP%]{max-width:210px;width:210px}"]}),i})();var J=g(3242),P=g(2125),C=g(4357),b=g(520),U=g(8106),M=g(9230),T=g(3691);let D=(()=>{class i{constructor(e,n,s){this.httpClient=e,this.basePath="http://localhost",this.defaultHeaders=new b.WM,this.configuration=new T.V,s&&(this.configuration=s),"string"!=typeof this.configuration.basePath&&("string"!=typeof n&&(n=this.basePath),this.configuration.basePath=n),this.encoder=this.configuration.encoder||new U.H}addToHttpParams(e,n,s){return"object"!=typeof n||n instanceof Date?this.addToHttpParamsRecursive(e,n,s):this.addToHttpParamsRecursive(e,n)}addToHttpParamsRecursive(e,n,s){if(null==n)return e;if("object"==typeof n)if(Array.isArray(n))n.forEach(l=>e=this.addToHttpParamsRecursive(e,l,s));else if(n instanceof Date){if(null==s)throw Error("key may not be null if value is Date");e=e.append(s,n.toISOString().substr(0,10))}else Object.keys(n).forEach(l=>e=this.addToHttpParamsRecursive(e,n[l],null!=s?`${s}.${l}`:l));else{if(null==s)throw Error("key may not be null if value is not object or array");e=e.append(s,n)}return e}dataStreamAddLinkPost(e,n="body",s=!1,l){let c=this.defaultHeaders,r=l&&l.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==r&&(c=c.set("Accept",r));let d=l&&l.context;void 0===d&&(d=new b.qT);const m=this.configuration.selectHeaderContentType(["application/json","text/json","application/_*+json"]);void 0!==m&&(c=c.set("Content-Type",m));let f="json";return r&&(f=r.startsWith("text")?"text":this.configuration.isJsonMime(r)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/data/Stream/addLink`,e,{context:d,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:n,reportProgress:s})}dataStreamAllStreamsGet(e="body",n=!1,s){let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==c&&(l=l.set("Accept",c));let r=s&&s.context;void 0===r&&(r=new b.qT);let d="json";return c&&(d=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/data/Stream/allStreams`,{context:r,responseType:d,withCredentials:this.configuration.withCredentials,headers:l,observe:e,reportProgress:n})}dataStreamCreatePost(e,n="body",s=!1,l){let c=this.defaultHeaders,r=l&&l.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==r&&(c=c.set("Accept",r));let d=l&&l.context;void 0===d&&(d=new b.qT);const m=this.configuration.selectHeaderContentType(["application/json","text/json","application/_*+json"]);void 0!==m&&(c=c.set("Content-Type",m));let f="json";return r&&(f=r.startsWith("text")?"text":this.configuration.isJsonMime(r)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/data/Stream/create`,e,{context:d,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:n,reportProgress:s})}dataStreamDeleteUuidDelete(e,n="body",s=!1,l){if(null==e)throw new Error("Required parameter uuid was null or undefined when calling dataStreamDeleteUuidDelete.");let c=this.defaultHeaders,r=l&&l.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept([])),void 0!==r&&(c=c.set("Accept",r));let d=l&&l.context;void 0===d&&(d=new b.qT);let p="json";return r&&(p=r.startsWith("text")?"text":this.configuration.isJsonMime(r)?"json":"blob"),this.httpClient.delete(`${this.configuration.basePath}/data/Stream/delete/${encodeURIComponent(String(e))}`,{context:d,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:n,reportProgress:s})}dataStreamGetUuidGet(e,n="body",s=!1,l){if(null==e)throw new Error("Required parameter uuid was null or undefined when calling dataStreamGetUuidGet.");let c=this.defaultHeaders,r=l&&l.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==r&&(c=c.set("Accept",r));let d=l&&l.context;void 0===d&&(d=new b.qT);let p="json";return r&&(p=r.startsWith("text")?"text":this.configuration.isJsonMime(r)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/data/Stream/get/${encodeURIComponent(String(e))}`,{context:d,responseType:p,withCredentials:this.configuration.withCredentials,headers:c,observe:n,reportProgress:s})}dataStreamListGet(e,n,s="body",l=!1,c){let r=new b.LE({encoder:this.encoder});null!=e&&(r=this.addToHttpParams(r,e,"filter")),null!=n&&(r=this.addToHttpParams(r,n,"sort"));let d=this.defaultHeaders,p=c&&c.httpHeaderAccept;void 0===p&&(p=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==p&&(d=d.set("Accept",p));let m=c&&c.context;void 0===m&&(m=new b.qT);let f="json";return p&&(f=p.startsWith("text")?"text":this.configuration.isJsonMime(p)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/data/Stream/list`,{context:m,params:r,responseType:f,withCredentials:this.configuration.withCredentials,headers:d,observe:s,reportProgress:l})}dataStreamTablePost(e,n="body",s=!1,l){let c=this.defaultHeaders,r=l&&l.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==r&&(c=c.set("Accept",r));let d=l&&l.context;void 0===d&&(d=new b.qT);const m=this.configuration.selectHeaderContentType(["application/json","text/json","application/_*+json"]);void 0!==m&&(c=c.set("Content-Type",m));let f="json";return r&&(f=r.startsWith("text")?"text":this.configuration.isJsonMime(r)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/data/Stream/table`,e,{context:d,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:n,reportProgress:s})}dataStreamTableUpdatePost(e,n="body",s=!1,l){let c=this.defaultHeaders,r=l&&l.httpHeaderAccept;void 0===r&&(r=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==r&&(c=c.set("Accept",r));let d=l&&l.context;void 0===d&&(d=new b.qT);const m=this.configuration.selectHeaderContentType(["application/json","text/json","application/_*+json"]);void 0!==m&&(c=c.set("Content-Type",m));let f="json";return r&&(f=r.startsWith("text")?"text":this.configuration.isJsonMime(r)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/data/Stream/tableUpdate`,e,{context:d,responseType:f,withCredentials:this.configuration.withCredentials,headers:c,observe:n,reportProgress:s})}dataStreamUpdateUuidPut(e,n,s="body",l=!1,c){if(null==e)throw new Error("Required parameter uuid was null or undefined when calling dataStreamUpdateUuidPut.");let r=this.defaultHeaders,d=c&&c.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["text/plain","application/json","text/json"])),void 0!==d&&(r=r.set("Accept",d));let p=c&&c.context;void 0===p&&(p=new b.qT);const f=this.configuration.selectHeaderContentType(["application/json","text/json","application/_*+json"]);void 0!==f&&(r=r.set("Content-Type",f));let _="json";return d&&(_=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.put(`${this.configuration.basePath}/data/Stream/update/${encodeURIComponent(String(e))}`,n,{context:p,responseType:_,withCredentials:this.configuration.withCredentials,headers:r,observe:s,reportProgress:l})}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(b.eN),t.LFG(M.G,8),t.LFG(T.V,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function R(i,o){1&i&&(t.TgZ(0,"span",24),t._uU(1," This field is required "),t.qZA())}function E(i,o){1&i&&(t.TgZ(0,"span",24),t._uU(1," This field is required "),t.qZA())}function G(i,o){if(1&i&&(t.TgZ(0,"nb-option",25),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.displayValue," ")}}function Q(i,o){if(1&i&&t._UZ(0,"nb-icon",26),2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("nbTooltip",n.getWarningInfo(e.missingLinks))}}function V(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",27),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(3).toggleEdit(s)}),t.qZA()}}const Y=function(i){return{"table-icon":!0,disabled:i}};function B(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(3).saveEdit(s)}),t.qZA()}if(2&i){const e=t.oxw().index,n=t.oxw(3);let s;t.Q6J("ngClass",t.VKq(1,Y,null==(s=n.getControl(e).get("name"))?null:s.getError("required")))}}function W(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index;return t.oxw(3).cancelEdit(s)}),t.qZA()}}function $(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(),l=s.$implicit,c=s.index;return t.oxw(3).onDelete(l.uuid,c)}),t.qZA()}}function z(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",8)(1,"td"),t._UZ(2,"input",9),t.YNc(3,R,2,0,"span",10),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",11),t.YNc(6,E,2,0,"span",10),t.qZA(),t.TgZ(7,"td")(8,"nb-select",12),t.YNc(9,G,2,2,"nb-option",13),t.qZA()(),t.TgZ(10,"td")(11,"div",14)(12,"nb-checkbox",15),t._uU(13,"Active"),t.qZA()()(),t.TgZ(14,"td")(15,"i",16),t.NdJ("click",function(){const s=t.CHM(e),l=s.$implicit,c=s.index;return t.oxw(3).onOpenConnectionPopup(l,c)}),t.qZA()(),t.TgZ(16,"td")(17,"div",17),t.YNc(18,Q,1,1,"nb-icon",18),t.YNc(19,V,1,0,"nb-icon",19),t.YNc(20,B,1,3,"nb-icon",20),t.YNc(21,W,1,0,"nb-icon",21),t.YNc(22,$,1,0,"nb-icon",22),t.qZA()(),t.TgZ(23,"td"),t._UZ(24,"i",23),t.qZA()()}if(2&i){const e=o.$implicit,n=o.index,s=t.oxw(3);let l,c;t.Q6J("formGroupName",n),t.xp6(2),t.s9C("id",e.name),t.s9C("value",e.name),t.xp6(1),t.Q6J("ngIf",(null==(l=s.getControl(n).get("name"))?null:l.touched)&&(null==(l=s.getControl(n).get("name"))?null:l.getError("required"))),t.xp6(2),t.s9C("id",e.nameShort),t.s9C("value",e.nameShort),t.xp6(1),t.Q6J("ngIf",(null==(c=s.getControl(n).get("nameShort"))?null:c.touched)&&(null==(c=s.getControl(n).get("nameShort"))?null:c.getError("required"))),t.xp6(3),t.Q6J("ngForOf",s.flowsSelectList),t.xp6(9),t.Q6J("ngIf","Warning"===e.linkStatus||"Critical"===e.linkStatus),t.xp6(1),t.Q6J("ngIf",s.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!s.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!s.formControlState(n)),t.xp6(1),t.Q6J("ngIf",s.formControlState(n))}}function X(i,o){if(1&i&&(t.ynx(0),t.YNc(1,z,25,13,"tr",7),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.flowsList)}}function K(i,o){1&i&&(t.TgZ(0,"tr")(1,"td",31),t._uU(2,"There are no flows to display."),t.qZA()())}function tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t._uU(5,"Flows"),t.qZA(),t.TgZ(6,"th",3),t._uU(7,"Short"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Next Flow"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Active"),t.qZA(),t.TgZ(12,"th",3),t._uU(13,"Connections"),t.qZA(),t.TgZ(14,"th",3),t._uU(15,"Actions"),t.qZA(),t.TgZ(16,"th",3)(17,"nb-icon",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().onOpenSelectStreamDialog()}),t.qZA()()()(),t.TgZ(18,"tbody",5),t.YNc(19,X,2,1,"ng-container",0),t.YNc(20,K,3,0,"ng-template",null,6,t.W1O),t.qZA()()()}if(2&i){const e=t.MAs(21),n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(17),t.Q6J("formArrayName","formArrayName"),t.xp6(1),t.Q6J("ngIf",n.flowsList.length)("ngIfElse",e)}}function et(i,o){1&i&&t._UZ(0,"div",32),2&i&&t.Q6J("nbSpinner",!0)}let v=class{constructor(o,e,n,s,l,c,r){this.cdr=o,this.flowsApi=e,this.streamApi=n,this.toastrService=s,this.dialog=l,this.workstationApi=c,this.formBuilder=r,this.flowsList=[],this.streamsSelectList=[],this.flowsSelectList=[],this.addNewFlow=!1,this.checked=!1,this.dataAvalaible=!1,this.positions=a.fe3,this.form=new u.cw({formArrayName:this.formBuilder.array([])})}ngOnInit(){this.getFlowsData(),this.getFlowsSelectList(),this.getStreamsSelectList(),this.getWorkstationsSelectList()}toggleActivity(o){this.checked=o}getWorkstationsSelectList(){this.workstationApi.dataWorkstationAllWorkstationsGet().pipe((0,h.t)(this)).subscribe({next:o=>{this.workstationsSelectList=o.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}})}getFlowsData(){this.flowsApi.dataFlowsListGet().pipe((0,h.t)(this)).subscribe({next:o=>{this.dataAvalaible=!0,this.flowsList=o,this.cdr.markForCheck(),this.buildForm()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting flows list failed, please try again later.",3e3)}})}getStreamsSelectList(){this.streamApi.dataStreamAllStreamsGet().pipe((0,h.t)(this)).subscribe({next:o=>{this.streamsSelectList=null==o?void 0:o.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting streams list failed, please try again later.",3e3)}})}getFlowsSelectList(){this.flowsApi.dataFlowsAllFlowsGet().pipe((0,h.t)(this)).subscribe({next:o=>{this.flowsSelectList=null==o?void 0:o.selectItems,this.cdr.markForCheck()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Getting flows select list failed, please try again later.",3e3)}})}add(){const o=Object.assign({},this.newFlow);this.flowsApi.dataFlowsCreatePost(o).pipe((0,h.t)(this)).subscribe({next:e=>{this.getFlowsData(),this.getFlowsSelectList(),this.showToast(this.positions.TOP_RIGHT,"success","Flow succesfully created.",3e3),this.newFlow=void 0,this.newFlowStream=void 0,this.onOpenConnectionPopup()},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Adding mew flow failed, please try again later.",3e3)}})}onOpenSelectStreamDialog(){const o=this.dialog.open(L);o.onBackdropClick.pipe((0,h.t)(this)).subscribe(()=>{o.close(),this.newFlow=void 0}),o.componentRef.instance.selectedStream=this.newFlowStream,o.componentRef.instance.streams=this.streamsSelectList,o.componentRef.instance.completed.pipe((0,h.t)(this)).subscribe(e=>{e&&(this.newFlowStream=e),o.close(),this.onOpenCreateFlowDialog()}),o.componentRef.instance.close.pipe((0,h.t)(this)).subscribe(()=>{this.clearNewFlow()})}onOpenCreateFlowDialog(){const o=this.dialog.open(j);o.onBackdropClick.pipe((0,h.t)(this)).subscribe(()=>{o.close(),this.newFlow=void 0,this.newFlowStream=void 0,this.addNewFlow=!1}),o.componentRef.instance.newFlow=this.newFlow,o.componentRef.instance.flowsSelectList=this.flowsSelectList,o.componentRef.instance.back.pipe((0,h.t)(this)).subscribe(e=>{if(e){const{name:n,nameShort:s,isActive:l,nextFlow:c,addNext:r}=e;this.newFlow={name:n,nameShort:s,isActive:l,nextFlow:c},this.addNewFlow=r}o.close(),this.onOpenSelectStreamDialog()}),o.componentRef.instance.completed.pipe((0,h.t)(this)).subscribe(e=>{if(e){const{name:n,nameShort:s,isActive:l,nextFlow:c,addNext:r}=e;this.newFlow={name:n,nameShort:s,isActive:l,nextFlow:c},this.addNewFlow=r,o.close(),this.add()}}),o.componentRef.instance.close.pipe((0,h.t)(this)).subscribe(()=>{this.newFlow=void 0,this.newFlowStream=void 0})}clearNewFlow(){this.newFlow=void 0,this.newFlowStream=void 0,this.selectedWorkstations=[]}onOpenConnectionPopup(o,e){var n,s;const l=this.dialog.open(J.w);l.onBackdropClick.pipe((0,h.t)(this)).subscribe(()=>{this.selectedWorkstations=[],l.close()}),(null===(n=this.workstationsSelectList)||void 0===n?void 0:n.length)&&(l.componentRef.instance.items=this.workstationsSelectList,l.componentRef.instance.selectedItems=null!==(s=this.selectedWorkstations)&&void 0!==s?s:[],l.componentRef.instance.leftTitle="Workstations",l.componentRef.instance.rightTitle="Flow",l.componentRef.instance.title="Connect a Workstation to the flow",l.componentRef.instance.completed.pipe((0,h.t)(this)).subscribe(r=>{this.selectedWorkstations=r,this.addConnections(e),l.close()}),l.componentRef.instance.close.pipe((0,h.t)(this)).subscribe(()=>{this.selectedWorkstations=[]}))}addConnections(o){var e,n;if(!(null===(e=this.flowsSelectList)||void 0===e?void 0:e.length)||!(null===(n=this.workstationsSelectList)||void 0===n?void 0:n.length))return;const s=this.workstationsSelectList.map(l=>{var c;const r={workstation:l,flow:this.flowsSelectList?this.flowsSelectList[null!=o?o:(null===(c=this.flowsSelectList)||void 0===c?void 0:c.length)-1]:{}};return this.flowsApi.dataFlowsAddLinkPost(r)});(0,Z.D)(s).pipe((0,h.t)(this)).subscribe({next:l=>{this.getFlowsData(),this.showToast(this.positions.TOP_RIGHT,"success","Flows connections succesfully created.",3e3),this.clearNewFlow(),o||(this.onOpenCreateFlowDialog(),this.addNewFlow=!1)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Adding flow connections, please try again later.",3e3)}})}buildForm(){this.form=this.formBuilder.group({formArrayName:this.formBuilder.array([...this.flowsList].map(o=>{var e,n,s,l,c;return this.createFlowGroup(!0,null!==(e=o.name)&&void 0!==e?e:"",null!==(n=o.nameShort)&&void 0!==n?n:"",null!==(s=o.uuid)&&void 0!==s?s:"",null!==(l=o.nextFlow)&&void 0!==l?l:"",null!==(c=o.isActive)&&void 0!==c&&c)}))})}createFlowGroup(o=!0,e="",n="",s="",l="",c=!1){return this.formBuilder.group({name:new u.NI({value:e,disabled:o},u.kI.required),nameShort:new u.NI({value:n,disabled:o},u.kI.required),uuid:new u.NI({value:s,disabled:o}),nextFlow:new u.NI({value:l,disabled:o}),isActive:new u.NI({value:c,disabled:o})})}onRemove(o){this.flowsList.splice(o,1),this.form.get("formArrayName").removeAt(o),this.cdr.markForCheck()}toggleEdit(o){const e=this.form.get("formArrayName");"DISABLED"===e.controls[o].status?e.controls[o].enable():e.controls[o].disable()}getControl(o){return this.form.get("formArrayName").controls[o]}cancelEdit(o){this.toggleEdit(o);const e=this.form.get("formArrayName"),n=this.flowsList.find(s=>s.uuid===e.controls[o].value.uuid);e.controls[o].patchValue({name:null==n?void 0:n.name,nameShort:null==n?void 0:n.nameShort})}formControlState(o){return this.form.get("formArrayName").controls[o].disabled}getControlsArray(){return this.form.get("formArrayName")}saveEdit(o){const n=this.form.get("formArrayName").controls[o];console.log(n);const{name:s,nameShort:l,isActive:c,nextFlow:r,uuid:d}=n.value;this.flowsApi.dataFlowsUpdateUuidPut(d,{name:s,nameShort:l,isActive:c,nextFlow:r,uuid:d}).pipe((0,h.t)(this)).subscribe({next:m=>{this.getFlowsData(),this.getFlowsSelectList(),this.showToast(this.positions.TOP_RIGHT,"success","Flow succesfully updated.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}})}getWarningInfo(o){const e=null==o?void 0:o.map(n=>n.displayValue).join(". ");return null!=e?e:""}onDelete(o,e){const n=this.dialog.open(P.D);n.componentRef.instance.title="Remove flow",n.componentRef.instance.text="Are you sure you want to remove this flow?",n.onBackdropClick.pipe((0,h.t)(this)).subscribe(()=>{n.close()}),n.componentRef.instance.completed.pipe((0,h.t)(this)).subscribe(s=>{o?this.flowsApi.dataFlowsDeleteUuidDelete(o).pipe((0,h.t)(this)).subscribe({next:()=>{this.onRemove(e),this.cdr.markForCheck(),n.close(),this.showToast(this.positions.TOP_RIGHT,"success","Flow succesfully removed.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):(this.onRemove(e),n.close())})}showToast(o,e,n,s=5e3,l=""){!n||this.toastrService.show(e||"Success",n,{icon:l,position:o,status:e,duration:s,destroyByClick:!0,limit:1})}};v.\u0275fac=function(o){return new(o||v)(t.Y36(t.sBO),t.Y36(C.OF),t.Y36(D),t.Y36(a.quB),t.Y36(a.Gln),t.Y36(C.F),t.Y36(u.qu))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-logistics-flows"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"table","flows-table","overflow-auto",3,"formGroup"],["scope","col"],["title","Edit","icon","add_circle",1,"cursor-pointer",3,"click"],[3,"formArrayName"],["noData",""],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["status","primary","nbInput","","type","text","formControlName","name",1,"editable-input",3,"id","value"],["class","text-danger",4,"ngIf"],["status","primary","nbInput","","type","text","formControlName","nameShort",1,"editable-input",3,"id","value"],["id","nextFlow","status","control","placeholder","Select flow...","formControlName","nextFlow",1,"editable-input"],[3,"value",4,"ngFor","ngForOf"],[1,"checkbox-container","d-flex","align-items-center"],["status","control","formControlName","isActive",1,"activity-checkbox","ml-1","editable-input"],[1,"iconEcheclon","icon-connection","connection-icon","ml-1","cursor-pointer",3,"click"],[1,"float-right","icons-wrapper"],["nbTooltipStatus","primary","class","warning-icon","icon","warning",3,"nbTooltip",4,"ngIf"],["class","table-icon","title","Edit","icon","edit",3,"click",4,"ngIf"],["class","table-icon","title","Edit","icon","check_circle","type","button",3,"ngClass","click",4,"ngIf"],["class","table-icon","title","Delete","icon","close",3,"click",4,"ngIf"],["class","table-icon","title","Delete","icon","delete",3,"click",4,"ngIf"],[1,"iconEcheclon","icon-drag","drag-icon","cursor-pointer"],[1,"text-danger"],[3,"value"],["nbTooltipStatus","primary","icon","warning",1,"warning-icon",3,"nbTooltip"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Edit","icon","check_circle","type","button",1,"table-icon",3,"ngClass","click"],["title","Delete","icon","close",1,"table-icon",3,"click"],["title","Delete","icon","delete",1,"table-icon",3,"click"],["colspan","7",1,"border-0","text-center"],[1,"spinner-wrapper",3,"nbSpinner"]],template:function(o,e){if(1&o&&(t.YNc(0,tt,22,4,"div",0),t.YNc(1,et,1,1,"ng-template",null,1,t.W1O)),2&o){const n=t.MAs(2);t.Q6J("ngIf",e.dataAvalaible)("ngIfElse",n)}},directives:[w.O5,u.JL,u.sg,a.fMN,u.CE,w.sg,u.x0,a.h8i,u.Fj,u.JJ,u.u,a.rs,a.q51,a.NTf,a.jNv,w.mk,a.Q7R],styles:[".flows-table[_ngcontent-%COMP%]{border:none}.flows-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:2px solid #dee2e6;vertical-align:middle}.flows-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.connection-icon[_ngcontent-%COMP%]{font-size:13px}.drag-icon[_ngcontent-%COMP%]{font-size:30px}"],changeDetection:0}),v=(0,F.gn)([(0,h.c)()],v);const nt=function(i){return{"single-tab--active":i}};function ot(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"h3",11),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().activeSection=l}),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()}if(2&i){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(4,nt,n.activeSection===e)),t.xp6(1),t.hij(" ",t.lcZ(3,2,e)," ")}}function it(i,o){1&i&&t._UZ(0,"app-logistics-overview")}function st(i,o){1&i&&t._UZ(0,"app-logistics-streams")}function lt(i,o){1&i&&t._UZ(0,"app-logistics-flows")}let ct=(()=>{class i{constructor(){this.tabs=["overview","streams","flows"],this.activeSection=this.tabs[0]}ngOnInit(){}search(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logistics"]],decls:14,vars:4,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"page-title","mt-2","mb-0"],[1,"search-input"],["type","text","nbInput","","placeholder","Search by: Stream, Flow, Workstation"],["nbSuffix","","nbButton","","ghost","",1,"btn","d-flex","align-items-center","justify-content-center",3,"click"],["title","Search","icon","search"],[1,"d-flex","w-100","flex-column","tabs-navigation","mb-4"],[1,"d-flex","pl-3","tabs-container"],[4,"ngFor","ngForOf"],[1,"underline","w-100"],[4,"ngIf"],[1,"single-tab","d-flex","justify-content-center","mb-0",3,"ngClass","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Logistics"),t.qZA(),t.TgZ(3,"nb-form-field",2),t._UZ(4,"input",3),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.search()}),t._UZ(6,"nb-icon",5),t.qZA()()(),t.TgZ(7,"div",6)(8,"div",7),t.YNc(9,ot,4,6,"div",8),t.qZA(),t._UZ(10,"div",9),t.qZA(),t.YNc(11,it,1,0,"app-logistics-overview",10),t.YNc(12,st,1,0,"app-logistics-streams",10),t.YNc(13,lt,1,0,"app-logistics-flows",10)),2&e&&(t.xp6(9),t.Q6J("ngForOf",n.tabs),t.xp6(2),t.Q6J("ngIf","overview"===n.activeSection),t.xp6(1),t.Q6J("ngIf","streams"===n.activeSection),t.xp6(1),t.Q6J("ngIf","flows"===n.activeSection))},directives:[a.jBG,a.h8i,a.DPz,a.yyc,a.fMN,w.sg,w.mk,w.O5,A,y,v],pipes:[w.rS],styles:[".tabs-navigation[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{margin-bottom:-2px;z-index:1}.tabs-navigation[_ngcontent-%COMP%]   .single-tab[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-right:45px;cursor:pointer;-webkit-user-select:none;user-select:none}.tabs-navigation[_ngcontent-%COMP%]   .single-tab--active[_ngcontent-%COMP%]{border-bottom:2px solid white}.underline[_ngcontent-%COMP%]{height:2px;background:#3D536F}.page-title[_ngcontent-%COMP%]{font-size:40px}.search-input[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),i})();var S=g(2268);let rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Schedule"),t.qZA())},styles:[""],changeDetection:0}),i})();var at=g(9004),dt=g(4515);const pt=[{path:"schedule",component:rt},{path:"logistics",component:ct},{path:"",pathMatch:"full",redirectTo:"schedule"},{path:"**",component:at.r}];let ut=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[S.Bz.forChild(pt),dt.n],S.Bz]}),i})(),ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[w.ez,a.KdK,a.MfT,a.nKr,a.V7y,a.uuI,a.T2N,a.zyh,u.UX,a.rgH,a.x4g,a.YNG,a.IIj]]}),i})(),mt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[w.ez,ut,ft,a.zyh,a.KdK,a.T2N,a.IIj,a.nKr,a.YNG,a.MfT,u.UX]]}),i})()}}]);