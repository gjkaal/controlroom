"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[56],{592:(q,g,l)=>{l.r(g),l.d(g,{SettingsPermissionsModule:()=>Q});var u=l(9808),p=l(2268),h=l(655),_=l(4987),t=l(5e3),f=l(1333),i=l(776);function Z(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"nb-icon",8)(7,"nb-icon",9),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.AsE("",n.firstName," ",n.surname,""),t.xp6(2),t.Oqu(n.emailAddress)}}function C(e,o){if(1&e&&(t.TgZ(0,"table",4)(1,"thead")(2,"tr")(3,"th",5),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"th",5),t._uU(6,"E-mail"),t.qZA(),t.TgZ(7,"th",5),t._UZ(8,"nb-icon",6),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,Z,8,3,"tr",7),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(10),t.Q6J("ngForOf",null==n?null:n.items)}}function A(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"There are no users to display."),t.qZA())}function b(e,o){if(1&e&&(t.ynx(0),t.YNc(1,C,11,1,"table",2),t.YNc(2,A,2,0,"ng-template",null,3,t.W1O),t.BQk()),2&e){const n=o.ngIf,s=t.MAs(3);t.xp6(1),t.Q6J("ngIf",null==n||null==n.items?null:n.items.length)("ngIfElse",s)}}function T(e,o){1&e&&t._UZ(0,"div",10),2&e&&t.Q6J("nbSpinner",!0)}let a=class{constructor(o){this.userApi=o,this.message=""}ngOnInit(){this.getUserList()}getUserList(){this.users$=this.userApi.dataUserListGet()}};a.\u0275fac=function(o){return new(o||a)(t.Y36(f.Wj))},a.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],decls:7,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","table",4,"ngIf","ngIfElse"],["noUsers",""],[1,"table"],["scope","col"],["title","Edit","icon","add_circle"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit"],["title","Delete","icon","close"],[3,"nbSpinner"]],template:function(o,n){if(1&o&&(t.TgZ(0,"h1"),t._uU(1,"Users"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,b,4,2,"ng-container",0),t.ALo(4,"async"),t.YNc(5,T,1,1,"ng-template",null,1,t.W1O)),2&o){const s=t.MAs(6);t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,n.users$))("ngIfElse",s)}},directives:[u.O5,i.fMN,u.sg,i.Q7R],pipes:[u.Ov],styles:[""],changeDetection:0}),a=(0,h.gn)([(0,_.c)()],a);var U=l(9004),r=l(3075),x=l(8929),v=l(7625),y=l(7253);const N=["edit_dialog"];function R(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nb-icon",6)(5,"nb-icon",7),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.Oqu(n.displayValue)}}function I(e,o){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t._uU(5,"Role name"),t.qZA(),t.TgZ(6,"th",3)(7,"nb-icon",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().addNew()}),t.qZA()()()(),t.TgZ(8,"tbody"),t.YNc(9,R,6,1,"tr",5),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(9),t.Q6J("ngForOf",n.items)}}function S(e,o){1&e&&t._uU(0,"Loading data...")}function F(e,o){1&e&&t.YNc(0,S,1,0,"ng-template")}function w(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h1"),t._uU(3),t.qZA()(),t.TgZ(4,"nb-card-body")(5,"form",8)(6,"div",9)(7,"label",10),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"div",11),t._UZ(10,"input",12),t.qZA()(),t.TgZ(11,"div",13)(12,"label",14),t._uU(13,"Short name"),t.qZA(),t.TgZ(14,"div",15),t._UZ(15,"input",16),t.qZA()()()(),t.TgZ(16,"nb-card-footer")(17,"div",17)(18,"button",18),t.NdJ("click",function(){const m=t.CHM(n).dialogRef,d=t.oxw();return m.close(d.addNewComplete(!1))}),t._uU(19,"Cancel"),t.qZA(),t.TgZ(20,"button",19),t.NdJ("click",function(){const m=t.CHM(n).dialogRef,d=t.oxw();return m.close(d.addNewComplete(!0))}),t._uU(21,"Save changes"),t.qZA()()()()}if(2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.editLabel),t.xp6(2),t.Q6J("formGroup",n.addNewForm)}}let J=(()=>{class e{constructor(n,s,c,m){this.api=n,this.cdr=s,this.dialogService=c,this.toast=m,this.destroy$=new x.xQ,this.addNewForm=new r.cw({name:new r.NI,nameShort:new r.NI}),this.message="",this.items=[],this.loading=!1,this.dataAvailable=!1,this.editLabel="Edit"}loadData(){return!!(this.items&&this.items.length>0)||(this.loading=!0,this.api.dataRoleActiveSiteRolesGet().subscribe({next:n=>{n.selectItems?this.items=n.selectItems:this.message=`${n.message}`,this.loading=!1,this.dataAvailable=!0,this.cdr.markForCheck()},error:n=>{this.loading=!1,this.message=n,this.cdr.markForCheck()}}),!1)}formControls(n){return this.addNewForm.controls}addNew(){this.editLabel="Add role",this.dialogService.open(this.editItem).onClose.pipe((0,v.R)(this.destroy$)).subscribe(n=>{!n||this.toast.notifyAboutChange(n)})}addNewComplete(n){if(!n)return"Aborted";const s=this.formControls(this.addNewForm);return this.api.dataRoleCreatePost({name:s.name.value,nameShort:s.nameShort.value}).subscribe(m=>{this.toast.notifyAboutChange(`${m}`),this.items=[],this.cdr.markForCheck()}),"Creating new role."}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.Ah),t.Y36(t.sBO),t.Y36(i.Gln),t.Y36(y.ez))},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,s){if(1&n&&t.Gf(N,5),2&n){let c;t.iGM(c=t.CRH())&&(s.editItem=c.first)}},decls:7,vars:2,consts:[[4,"ngIf"],["edit_dialog",""],[1,"table"],["scope","col"],["title","Add","icon","add_circle",1,"table-icon",3,"click"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit",1,"table-icon"],["title","Delete","icon","close",1,"table-icon"],[3,"formGroup"],[1,"row","mb-10"],["for","name",1,"col-sm-2"],[1,"col-sm-1"],["id","name","formControlName","name"],[1,"row","mb-3"],["for","nameShort",1,"col-sm-2"],[1,"col-sm-10"],["id","nameShort","formControlName","nameShort"],[1,"d-flex","align-items-center","justify-content-center"],["nbButton","","outline","","size","medium",1,"mr-3",3,"click"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(n,s){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Roles"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,I,10,1,"ng-container",0),t.YNc(4,F,1,0,null,0),t.YNc(5,w,22,2,"ng-template",null,1,t.W1O)),2&n&&(t.xp6(3),t.Q6J("ngIf",s.dataAvailable),t.xp6(1),t.Q6J("ngIf",s.loading))},directives:[u.O5,i.fMN,u.sg,i.Asz,i.ndF,i.yKW,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,i.XWE,i.DPz],styles:[""],changeDetection:0}),e})(),M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:5,vars:0,template:function(n,s){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Access"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"p"),t._uU(4,"Use this page to assign menu access rights to roles."),t.qZA())},styles:[""],changeDetection:0}),e})();var O=l(4515);const Y=[{path:"user",component:a},{path:"roles",component:J},{path:"access",component:M},{path:"",pathMatch:"full",redirectTo:"user"},{path:"**",component:U.r}];let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(Y),O.n],p.Bz]}),e})(),Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,E,r.u5,r.UX,i.T2N,i.zyh,i.KdK,i._WB,i.IIj,i.EoG,i.uuI]]}),e})()}}]);