"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[515],{3515:(Ce,P,g)=>{g.r(P),g.d(P,{OccupationPlanModule:()=>Te});var S=g(6460),M=g(8593),f=g(9808),c=g(776),_=g(3075),O=g(2601),y=g(5173),e=g(5e3);let N=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,c.T2N,c.zyh,c.KdK,M.vP,_.u5,_.UX,c.OA,c.kmq,c.nKr,c.IIj,c.oGl,O.r,y.i,c.COg]]}),r})();var F=g(6526),Z=g(655),v=g(4987),A=g(2268),w=g(890);const q=function(r){return{active:r}};function W(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"nb-list-item",4),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw().onChoosePlan(a.reference)}),e._uU(1),e.qZA()}if(2&r){const n=t.$implicit,o=e.oxw();e.Q6J("ngClass",e.VKq(2,q,o.choosenPlan===n.reference)),e.xp6(1),e.hij(" ",n.displayValue," ")}}let b=class{constructor(t,n,o){this.dialog=t,this.router=n,this.siteOccupationApi=o,this.plans=[],this.choosenPlan=""}ngOnInit(){this.setSavedPlans(),this.plans=[]}onChoosePlan(t){this.choosenPlan=t}setSavedPlans(){this.siteOccupationApi.dataSiteOccupationPlanTemplatesGet().pipe((0,v.t)(this)).subscribe({next:t=>{console.log(t),this.plans=t.selectItems}})}onCloseDialog(){this.dialog.close()}navigateToManualCreate(){this.dialog.close(),this.router.navigate(["occupation/plan/manual"],{state:{planOption:this.choosenPlan}})}};b.\u0275fac=function(t){return new(t||b)(e.Y36(c.X4l),e.Y36(A.F0),e.Y36(w.j))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-plan-manual-import-dialog"]],decls:18,vars:4,consts:[["icon","close",1,"import-dialog-close",3,"click"],[1,"manual-options-wrapper"],[1,"row","mb-1"],[1,"col-sm-12"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"buttons"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h2"),e._uU(3,"Select manual option"),e.qZA(),e.TgZ(4,"nb-icon",0),e.NdJ("click",function(){return n.onCloseDialog()}),e.qZA()(),e.TgZ(5,"nb-card-body")(6,"div",1)(7,"div",2)(8,"div",3)(9,"nb-list")(10,"nb-list-item",4),e.NdJ("click",function(){return n.onChoosePlan("manual")}),e._uU(11," Manual "),e.qZA(),e.YNc(12,W,2,4,"nb-list-item",5),e.qZA()()()(),e.TgZ(13,"div",6)(14,"button",7),e.NdJ("click",function(){return n.onCloseDialog()}),e._uU(15,"Cancel"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){return n.navigateToManualCreate()}),e._uU(17,"Select"),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngClass",e.VKq(2,q,"manual"===n.choosenPlan)),e.xp6(2),e.Q6J("ngForOf",n.plans))},directives:[c.Asz,c.ndF,c.fMN,c.yKW,c.zP_,c.qBV,f.mk,f.sg,c.DPz],styles:["nb-card-header[_ngcontent-%COMP%]{position:relative}.import-dialog-close[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;cursor:pointer}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:48px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 17px}.manual-options-wrapper[_ngcontent-%COMP%]{min-width:532px;padding:0 50px}nb-list-item[_ngcontent-%COMP%]{cursor:pointer}nb-list-item[_ngcontent-%COMP%]{background-color:var(--color-primary-500);margin-bottom:.5rem}nb-list-item.active[_ngcontent-%COMP%]{background-color:var(--color-primary-800)}"]}),b=(0,Z.gn)([(0,v.c)()],b);let J=(()=>{class r{constructor(n){this.dialogService=n}onOpenImportModal(){this.dialogService.open(F.d)}onOpenManualImportModal(){this.dialogService.open(b)}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(c.Gln))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-start-setting-up-plans"]],viewQuery:function(n,o){if(1&n&&e.Gf(F.d,5),2&n){let i;e.iGM(i=e.CRH())&&(o.importCsvDialogComponent=i.first)}},decls:8,vars:0,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"fw-bold"],[1,"buttons"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Start setting up the plan"),e.qZA(),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return o.onOpenImportModal()}),e._uU(5,"Import CSV"),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(){return o.onOpenManualImportModal()}),e._uU(7,"Manual"),e.qZA()()())},directives:[c.DPz],styles:[".d-flex[_ngcontent-%COMP%]{flex-direction:column;min-height:50vh}.buttons[_ngcontent-%COMP%]{display:flex;margin-top:48px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 17px}"]}),r})();var U=g(4362);function I(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"nb-option",32),e.NdJ("selectionChange",function(i){e.CHM(n);const a=e.oxw().index,l=e.oxw(2).$implicit;return e.oxw(2).onSelectedWorkstationChange(i,a,l,"occupation")}),e._uU(1),e.qZA()}if(2&r){const n=t.$implicit;e.Q6J("id",null==n||null==n.value?null:n.value.reference)("value",""===(null==n?null:n.reference)||null==n?null:n.reference),e.xp6(1),e.hij("",null==n?null:n.name," ")}}function Q(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function G(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function E(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function R(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function V(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"tr",1)(1,"td")(2,"nb-select",19),e.YNc(3,I,2,3,"nb-option",20),e.qZA(),e.YNc(4,Q,2,0,"span",21),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"input",22),e.YNc(9,G,2,0,"span",21),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"input",23)(12,"nb-timepicker",24,25),e.YNc(14,E,2,0,"span",21),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"input",26)(17,"nb-timepicker",24,27),e.YNc(19,R,2,0,"span",21),e.qZA(),e.TgZ(20,"td")(21,"nb-select",28)(22,"nb-option",29),e._uU(23,"Morning"),e.qZA(),e.TgZ(24,"nb-option",30),e._uU(25,"Evening"),e.qZA()()(),e.TgZ(26,"td")(27,"div",31)(28,"nb-icon",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2).$implicit;return e.oxw(2).onAddOccupation(i)}),e.qZA(),e.TgZ(29,"nb-icon",11),e.NdJ("click",function(){const a=e.CHM(n).index,l=e.oxw(2).$implicit;return e.oxw(2).onRemoveOccupation(l,a)}),e.qZA()()()()}if(2&r){const n=t.$implicit,o=e.MAs(13),i=e.MAs(18),a=e.oxw(2).$implicit,l=e.oxw(2);let u,s,p,d;e.Q6J("formGroup",l.castToFormGroup(n)),e.xp6(2),e.Q6J("appEditable",!(null!=n&&null!=n.value&&n.value.name)),e.xp6(1),e.Q6J("ngForOf",l.getWorkstationsList(a)),e.xp6(1),e.Q6J("ngIf",(null==(u=n.get("reference"))?null:u.touched)&&(null==(u=n.get("reference"))?null:u.getError("required"))),e.xp6(2),e.Oqu(n.value.activity.displayValue),e.xp6(3),e.Q6J("ngIf",(null==(s=n.get("occupation"))?null:s.touched)&&(null==(s=n.get("occupation"))?null:s.getError("required"))),e.xp6(2),e.Q6J("nbTimepicker",o),e.xp6(1),e.Q6J("step",15),e.xp6(2),e.Q6J("ngIf",(null==(p=n.get("startTime"))?null:p.touched)&&(null==(p=n.get("startTime"))?null:p.getError("required"))),e.xp6(2),e.Q6J("nbTimepicker",i),e.xp6(1),e.Q6J("step",15),e.xp6(2),e.Q6J("ngIf",(null==(d=n.get("endTime"))?null:d.touched)&&(null==(d=n.get("endTime"))?null:d.getError("required")))}}function Y(r,t){if(1&r&&(e.ynx(0),e.YNc(1,V,30,12,"tr",18),e.BQk()),2&r){const n=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.getArrayFromGroup(n,"occupation").controls)}}function j(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",31)(3,"nb-icon",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw(2).onAddOccupation(i)}),e.qZA()()()()}}function $(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"nb-option",32),e.NdJ("selectionChange",function(i){e.CHM(n);const a=e.oxw().index,l=e.oxw(2).$implicit;return e.oxw(2).onSelectedWorkstationChange(i,a,l,"ratio")}),e._uU(1),e.qZA()}if(2&r){const n=t.$implicit;e.Q6J("id",null==n||null==n.value?null:n.value.reference)("value",""===(null==n?null:n.reference)||null==n?null:n.reference),e.xp6(1),e.hij("",null==n?null:n.name," ")}}function H(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function z(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function B(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function L(r,t){1&r&&(e.TgZ(0,"span",33),e._uU(1," This field is required "),e.qZA())}function X(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"tr",1)(1,"td")(2,"nb-select",19),e.YNc(3,$,2,3,"nb-option",20),e.qZA(),e.YNc(4,H,2,0,"span",21),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"input",34),e.YNc(9,z,2,0,"span",21),e.qZA(),e.TgZ(10,"td"),e._UZ(11,"input",23)(12,"nb-timepicker",24,25),e.YNc(14,B,2,0,"span",21),e.qZA(),e.TgZ(15,"td"),e._UZ(16,"input",26)(17,"nb-timepicker",24,27),e.YNc(19,L,2,0,"span",21),e.qZA(),e.TgZ(20,"td")(21,"div",31)(22,"nb-icon",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2).$implicit;return e.oxw(2).onAddRatio(i)}),e.qZA(),e.TgZ(23,"nb-icon",11),e.NdJ("click",function(){const a=e.CHM(n).index,l=e.oxw(2).$implicit;return e.oxw(2).onRemoveRatio(l,a)}),e.qZA()()()()}if(2&r){const n=t.$implicit,o=e.MAs(13),i=e.MAs(18),a=e.oxw(2).$implicit,l=e.oxw(2);let u,s,p,d;e.Q6J("formGroup",l.castToFormGroup(n)),e.xp6(2),e.Q6J("appEditable",!(null!=n&&null!=n.value&&n.value.name)),e.xp6(1),e.Q6J("ngForOf",l.getWorkstationsList(a)),e.xp6(1),e.Q6J("ngIf",(null==(u=n.get("reference"))?null:u.touched)&&(null==(u=n.get("reference"))?null:u.getError("required"))),e.xp6(2),e.Oqu(n.value.activity.displayValue),e.xp6(3),e.Q6J("ngIf",(null==(s=n.get("ratio"))?null:s.touched)&&(null==(s=n.get("ratio"))?null:s.getError("required"))),e.xp6(2),e.Q6J("nbTimepicker",o),e.xp6(1),e.Q6J("step",15),e.xp6(2),e.Q6J("ngIf",(null==(p=n.get("startTime"))?null:p.touched)&&(null==(p=n.get("startTime"))?null:p.getError("required"))),e.xp6(2),e.Q6J("nbTimepicker",i),e.xp6(1),e.Q6J("step",15),e.xp6(2),e.Q6J("ngIf",(null==(d=n.get("endTime"))?null:d.touched)&&(null==(d=n.get("endTime"))?null:d.getError("required")))}}function K(r,t){if(1&r&&(e.ynx(0),e.YNc(1,X,24,12,"tr",18),e.BQk()),2&r){const n=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.getArrayFromGroup(n,"ratio").controls)}}function ee(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",31)(3,"nb-icon",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw(2).onAddOccupation(i)}),e.qZA()()()()}}function te(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"nb-accordion-item",4)(1,"nb-accordion-item-header")(2,"div",5)(3,"div",6)(4,"div")(5,"span",7),e._uU(6,"Workcenter"),e.qZA(),e.TgZ(7,"span",8),e._uU(8),e.qZA()()()()(),e.TgZ(9,"nb-accordion-item-body")(10,"div",9)(11,"nb-icon",10),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).onOpenWorkcenterAddDialog("add","")}),e.qZA(),e.TgZ(12,"nb-icon",11),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw(2).onOpenWorkcenterAddDialog("remove",a.value.uuid)}),e.qZA()(),e.TgZ(13,"div",12)(14,"table",13)(15,"thead")(16,"tr")(17,"th"),e._uU(18,"Workstation"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Activity"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Occupation"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Start"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"End"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Shift"),e.qZA(),e.TgZ(29,"th"),e._UZ(30,"br"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,Y,2,1,"ng-container",14),e.YNc(33,j,4,0,"ng-template",null,15,e.W1O),e.qZA()(),e.TgZ(35,"table",16)(36,"thead")(37,"tr")(38,"th"),e._uU(39,"Workstation"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Activity"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Ratio"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Start"),e.qZA(),e.TgZ(46,"th"),e._uU(47,"End"),e.qZA(),e.TgZ(48,"th"),e._UZ(49,"br"),e.qZA()()(),e.TgZ(50,"tbody"),e.YNc(51,K,2,1,"ng-container",14),e.YNc(52,ee,4,0,"ng-template",null,17,e.W1O),e.qZA()()()()()}if(2&r){const n=t.$implicit,o=e.MAs(34),i=e.MAs(53),a=e.oxw(2);e.Q6J("formGroup",a.castToFormGroup(n)),e.xp6(8),e.Oqu(n.value.name),e.xp6(24),e.Q6J("ngIf",a.getArrayFromGroup(n,"occupation").controls.length>0)("ngIfElse",o),e.xp6(19),e.Q6J("ngIf",a.getArrayFromGroup(n,"ratio").controls.length>0)("ngIfElse",i)}}function ne(r,t){if(1&r&&(e.ynx(0,1),e.TgZ(1,"nb-accordion",2),e.YNc(2,te,54,6,"nb-accordion-item",3),e.qZA(),e.BQk()),2&r){const n=e.oxw();e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngForOf",n.workcentersControl.controls)}}let T=class{constructor(t,n){this.fb=t,this.cdr=n,this.editable=!0,this.workcentersFilter=[],this.workstationsFilter=[],this._workcenters=[],this.searchText="",this.openWorkcenterAddDialog=new e.vpe,this.formValuesChange=new e.vpe,this.isFormValid=new e.vpe}set workcenters(t){!(null==t?void 0:t.length)||t===this._workcenters||(this._workcenters=t,this.createworkCentersForm(),this.watchFormChanges())}get workcenters(){return this._workcenters}ngOnChanges(t){var n,o,i,a;this.workcentersFilter=null===(o=null===(n=null==t?void 0:t.selectedFilters)||void 0===n?void 0:n.currentValue)||void 0===o?void 0:o.workcenters,this.workstationsFilter=null===(a=null===(i=null==t?void 0:t.selectedFilters)||void 0===i?void 0:i.currentValue)||void 0===a?void 0:a.workstations}watchFormChanges(){this.form.valueChanges.pipe((0,v.t)(this)).subscribe(t=>{this.formValuesChange.emit(t),this.isFormValid.emit(this.form.valid)})}onOpenWorkcenterAddDialog(t,n){this.openWorkcenterAddDialog.emit({action:t,uuid:n})}onSelectedWorkstationChange(t,n,o,i){var a;if(!o.value)return;const l=null===(a=null==o?void 0:o.value)||void 0===a?void 0:a.uuid,s=[...this.workcenters.find(d=>d.uuid===l).workstations],p=s.find(d=>d.reference===t.value);s[n]=p,o.patchValue({[i]:s})}get workcentersControl(){var t;return null===(t=this.form)||void 0===t?void 0:t.get("workcentersPlan")}addWorkcenter(){this.workcentersControl.push(this.createWorkCenterGroup())}removeWorkcenter(t){this.workcentersControl.removeAt(t)}getWorkstations(t){return this.workcentersControl.at(t).get("workstations")}addWorkstation(t){this.getWorkstations(t).push(this.createOccupationGroup())}removeWorkstation(t){this.getWorkstations(t).removeAt(t)}onAddOccupation(t){this.getArrayFromGroup(t,"occupation").push(this.createOccupationGroup())}onAddRatio(t){this.getArrayFromGroup(t,"ratio").push(this.createRatioGroup())}onRemoveOccupation(t,n){this.getArrayFromGroup(t,"occupation").removeAt(n)}onRemoveRatio(t,n){this.getArrayFromGroup(t,"ratio").removeAt(n)}getWorkstationsList(t){var n;const o=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.uuid;return this.workcenters.find(a=>a.uuid===o).workstations}checkIfHasWorkstations(t){var n;return(null===(n=this.workcenters.find(t.value.uuid).workstations)||void 0===n?void 0:n.length)>0}getFilteredArrayGroup(t,n,o){return this.getArrayFromGroup(t,n).controls.filter(l=>""!==l.value.name).filter((l,u,s)=>s.findIndex(p=>p.value.reference===l.value.reference)===u)}createworkCentersForm(){this.form=this.fb.group({workcentersPlan:this.fb.array([...this.workcenters].map(t=>{var n,o;return this.createWorkCenterGroup(null!==(n=t.name)&&void 0!==n?n:t.displayValue,null!==(o=t.uuid)&&void 0!==o?o:t.reference,t.workstations,t.occupation,t.ratio)}))})}createWorkCenterGroup(t="",n="",o=[],i,a){return this.fb.group(i&&a?{name:t,occupation:this.fb.array(i.map(l=>this.createOccupationGroup(l))),ratio:this.fb.array(a.map(l=>this.createRatioGroup(l))),uuid:n,reference:n}:{name:t,occupation:this.fb.array(o.map(l=>this.createOccupationGroup(l))),ratio:this.fb.array(o.map(l=>this.createRatioGroup(l))),uuid:n,reference:n})}createOccupationGroup(t){var n,o,i,a,l,u,s,p,d,m,h;return this.fb.group({name:[null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"",_.kI.required],activity:null!==(i=null===(o=null==t?void 0:t.activity)||void 0===o?void 0:o.displayValue)&&void 0!==i?i:"",occupation:[null!==(a=null==t?void 0:t.occupation)&&void 0!==a?a:"",_.kI.required],startTime:[null!==(l=this.transformDate(null==t?void 0:t.startTime))&&void 0!==l?l:this.transformDate("0600"),_.kI.required],endTime:[null!==(u=this.transformDate(null==t?void 0:t.endTime))&&void 0!==u?u:this.transformDate("1400"),_.kI.required],reference:[null!==(s=null==t?void 0:t.reference)&&void 0!==s?s:"",_.kI.required],displayValue:null!==(p=null==t?void 0:t.displayValue)&&void 0!==p?p:"",uuid:null!==(d=null==t?void 0:t.uuid)&&void 0!==d?d:"",code:null!==(m=null==t?void 0:t.code)&&void 0!==m?m:"",occupationRef:null!==(h=null==t?void 0:t.occupationRef)&&void 0!==h?h:""})}createRatioGroup(t){var n,o,i,a,l,u,s,p,d,m,h,k;return this.fb.group({name:[null!==(n=null==t?void 0:t.name)&&void 0!==n?n:"",_.kI.required],activity:null!==(i=null===(o=null==t?void 0:t.activity)||void 0===o?void 0:o.displayValue)&&void 0!==i?i:"",ratio:[null!==(a=null==t?void 0:t.ratio)&&void 0!==a?a:"",_.kI.required],unitOfRatio:null!==(l=null==t?void 0:t.unitOfRatio)&&void 0!==l?l:"none",startTime:[null!==(u=this.transformDate(null==t?void 0:t.startTime))&&void 0!==u?u:this.transformDate("0600"),_.kI.required],endTime:[null!==(s=this.transformDate(null==t?void 0:t.endTime))&&void 0!==s?s:this.transformDate("1400"),_.kI.required],reference:[null!==(p=null==t?void 0:t.reference)&&void 0!==p?p:"",_.kI.required],displayValue:null!==(d=null==t?void 0:t.displayValue)&&void 0!==d?d:"",uuid:null!==(m=null==t?void 0:t.uuid)&&void 0!==m?m:"",code:null!==(h=null==t?void 0:t.code)&&void 0!==h?h:"",ratioRef:null!==(k=null==t?void 0:t.ratioRef)&&void 0!==k?k:""})}transformDate(t){if(!t||(null==t?void 0:t.toString().length)>4)return null;let n=t.toString();3===n.length&&(n="0"+n),2===n.length&&(n="00"+n);const o=n.substring(0,2)+":"+n.substring(2,n.length),i=new Date("2011-04-20 "+o);return"Invalid Date"!==new Date(i).toString()?i:""}castToFormGroup(t){return t}castToFormArray(t){return t}getArrayFromGroup(t,n,o){return t.get(n)}};function oe(r,t){if(1&r&&(e.TgZ(0,"nb-option",16),e._uU(1),e.qZA()),2&r){const n=t.$implicit;e.s9C("value",n.uuid),e.xp6(1),e.Oqu(n.name)}}function ie(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"label",12),e._uU(3,"Workcenter"),e.qZA()(),e.TgZ(4,"div",13)(5,"nb-select",14),e.NdJ("selectedChange",function(i){return e.CHM(n),e.oxw(2).onSelectWorkcenter(i)}),e.YNc(6,oe,2,2,"nb-option",15),e.qZA()()()}if(2&r){const n=e.oxw(2);e.xp6(6),e.Q6J("ngForOf",n.workcenters)}}function re(r,t){1&r&&(e.TgZ(0,"div",10)(1,"div",7)(2,"p"),e._uU(3,"You have added all workcenters to the plan already."),e.qZA()()())}function ae(r,t){if(1&r&&(e.TgZ(0,"div",6)(1,"div",7),e.YNc(2,ie,7,1,"div",8),e.YNc(3,re,4,0,"ng-template",null,9,e.W1O),e.qZA()()),2&r){const n=e.MAs(4),o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.workcenters.length>0)("ngIfElse",n)}}function le(r,t){1&r&&(e.TgZ(0,"div",6)(1,"div",7)(2,"p"),e._uU(3,"Are you sure you want to remove this workcenter?"),e.qZA()()())}function ce(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return"add"===i.action?i.onSave():i.onRemove()}),e._uU(1),e.qZA()}if(2&r){const n=e.oxw();e.xp6(1),e.hij(" ","add"===n.action?"Save":"Confirm"," ")}}T.\u0275fac=function(t){return new(t||T)(e.Y36(_.qu),e.Y36(e.sBO))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-plan-table"]],inputs:{workcenters:"workcenters",selectedFilters:"selectedFilters",searchText:"searchText"},outputs:{openWorkcenterAddDialog:"openWorkcenterAddDialog",formValuesChange:"formValuesChange",isFormValid:"isFormValid"},features:[e.TTD],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["multi","","formArrayName","workcentersPlan"],["expanded","true",3,"formGroup",4,"ngFor","ngForOf"],["expanded","true",3,"formGroup"],[1,"accordion-header"],[1,"d-flex","justify-content-between"],[1,"accordion-title"],[1,"accordion-subtitle"],[1,"buttons-wrapper","workcenter-buttons","mb-3"],["type","button","icon","add_circle",1,"mr-1",3,"click"],["type","button","icon","cancel",1,"mr-1",3,"click"],[1,"tables-wrapper"],["formArrayName","occupation"],[4,"ngIf","ngIfElse"],["addButton",""],["formArrayName","ratio"],["addRatioButton",""],[3,"formGroup",4,"ngFor","ngForOf"],["status","primary","placeholder","Name","formControlName","reference",1,"select",3,"appEditable"],[3,"id","value","selectionChange",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["nbInput","","type","number","fullWidth","","status","primary","placeholder","occupation","formControlName","occupation"],["nbInput","","status","primary","primary","","fullWidth","","formControlName","startTime",3,"nbTimepicker"],["singleColumn","","format","h:mm:ss a",3,"step"],["timeFrom",""],["nbInput","","status","primary","primary","","fullWidth","","formControlName","endTime",3,"nbTimepicker"],["timeTo",""],["status","primary","placeholder","Time",1,"select"],["value","morning"],["value","evening"],[1,"buttons-wrapper"],[3,"id","value","selectionChange"],[1,"text-danger"],["type","number","nbInput","","fullWidth","","status","primary","placeholder","Ratio","formControlName","ratio"]],template:function(t,n){1&t&&e.YNc(0,ne,3,2,"ng-container",0),2&t&&e.Q6J("ngIf",n.form)},directives:[f.O5,_.JL,_.sg,c.qCO,_.CE,f.sg,c.SaG,c.YZd,c.AvE,c.fMN,c.rs,_.JJ,_.u,U.m,c.q51,c.h8i,_.wV,_.Fj,c.etF,c.emG],styles:[".workcenter-buttons[_ngcontent-%COMP%]{position:absolute;right:0;top:0}"]}),T=(0,Z.gn)([(0,v.c)()],T);let se=(()=>{class r{constructor(n){this.dialog=n,this.newWorkcenterUuid="",this.workcenters=[],this.action="",this.workcenterToRemoveUuid="",this.addWorkcenter=new e.vpe,this.removeWorkcenter=new e.vpe}onCloseDialog(){this.dialog.close()}onSelectWorkcenter(n){this.newWorkcenterUuid=n}onSave(){this.addWorkcenter.emit(this.newWorkcenterUuid)}onRemove(){this.removeWorkcenter.emit(!0)}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(c.X4l))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-add-workcenter-dialog"]],outputs:{addWorkcenter:"addWorkcenter",removeWorkcenter:"removeWorkcenter"},decls:14,vars:6,consts:[["icon","close",1,"close-dialog",3,"click"],["class","row mb-1",4,"ngIf","ngIfElse"],["confirmText",""],[1,"buttons","d-flex","justify-content-center","mt-5"],["nbButton","","outline","","size","medium","type","button",1,"mr-3",3,"click"],["nbButton","","status","primary","size","medium",3,"click",4,"ngIf"],[1,"row","mb-1"],[1,"col-12"],["class","row",4,"ngIf","ngIfElse"],["noWorkcentersInfo",""],[1,"row"],[1,"col-sm-3","d-flex","align-items-center"],["for","workcenter"],[1,"col-sm-9"],["fullWidth","","status","primary","placeholder","Select workcenter...",1,"select",3,"selectedChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(n,o){if(1&n&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h2"),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"nb-icon",0),e.NdJ("click",function(){return o.onCloseDialog()}),e.qZA()(),e.TgZ(6,"nb-card-body"),e.YNc(7,ae,5,2,"div",1),e.YNc(8,le,4,0,"ng-template",null,2,e.W1O),e.TgZ(10,"div",3)(11,"button",4),e.NdJ("click",function(){return o.onCloseDialog()}),e._uU(12,"Cancel"),e.qZA(),e.YNc(13,ce,2,1,"button",5),e.qZA()()()),2&n){const i=e.MAs(9);e.xp6(3),e.hij("",e.lcZ(4,4,o.action)," workcenter"),e.xp6(4),e.Q6J("ngIf","add"===o.action)("ngIfElse",i),e.xp6(6),e.Q6J("ngIf",0!==o.workcenters.length||"remove"===o.action)}},directives:[c.Asz,c.ndF,c.fMN,c.yKW,f.O5,c.rs,f.sg,c.q51,c.DPz],pipes:[f.rS],styles:["nb-card[_ngcontent-%COMP%]{min-width:500px}"]}),r})(),ue=(()=>{class r{constructor(n){this.dialog=n,this.name="",this.setScheduleName=new e.vpe}onCloseDialog(){this.dialog.close()}onSave(){this.setScheduleName.emit(this.name)}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(c.X4l))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-save-dialog"]],outputs:{setScheduleName:"setScheduleName"},decls:17,vars:1,consts:[["icon","close",1,"close-dialog",3,"click"],[1,"row","mb-1"],[1,"col-sm-3","d-flex","align-items-center"],["for","name"],[1,"col-sm-9"],["nbInput","","status","primary","fullWidth","","id","name","placeholder","Enter name",3,"ngModel","ngModelChange"],[1,"buttons","d-flex","justify-content-center","mt-5"],["nbButton","","outline","","size","medium","type","button",1,"mr-3",3,"click"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h2"),e._uU(3,"Save schedule"),e.qZA(),e.TgZ(4,"nb-icon",0),e.NdJ("click",function(){return o.onCloseDialog()}),e.qZA()(),e.TgZ(5,"nb-card-body")(6,"div",1)(7,"div",2)(8,"label",3),e._uU(9,"Name"),e.qZA()(),e.TgZ(10,"div",4)(11,"input",5),e.NdJ("ngModelChange",function(a){return o.name=a}),e.qZA()()(),e.TgZ(12,"div",6)(13,"button",7),e.NdJ("click",function(){return o.onCloseDialog()}),e._uU(14,"Cancel"),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return o.onSave()}),e._uU(16,"Save"),e.qZA()()()()),2&n&&(e.xp6(11),e.Q6J("ngModel",o.name))},directives:[c.Asz,c.ndF,c.fMN,c.yKW,c.h8i,_.Fj,_.JJ,_.On,c.DPz],styles:["nb-card[_ngcontent-%COMP%]{min-width:500px}"]}),r})();var D=g(567),x=g(2192);function pe(r,t){if(1&r&&(e.TgZ(0,"nb-option",10),e._uU(1),e.qZA()),2&r){const n=t.$implicit;e.Q6J("value",n.name),e.xp6(1),e.Oqu(n.name)}}function de(r,t){if(1&r&&(e.TgZ(0,"nb-option",10),e._uU(1),e.qZA()),2&r){const n=t.$implicit;e.Q6J("value",n.name),e.xp6(1),e.Oqu(n.name)}}let _e=(()=>{class r{constructor(){this.selectedWorkcenters=[],this.selectedFilters={},this.workcenters=[],this.workstations=[],this.selectFilters=new e.vpe,this.allOptionValue="#all"}onSelectFilterChange(n,o,i,a,l){this.selectedFilters[a]=n,this.selectFilters.emit(this.selectedFilters)}getAllFiltersNames(n){return n.map(o=>o.name)}onSelectAll(n,o,i,a,l){o.options.forEach(u=>n?u.select():u.deselect())}updateAllOptionState(n){const o=n.options.toArray().filter(a=>a.value!==this.allOptionValue).every(a=>a.selected),i=n.options.find(a=>a.value===this.allOptionValue);o?null==i||i.select():null==i||i.deselect()}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-plan-filters"]],inputs:{workcenters:"workcenters",workstations:"workstations"},outputs:{selectFilters:"selectFilters"},decls:15,vars:2,consts:[[1,"filters"],[1,"filter"],["status","control","placeholder","Time",1,"select"],["value","morning"],["value","evening"],["multiple","","status","control","placeholder","Workcenter",1,"select",3,"selectedChange"],["workcenterSelect",""],[3,"value",4,"ngFor","ngForOf"],["multiple","","status","control","placeholder","Workstation",1,"select",3,"selectedChange"],["workstationSelect",""],[3,"value"]],template:function(n,o){if(1&n){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"nb-select",2)(3,"nb-option",3),e._uU(4,"Morning"),e.qZA(),e.TgZ(5,"nb-option",4),e._uU(6,"Evening"),e.qZA()()(),e.TgZ(7,"div",1)(8,"nb-select",5,6),e.NdJ("selectedChange",function(l){e.CHM(i);const u=e.MAs(9);return o.onSelectFilterChange(l,u,o.workcenters,"workcenters",!1)}),e.YNc(10,pe,2,2,"nb-option",7),e.qZA()(),e.TgZ(11,"div",1)(12,"nb-select",8,9),e.NdJ("selectedChange",function(l){e.CHM(i);const u=e.MAs(13);return o.onSelectFilterChange(l,u,o.workstations,"workstations",!1)}),e.YNc(14,de,2,2,"nb-option",7),e.qZA()()()}2&n&&(e.xp6(10),e.Q6J("ngForOf",o.workcenters),e.xp6(4),e.Q6J("ngForOf",o.workstations))},directives:[c.rs,c.q51,f.sg],styles:[""]}),r})(),me=(()=>{class r{constructor(){this.changeSearchText=new e.vpe}onChangeSearchText(n){this.changeSearchText.emit(n.target.value)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-search-input"]],outputs:{changeSearchText:"changeSearchText"},decls:3,vars:0,consts:[[1,"search-input-wrapper"],["status","primary","fullWidth","","nbInput","","placeholder","Search by: Workstation, Activity, Ratio",3,"input"],["icon","search",1,"search-input-icon"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("input",function(a){return o.onChangeSearchText(a)}),e.qZA(),e._UZ(2,"nb-icon",2),e.qZA())},directives:[c.h8i,c.fMN],styles:[".search-input-wrapper[_ngcontent-%COMP%]{position:relative}.search-input-wrapper[_ngcontent-%COMP%]   .search-input-icon[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:15px}"]}),r})();function ge(r,t){if(1&r){const n=e.EpF();e.TgZ(0,"app-plan-table",18),e.NdJ("openWorkcenterAddDialog",function(i){return e.CHM(n),e.oxw().onOpenWorkcenterAddDialog(i)})("formValuesChange",function(i){return e.CHM(n),e.oxw().onFormChanges(i)})("isFormValid",function(i){return e.CHM(n),e.oxw().setIsFormValid(i)}),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("workcenters",n.filteredData)("searchText",n.searchText)("selectedFilters",n.selectedFilters)}}let C=class{constructor(t,n,o,i,a,l,u){var s,p,d,m;this.workCenterApi=t,this.workStationApi=n,this.activityApi=o,this.siteOccupationApi=i,this.dialogService=a,this.cdr=l,this.router=u,this.editable=!1,this.searchText="",this.workCenters=[],this.workStations=[],this.workcentersPlans=[],this.activities=[],this.dataTree=[],this.plan=[],this.planName="",this.workcentersToAdd=[],this.filteredData=[],this.isFormValid=!1,this.planDate="",this.planOption="",this.isTemplate=!0;const h=null===(m=null===(d=null===(p=null===(s=this.router)||void 0===s?void 0:s.getCurrentNavigation())||void 0===p?void 0:p.extras)||void 0===d?void 0:d.state)||void 0===m?void 0:m.planOption;this.planOption=h||"manual"}ngOnInit(){"manual"===this.planOption?this.fetchManualData():this.fetchPlanData()}pad(t){return t<10?"0"+t:t}fetchPlanData(){(0,D.D)(this.workCenterApi.dataWorkCenterListGet(),this.workStationApi.dataWorkstationListGet(),this.activityApi.dataActivityListGet(),this.siteOccupationApi.dataSiteOccupationSiteOccupationPlanReferenceGet(this.planOption)).pipe((0,v.t)(this)).subscribe({next:([t,n,o,i])=>{var a,l,u;this.workCenters=t,this.workStations=n,this.activities=o,this.editedPlanData=i.content,this.planName=null===(a=i.content)||void 0===a?void 0:a.planName,this.workcentersPlans=null!==(u=null===(l=i.content)||void 0===l?void 0:l.workCenterPlans)&&void 0!==u?u:[],this.buildEditedPlanDataTree()}})}fetchManualData(){(0,D.D)(this.workCenterApi.dataWorkCenterListGet(),this.workStationApi.dataWorkstationListGet(),this.activityApi.dataActivityListGet()).pipe((0,v.t)(this)).subscribe({next:([t,n,o])=>{this.workCenters=t,this.workStations=n,this.activities=o,this.buildDataTree()}})}setIsFormValid(t){this.isFormValid=t}onFormChanges(t){this.plan=t.workcentersPlan}onChangeDate(t){const n=this.formatDate(t);this.planOption=n,this.isTemplate=!1,this.fetchPlanData()}buildEditedPlanDataTree(){this.dataTree=[...this.workcentersPlans].map(t=>{var n,o,i;let a="";t.name=t.displayValue,null===(n=t.occupation)||void 0===n||n.forEach((s,p)=>{a||(a=s.workcenterUuid);const d=s.workstationUuid;s.occupationRef=s.reference,s.reference=d;const m=this.workStations.find(h=>h.uuid===d);t.occupation[p]=Object.assign(Object.assign({},t.occupation[p]),m)}),null===(o=t.ratio)||void 0===o||o.forEach((s,p)=>{a||(a=s.workcenterUuid);const d=s.workstationUuid;s.ratioRef=s.reference,s.name=s.displayValue,s.reference=d;const m=this.workStations.find(h=>h.uuid===d);t.ratio[p]=Object.assign(Object.assign({},t.ratio[p]),m)});const l=a;t.uuid=l;const u=this.workCenters.find(s=>s.uuid===l);return t.workstations=null==u?void 0:u.workstations,null===(i=t.workstations)||void 0===i||i.forEach((s,p)=>{const d=s.reference;s.name=s.displayValue;const m=this.workStations.find(h=>h.uuid===d);t.workstations[p]=Object.assign(Object.assign({},t.workstations[p]),m)}),t}),this.filteredData=[...this.dataTree],this.cdr.markForCheck()}buildDataTree(){this.dataTree=[...this.workCenters].map(t=>{var n;return null===(n=t.workstations)||void 0===n||n.forEach((o,i)=>{const a=o.reference,l=this.workStations.find(u=>u.uuid===a);t.workstations[i]=Object.assign(Object.assign({},t.workstations[i]),l)}),t}),this.filteredData=[...this.dataTree],this.cdr.markForCheck()}selectFiltersHandler(t){if(this.selectedFilters=t,!this.selectedFilters)return;const{workcenters:n,workstations:o}=this.selectedFilters;let i=[...this.dataTree];return(null==n?void 0:n.length)&&(i=i.filter(a=>n.includes(a.name))),(null==o?void 0:o.length)&&(i=i.map(a=>Object.assign(Object.assign({},a),{workstations:a.workstations.filter(l=>o.includes(l.name)),occupation:a.workstations.filter(l=>o.includes(l.name)),ratio:a.workstations.filter(l=>o.includes(l.name))})).filter(a=>a.workstations.length)),this.filteredData=i,i}searchTextHandler(t,n){var o,i,a,l;this.searchText=t.toLowerCase();let u=(null===(i=null===(o=this.selectedFilters)||void 0===o?void 0:o.workcenters)||void 0===i?void 0:i.length)||(null===(l=null===(a=this.selectedFilters)||void 0===a?void 0:a.workstations)||void 0===l?void 0:l.length)?this.selectFiltersHandler(this.selectedFilters):[...this.dataTree];(null==t?void 0:t.length)&&(u=u.map(s=>Object.assign(Object.assign({},s),{workstations:s.workstations.filter(p=>{var d,m,h,k;return(null===(d=p.name.toLowerCase())||void 0===d?void 0:d.includes(t.toLowerCase()))||(null===(m=p.ratio)||void 0===m?void 0:m.includes(t))||(null===(k=null===(h=p.activity)||void 0===h?void 0:h.displayValue.toLowerCase())||void 0===k?void 0:k.includes(t.toLowerCase()))})})).filter(s=>s.workstations.length)),this.filteredData=u}onOpenSaveScheduleDialog(){const t=this.dialogService.open(ue);t.componentRef.instance.setScheduleName.pipe((0,v.t)(this)).subscribe(n=>{t.close(),n&&(this.planName=n,this.isTemplate=!0,this.savePlan(!0))})}formatPlanData(t){return t.map(o=>(o.occupation.forEach(i=>{i.startTime=this.formatTime(i.startTime),i.endTime=this.formatTime(i.endTime),i.workstationUuid=i.uuid,i.reference=i.occupationRef}),o.ratio.forEach(i=>{i.startTime=this.formatTime(i.startTime),i.endTime=this.formatTime(i.endTime),i.workstationUuid=i.uuid,i.reference=i.ratioRef}),o))}formatTime(t){const n=new Date(t);return n?`${`0${n.getHours()}`.slice(-2)}${`0${n.getMinutes()}`.slice(-2)}`:""}formatDate(t){return`${t.getFullYear()}${this.pad(t.getMonth()+1)}${this.pad(t.getDate())}`}savePlan(t){const n=this.planDate?this.formatDate(this.planDate):null;!t&&n&&(this.isTemplate=!1);const o={planReference:this.isTemplate?this.planName:null!=n?n:this.planName,planName:this.planName,isTemplate:this.isTemplate,workCenterPlans:this.formatPlanData([...this.plan])};this.siteOccupationApi.dataSiteOccupationSavePlanPost(o).pipe((0,v.t)(this)).subscribe({next:i=>{console.log(i)}})}onOpenWorkcenterAddDialog(t){const n=this.dialogService.open(se);n.componentRef.instance.workcenters=this.workcentersToAdd,n.componentRef.instance.action=t.action,n.componentRef.instance.addWorkcenter.pipe((0,v.t)(this)).subscribe(o=>{if(n.close(),o){const i=this.workCenters.find(l=>l.uuid===o),a=[...this.dataTree,i];this.dataTree=a,this.filteredData=this.dataTree,this.cdr.markForCheck()}}),n.componentRef.instance.removeWorkcenter.pipe((0,v.t)(this)).subscribe(o=>{if(n.close(),"remove"===(null==t?void 0:t.action)&&(null==t?void 0:t.uuid)){const i=this.workCenters.find(l=>l.uuid===(null==t?void 0:t.uuid));this.workcentersToAdd=[...this.workcentersToAdd,i];const a=this.dataTree.filter(l=>l.uuid!==(null==t?void 0:t.uuid));this.dataTree=a,this.filteredData=this.dataTree,this.cdr.markForCheck()}})}};C.\u0275fac=function(t){return new(t||C)(e.Y36(x.Uv),e.Y36(x.F),e.Y36(x.B0),e.Y36(w.j),e.Y36(c.Gln),e.Y36(e.sBO),e.Y36(A.F0))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-plan-create"]],decls:22,vars:7,consts:[[1,"plan-header","mt-3"],[1,"row","mb-3"],[1,"col-12","col-sm-12","col-md-7"],[1,"mt-0"],[1,""],[1,"date-wrapper","mb-1"],["nbInput","","status","control","placeholder","Date",3,"nbDatepicker","ngModel","ngModelChange"],["format","yyyy/MM/dd",3,"dateChange"],["date",""],[3,"workcenters","workstations","selectFilters"],[1,"col-12","col-sm-12","col-md-5","d-flex","flex-column","justify-content-between"],[3,"changeSearchText"],[1,"buttons","mt-3","d-flex","justify-content-end"],["nbButton","","status","primary","size","medium",1,"icon-button",3,"disabled","click"],["icon","check_circle"],[1,"icon-button-text"],["nbButton","","status","primary","size","medium",1,"ml-1",3,"disabled","click"],[3,"workcenters","searchText","selectedFilters","openWorkcenterAddDialog","formValuesChange","isFormValid",4,"ngIf"],[3,"workcenters","searchText","selectedFilters","openWorkcenterAddDialog","formValuesChange","isFormValid"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"Plan"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"input",6),e.NdJ("ngModelChange",function(i){return n.planDate=i}),e.qZA(),e.TgZ(8,"nb-datepicker",7,8),e.NdJ("dateChange",function(i){return n.onChangeDate(i)}),e.qZA()(),e.TgZ(10,"div")(11,"app-plan-filters",9),e.NdJ("selectFilters",function(i){return n.selectFiltersHandler(i)}),e.qZA()()()(),e.TgZ(12,"div",10)(13,"app-search-input",11),e.NdJ("changeSearchText",function(i){return n.searchTextHandler(i)}),e.qZA(),e.TgZ(14,"div",12)(15,"button",13),e.NdJ("click",function(){return n.savePlan(!1)}),e._UZ(16,"nb-icon",14),e.TgZ(17,"span",15),e._uU(18," Save all"),e.qZA()(),e.TgZ(19,"button",16),e.NdJ("click",function(){return n.onOpenSaveScheduleDialog()}),e._uU(20," Save shedule "),e.qZA()()()(),e.YNc(21,ge,1,3,"app-plan-table",17),e.qZA()),2&t){const o=e.MAs(9);e.xp6(7),e.Q6J("nbDatepicker",o)("ngModel",n.planDate),e.xp6(4),e.Q6J("workcenters",n.workCenters)("workstations",n.workStations),e.xp6(4),e.Q6J("disabled",!n.isFormValid),e.xp6(4),e.Q6J("disabled",!n.isFormValid),e.xp6(2),e.Q6J("ngIf",n.dataTree)}},directives:[c.h8i,c.$kf,_.Fj,_.JJ,_.On,c.B4C,_e,me,c.DPz,c.fMN,f.O5,T],styles:[""]}),C=(0,Z.gn)([(0,v.c)()],C);const he=[{path:"",component:(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:2,vars:0,consts:[[1,"plan-list-wrapper"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-start-setting-up-plans"),e.qZA())},directives:[J],styles:[".nb-spinner-container[_ngcontent-%COMP%]{min-height:300px}"]}),r})()},{path:"manual",component:C}];let fe=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[A.Bz.forChild(he)],A.Bz]}),r})();var ve=g(8242),be=g(1428);let Te=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,fe,N,c.T2N,c.zyh,c.KdK,c.uuI,c.oGl,c.OA,c.kmq,c.nKr,c.IIj,O.r,y.i,S.n,_.UX,ve.i,be.k,_.u5,c.COg]]}),r})()}}]);