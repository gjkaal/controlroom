"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[56],{592:(M,u,r)=>{r.r(u),r.d(u,{SettingsPermissionsModule:()=>I});var m=r(9808),g=r(2268),t=r(5e3),p=r(1333),i=r(6781);function h(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._UZ(6,"nb-icon",5)(7,"nb-icon",6),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.AsE("",e.firstName," ",e.surname,""),t.xp6(2),t.Oqu(e.emailAddress)}}function f(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"Name"),t.qZA(),t.TgZ(6,"th",2),t._uU(7,"E-mail"),t.qZA(),t.TgZ(8,"th",2),t._UZ(9,"nb-icon",3),t.qZA()()(),t.TgZ(10,"tbody"),t.YNc(11,h,8,3,"tr",4),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(11),t.Q6J("ngForOf",e.items)}}function _(n,o){1&n&&t._uU(0,"Loading data...")}function Z(n,o){1&n&&t.YNc(0,_,1,0,"ng-template")}let C=(()=>{class n{constructor(e,s){this.api=e,this.cdr=s,this.message="",this.items=[],this.loading=!1}dataAvailable(){return!!(this.items&&this.items.length>0)||(this.loading=!0,this.api.dataUserListGet().subscribe({next:e=>{e?this.items=e:this.message="no users",this.loading=!1,this.cdr.detectChanges()},error:e=>{this.loading=!1,this.message=e,this.cdr.detectChanges()}}),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.Wj),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:5,vars:2,consts:[[4,"ngIf"],[1,"table"],["scope","col"],["title","Edit","icon","add_circle"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit"],["title","Delete","icon","close"]],template:function(e,s){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Users"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,f,12,1,"ng-container",0),t.YNc(4,Z,1,0,null,0)),2&e&&(t.xp6(3),t.Q6J("ngIf",s.dataAvailable()),t.xp6(1),t.Q6J("ngIf",s.loading))},directives:[m.O5,i.fMN,m.sg],styles:[""],changeDetection:0}),n})();var A=r(9004),c=r(3075),b=r(8929),x=r(7625),T=r(6199);const U=["edit_dialog"];function v(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"nb-icon",6)(5,"nb-icon",7),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.displayValue)}}function y(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),t._uU(5,"Role name"),t.qZA(),t.TgZ(6,"th",3)(7,"nb-icon",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().addNew()}),t.qZA()()()(),t.TgZ(8,"tbody"),t.YNc(9,v,6,1,"tr",5),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.items)}}function N(n,o){1&n&&t._uU(0,"Loading data...")}function R(n,o){1&n&&t.YNc(0,N,1,0,"ng-template")}function F(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"h1"),t._uU(3),t.qZA()(),t.TgZ(4,"nb-card-body")(5,"form",8)(6,"div",9)(7,"label",10),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"div",11),t._UZ(10,"input",12),t.qZA()(),t.TgZ(11,"div",13)(12,"label",14),t._uU(13,"Short name"),t.qZA(),t.TgZ(14,"div",15),t._UZ(15,"input",16),t.qZA()()()(),t.TgZ(16,"nb-card-footer")(17,"div",17)(18,"button",18),t.NdJ("click",function(){const l=t.CHM(e).dialogRef,d=t.oxw();return l.close(d.addNewComplete(!1))}),t._uU(19," Cancel "),t.qZA(),t.TgZ(20,"button",19),t.NdJ("click",function(){const l=t.CHM(e).dialogRef,d=t.oxw();return l.close(d.addNewComplete(!0))}),t._uU(21," Save changes "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.editLabel),t.xp6(2),t.Q6J("formGroup",e.addNewForm)}}let S=(()=>{class n{constructor(e,s,a,l){this.api=e,this.cdr=s,this.dialogService=a,this.toast=l,this.destroy$=new b.xQ,this.addNewForm=new c.cw({name:new c.NI,nameShort:new c.NI}),this.message="",this.items=[],this.loading=!1,this.editLabel="Edit"}dataAvailable(){return!!(this.items&&this.items.length>0)||(this.loading=!0,this.api.dataRoleActiveSiteRolesGet().subscribe({next:e=>{e.selectItems?this.items=e.selectItems:this.message=`${e.message}`,this.loading=!1,this.cdr.markForCheck()},error:e=>{this.loading=!1,this.message=e,this.cdr.markForCheck()}}),!1)}formControls(e){return this.addNewForm.controls}addNew(){this.editLabel="Add role",this.dialogService.open(this.editItem).onClose.pipe((0,x.R)(this.destroy$)).subscribe(e=>{!e||this.toast.notifyAboutChange(e)})}addNewComplete(e){if(!e)return"Aborted";const s=this.formControls(this.addNewForm);return this.api.dataRoleCreatePost({name:s.name.value,nameShort:s.nameShort.value}).subscribe(l=>{this.toast.notifyAboutChange(`${l}`),this.items=[],this.cdr.markForCheck()}),"Creating new role."}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.Ah),t.Y36(t.sBO),t.Y36(i.Gln),t.Y36(T.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,s){if(1&e&&t.Gf(U,5),2&e){let a;t.iGM(a=t.CRH())&&(s.editItem=a.first)}},decls:7,vars:2,consts:[[4,"ngIf"],["edit_dialog",""],[1,"table"],["scope","col"],["title","Add","icon","add_circle",1,"table-icon",3,"click"],[4,"ngFor","ngForOf"],["title","Edit","icon","edit",1,"table-icon"],["title","Delete","icon","close",1,"table-icon"],[3,"formGroup"],[1,"row","mb-10"],["for","name",1,"col-sm-2"],[1,"col-sm-1"],["id","name","formControlName","name"],[1,"row","mb-3"],["for","nameShort",1,"col-sm-2"],[1,"col-sm-10"],["id","nameShort","formControlName","nameShort"],[1,"d-flex","align-items-center","justify-content-center"],["nbButton","","outline","","size","medium",1,"mr-3",3,"click"],["nbButton","","status","primary","size","medium",3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Roles"),t.qZA(),t._UZ(2,"hr"),t.YNc(3,y,10,1,"ng-container",0),t.YNc(4,R,1,0,null,0),t.YNc(5,F,22,2,"ng-template",null,1,t.W1O)),2&e&&(t.xp6(3),t.Q6J("ngIf",s.dataAvailable()),t.xp6(1),t.Q6J("ngIf",s.loading))},directives:[m.O5,i.fMN,m.sg,i.Asz,i.ndF,i.yKW,c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u,i.XWE,i.DPz],styles:[""],changeDetection:0}),n})(),w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:5,vars:0,template:function(e,s){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Access"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"p"),t._uU(4,"Use this page to assign menu access rights to roles."),t.qZA())},styles:[""],changeDetection:0}),n})();var Y=r(4515);const J=[{path:"user",component:C},{path:"roles",component:S},{path:"access",component:w},{path:"",pathMatch:"full",redirectTo:"user"},{path:"**",component:A.r}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(J),Y.n],g.Bz]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.ez,q,c.u5,c.UX,i.T2N,i.zyh,i.KdK,i._WB,i.IIj,i.EoG]]}),n})()}}]);