"use strict";(self.webpackChunkechelon=self.webpackChunkechelon||[]).push([[705],{705:(It,I,m)=>{m.r(I),m.d(I,{SiteModule:()=>Zt});var _=m(9808),s=m(3075),l=m(776),N=m(2601),t=m(5e3);let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.ez]]}),i})(),q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.ez]]}),i})(),E=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.ez,l.KdK,s.u5,s.UX,l.IIj,l.nKr,l.zyh,l.T2N,l.uuI,N.r,l.rgH,l.LW9,l.COg,S,q]]}),i})();var A=m(655),u=m(4987),x=m(567),C=m(2125),F=m(3242),h=m(4357);function J(i,o){1&i&&(t.TgZ(0,"span",23),t._uU(1," This field is required "),t.qZA())}function O(i,o){1&i&&(t.TgZ(0,"span",23),t._uU(1," This field is required "),t.qZA())}function B(i,o){if(1&i&&(t.TgZ(0,"nb-option",24),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.reference),t.xp6(1),t.Oqu(e.displayValue)}}function U(i,o){if(1&i&&t._UZ(0,"nb-icon",25),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("nbTooltip",n.getWarningInfo(e.missingLinks))}}function D(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",26),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).toggleEdit(r)}),t.qZA()}}const R=function(i){return{"table-icon":!0,disabled:i}};function Y(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).saveEdit(r)}),t.qZA()}if(2&i){const e=t.oxw().index,n=t.oxw(2);let r;t.Q6J("ngClass",t.VKq(1,R,null==(r=n.getControl(e).get("name"))?null:r.getError("required")))}}function G(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",28),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).cancelEdit(r)}),t.qZA()}}function Q(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",29),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),a=r.$implicit,c=r.index;return t.oxw(2).onDelete(a.uuid,c)}),t.qZA()}}function H(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"tr",9)(1,"td"),t._UZ(2,"input",10),t.YNc(3,J,2,0,"span",11),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",12),t.YNc(6,O,2,0,"span",11),t.qZA(),t.TgZ(7,"td")(8,"nb-select",13),t.YNc(9,B,2,2,"nb-option",14),t.qZA()(),t.TgZ(10,"td"),t._UZ(11,"input",15),t.qZA(),t.TgZ(12,"td")(13,"i",16),t.NdJ("click",function(){const r=t.CHM(e),a=r.$implicit,c=r.index;return t.oxw(2).onOpenConnectionPopup(a,c)}),t.qZA()(),t.TgZ(14,"td")(15,"div",17),t.YNc(16,U,1,1,"nb-icon",18),t.YNc(17,D,1,0,"nb-icon",19),t.YNc(18,Y,1,3,"nb-icon",20),t.YNc(19,G,1,0,"nb-icon",21),t.YNc(20,Q,1,0,"nb-icon",22),t.qZA()(),t._UZ(21,"td"),t.qZA()}if(2&i){const e=o.$implicit,n=o.index,r=t.oxw(2);let a,c;t.Q6J("formGroupName",n),t.xp6(2),t.s9C("id",e.name),t.s9C("value",e.name),t.xp6(1),t.Q6J("ngIf",(null==(a=r.getControl(n).get("name"))?null:a.touched)&&(null==(a=r.getControl(n).get("name"))?null:a.getError("required"))),t.xp6(2),t.s9C("id",e.nameShort),t.s9C("value",e.nameShort),t.xp6(1),t.Q6J("ngIf",(null==(c=r.getControl(n).get("nameShort"))?null:c.touched)&&(null==(c=r.getControl(n).get("nameShort"))?null:c.getError("required"))),t.xp6(3),t.Q6J("ngForOf",null==r.buffersTypes?null:r.buffersTypes.selectItems),t.xp6(2),t.s9C("value",e.workCenterBuffer?null==e.workCenterBuffer[0]?null:e.workCenterBuffer[0].capacity:0),t.xp6(5),t.Q6J("ngIf","Warning"===e.linkStatus||"Critical"===e.linkStatus),t.xp6(1),t.Q6J("ngIf",r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",r.formControlState(n))}}function M(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th",3),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"th",3),t._uU(6,"Name Short"),t.qZA(),t.TgZ(7,"th",3),t._uU(8,"Buffer type"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Capacity"),t.qZA(),t.TgZ(11,"th",3),t._uU(12,"Connections"),t.qZA(),t.TgZ(13,"th",4),t._uU(14,"Actions"),t.qZA(),t.TgZ(15,"th",3)(16,"div",5)(17,"nb-icon",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t.qZA()()()()(),t.TgZ(18,"tbody",7),t.YNc(19,H,22,14,"tr",8),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(18),t.Q6J("formArrayName","formArrayName"),t.xp6(1),t.Q6J("ngForOf",e.workcenters)}}let v=class{constructor(o,e,n,r,a,c,p,d){this.bufferTypeApi=o,this.workstationApi=e,this.workcenterApi=n,this.activityApi=r,this.cdr=a,this.formBuilder=c,this.dialog=p,this.toastrService=d,this.dataAvailable=!1,this.workstations=[],this.workcenters=[],this.activities=[],this.editable=!1,this.positions=l.fe3,this.reloadData="",this.editItem=new t.vpe,this.removeItem=new t.vpe,this.addNewItem=new t.vpe,this.form=new s.cw({formArrayName:this.formBuilder.array([])})}ngOnInit(){this.findData()}getBuffersType(){}buildForm(){this.form=this.formBuilder.group({formArrayName:this.formBuilder.array([...this.workcenters].map(o=>{var e,n,r,a,c,p;return this.createWorkcenterGroup(!!o.uuid,null!==(e=o.name)&&void 0!==e?e:"",null!==(n=o.nameShort)&&void 0!==n?n:"",null!==(r=o.uuid)&&void 0!==r?r:"",o.workCenterBuffer?null===(c=null===(a=o.workCenterBuffer[0])||void 0===a?void 0:a.bufferType)||void 0===c?void 0:c.reference:"",o.workCenterBuffer?null===(p=o.workCenterBuffer[0])||void 0===p?void 0:p.capacity:0)}))})}createWorkcenterGroup(o=!0,e="",n="",r="",a="",c=0){return this.formBuilder.group({name:new s.NI({value:e,disabled:o},s.kI.required),nameShort:new s.NI({value:n,disabled:o},s.kI.required),uuid:new s.NI({value:r,disabled:o}),bufferType:new s.NI({value:a,disabled:o}),capacity:new s.NI({value:c,disabled:o})})}onAdd(){this.workcenters.push({name:"",nameShort:""}),this.buildForm(),this.cdr.markForCheck()}onRemove(o){this.workcenters.splice(o,1),this.form.get("formArrayName").removeAt(o),this.cdr.markForCheck()}onOpenConnectionPopup(o,e){var n,r,a;const c=this.dialog.open(F.w);c.onBackdropClick.pipe((0,u.t)(this)).subscribe(()=>{c.close()});const p=this.workcenters[e];if(!(null===(n=this.workstations)||void 0===n?void 0:n.length)||!p)return;const d=(null===(r=null==p?void 0:p.workstations)||void 0===r?void 0:r.length)?this.workstations.filter(f=>{var g;return!(null===(g=null==p?void 0:p.workstations)||void 0===g?void 0:g.find(b=>b.reference===f.reference))}):[...this.workstations];c.componentRef.instance.items=d,c.componentRef.instance.selectedItems=null!==(a=null==p?void 0:p.workstations)&&void 0!==a?a:[],c.componentRef.instance.leftTitle="Workstations",c.componentRef.instance.rightTitle=`Workcenter: ${o.name}`,c.componentRef.instance.title="Connect a Workstation to the Workcenter",c.componentRef.instance.completed.pipe((0,u.t)(this)).subscribe(f=>{p.workstations=f,c.close(),this.saveEdit(e)})}onDelete(o,e){const n=this.dialog.open(C.D);n.componentRef.instance.title="Remove workcenter",n.componentRef.instance.text="Are you sure you want to remove this workcenter?",n.onBackdropClick.pipe((0,u.t)(this)).subscribe(()=>{n.close()}),n.componentRef.instance.completed.pipe((0,u.t)(this)).subscribe(r=>{o?this.workcenterApi.dataWorkCenterDeleteUuidDelete(o).pipe((0,u.t)(this)).subscribe({next:()=>{this.onRemove(e),this.cdr.markForCheck(),n.close(),this.showToast(this.positions.TOP_RIGHT,"success","Workcenter succesfully removed.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):(this.onRemove(e),n.close())})}saveEdit(o){var e,n;const a=this.form.get("formArrayName").controls[o],p={bufferType:null===(n=null===(e=this.buffersTypes)||void 0===e?void 0:e.selectItems)||void 0===n?void 0:n.find(b=>b.reference===a.value.bufferType),capacity:a.value.capacity},f={name:a.value.name,nameShort:a.value.nameShort,workCenterBuffer:[p],workstations:this.workcenters[o].workstations},g=a.value.uuid;g?this.workcenterApi.dataWorkCenterUpdateUuidPut(g,f).pipe((0,u.t)(this)).subscribe({next:b=>{this.findData(),this.showToast(this.positions.TOP_RIGHT,"success","Workcenter succesfully updated.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):this.workcenterApi.dataWorkCenterCreatePost(f).pipe((0,u.t)(this)).subscribe({next:()=>{this.findData(),this.showToast(this.positions.TOP_RIGHT,"success","Workcenter succesfully created.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}),this.toggleEdit(o)}toggleEdit(o){const e=this.form.get("formArrayName");"DISABLED"===e.controls[o].status?e.controls[o].enable():e.controls[o].disable()}getControl(o){return this.form.get("formArrayName").controls[o]}cancelEdit(o){this.toggleEdit(o);const e=this.form.get("formArrayName"),n=this.workcenters.find(r=>r.uuid===e.controls[o].value.uuid);e.controls[o].patchValue({name:null==n?void 0:n.name,nameShort:null==n?void 0:n.nameShort})}formControlState(o){return this.form.get("formArrayName").controls[o].disabled}getControlsArray(){return this.form.get("formArrayName")}findData(){(0,x.D)(this.workstationApi.dataWorkstationAllWorkstationsGet(),this.bufferTypeApi.dataBufferTypeAllBufferTypesGet(),this.workcenterApi.dataWorkCenterListGet()).pipe((0,u.t)(this)).subscribe({next:([o,e,n])=>{this.workcenters=n,this.workstations=o.selectItems,this.buffersTypes=e,this.dataAvailable=!0,this.buildForm(),this.cdr.markForCheck(),this.showToast(this.positions.TOP_RIGHT,"danger",this.createToastMessage())}})}createToastMessage(){const o=[];return this.workcenters.forEach(e=>{var n;(null===(n=null==e?void 0:e.missingLinks)||void 0===n?void 0:n.length)&&o.push(e.name)}),o.length?`${o.join(", ")} workcenters has no workstation or buffer connection.`:""}getWarningInfo(o){const e=null==o?void 0:o.map(n=>n.displayValue).join(". ");return null!=e?e:""}showToast(o,e,n,r=5e3,a=""){!n||this.toastrService.show(e||"Success",n,{icon:a,position:o,status:e,duration:r,destroyByClick:!0,limit:1})}};function j(i,o){1&i&&(t.TgZ(0,"span",25),t._uU(1," This field is required "),t.qZA())}function P(i,o){1&i&&(t.TgZ(0,"span",25),t._uU(1," This field is required "),t.qZA())}function z(i,o){if(1&i&&(t.TgZ(0,"nb-option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.reference),t.xp6(1),t.Oqu(e.displayValue)}}function V(i,o){if(1&i&&(t.TgZ(0,"nb-option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.reference),t.xp6(1),t.Oqu(e.displayValue)}}function $(i,o){if(1&i&&(t.TgZ(0,"nb-option",26),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.s9C("value",e.reference),t.xp6(1),t.Oqu(e.displayValue)}}function L(i,o){if(1&i&&t._UZ(0,"nb-icon",27),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("nbTooltip",n.getWarningInfo(e.missingLinks))}}function X(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",28),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).toggleEdit(r)}),t.qZA()}}v.\u0275fac=function(o){return new(o||v)(t.Y36(h.jg),t.Y36(h.F),t.Y36(h.Uv),t.Y36(h.B0),t.Y36(t.sBO),t.Y36(s.qu),t.Y36(l.Gln),t.Y36(l.quB))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-workcenter-table"]],inputs:{reloadData:"reloadData"},outputs:{editItem:"editItem",removeItem:"removeItem",addNewItem:"addNewItem"},decls:3,vars:2,consts:[[1,"spinner-wrapper","overflow-auto",3,"nbSpinner"],["class","table",3,"formGroup",4,"ngIf"],[1,"table",3,"formGroup"],["scope","col"],["scope","col text-right"],[1,"float-right"],["title","Create","icon","add_circle",1,"table-icon",3,"click"],[3,"formArrayName"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["status","primary","nbInput","","type","text","formControlName","name",1,"editable-input",3,"id","value"],["class","text-danger",4,"ngIf"],["status","primary","nbInput","","type","text","formControlName","nameShort",1,"editable-input",3,"id","value"],["fullWidth","","status","control","placeholder","Buffer type","formControlName","bufferType",1,"select","editable-input"],[3,"value",4,"ngFor","ngForOf"],["status","primary","nbInput","","type","number","formControlName","capacity",1,"editable-input",3,"value"],[1,"iconEcheclon","icon-connection",3,"click"],[1,"float-right","icons-wrapper"],["nbTooltipStatus","primary","class","warning-icon","icon","warning",3,"nbTooltip",4,"ngIf"],["class","table-icon","title","Edit","icon","edit",3,"click",4,"ngIf"],["class","table-icon","title","Edit","icon","check_circle","type","button",3,"ngClass","click",4,"ngIf"],["class","table-icon","title","Delete","icon","close",3,"click",4,"ngIf"],["class","table-icon","title","Delete","icon","delete",3,"click",4,"ngIf"],[1,"text-danger"],[3,"value"],["nbTooltipStatus","primary","icon","warning",1,"warning-icon",3,"nbTooltip"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Edit","icon","check_circle","type","button",1,"table-icon",3,"ngClass","click"],["title","Delete","icon","close",1,"table-icon",3,"click"],["title","Delete","icon","delete",1,"table-icon",3,"click"]],template:function(o,e){1&o&&(t.ynx(0),t.TgZ(1,"div",0),t.YNc(2,M,20,3,"table",1),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("nbSpinner",!e.dataAvailable),t.xp6(1),t.Q6J("ngIf",e.dataAvailable))},directives:[l.Q7R,_.O5,s.JL,s.sg,l.fMN,s.CE,_.sg,s.x0,l.h8i,s.Fj,s.JJ,s.u,l.rs,l.q51,s.wV,l.jNv,_.mk],styles:[""],changeDetection:0}),v=(0,A.gn)([(0,u.c)()],v);const K=function(i){return{"table-icon":!0,disabled:i}};function tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",29),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).saveEdit(r)}),t.qZA()}if(2&i){const e=t.oxw().index,n=t.oxw(2);let r;t.Q6J("ngClass",t.VKq(1,K,null==(r=n.getControl(e).get("name"))?null:r.getError("required")))}}function et(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).cancelEdit(r)}),t.qZA()}}function ot(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),a=r.$implicit,c=r.index;return t.oxw(2).onDelete(a.uuid,c)}),t.qZA()}}function nt(i,o){if(1&i&&(t.TgZ(0,"tr",9)(1,"td"),t._UZ(2,"input",10),t.YNc(3,j,2,0,"span",11),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",12),t.YNc(6,P,2,0,"span",11),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"input",13),t.qZA(),t.TgZ(9,"td")(10,"nb-select",14),t.YNc(11,z,2,2,"nb-option",15),t.qZA()(),t.TgZ(12,"td"),t._UZ(13,"input",16),t.qZA(),t.TgZ(14,"td")(15,"nb-select",17),t.YNc(16,V,2,2,"nb-option",15),t.qZA()(),t.TgZ(17,"td")(18,"nb-select",18),t.YNc(19,$,2,2,"nb-option",15),t.qZA()(),t.TgZ(20,"td")(21,"div",19),t.YNc(22,L,1,1,"nb-icon",20),t.YNc(23,X,1,0,"nb-icon",21),t.YNc(24,tt,1,3,"nb-icon",22),t.YNc(25,et,1,0,"nb-icon",23),t.YNc(26,ot,1,0,"nb-icon",24),t.qZA()(),t._UZ(27,"td"),t.qZA()),2&i){const e=o.$implicit,n=o.index,r=t.oxw(2);let a,c;t.Q6J("formGroupName",n),t.xp6(2),t.s9C("id",e.name),t.s9C("value",e.name),t.xp6(1),t.Q6J("ngIf",(null==(a=r.getControl(n).get("name"))?null:a.touched)&&(null==(a=r.getControl(n).get("name"))?null:a.getError("required"))),t.xp6(2),t.s9C("id",e.nameShort),t.s9C("value",e.nameShort),t.xp6(1),t.Q6J("ngIf",(null==(c=r.getControl(n).get("nameShort"))?null:c.touched)&&(null==(c=r.getControl(n).get("nameShort"))?null:c.getError("required"))),t.xp6(2),t.s9C("id",e.amountOfWorkstations),t.s9C("value",e.amountOfWorkstations),t.xp6(3),t.Q6J("ngForOf",null==r.buffersTypes?null:r.buffersTypes.selectItems),t.xp6(2),t.s9C("value",e.workStationBuffers?null==e.workStationBuffers[0]?null:e.workStationBuffers[0].capacity:0),t.xp6(3),t.Q6J("ngForOf",r.activities),t.xp6(3),t.Q6J("ngForOf",r.workcenters),t.xp6(3),t.Q6J("ngIf","Warning"===e.linkStatus||"Critical"===e.linkStatus),t.xp6(1),t.Q6J("ngIf",r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",r.formControlState(n))}}function it(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th",3),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"th",3),t._uU(6,"Name Short"),t.qZA(),t.TgZ(7,"th",3),t._uU(8,"Amount of workstations"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Buffer type"),t.qZA(),t.TgZ(11,"th",3),t._uU(12,"Capacity"),t.qZA(),t.TgZ(13,"th",3),t._uU(14,"Activity"),t.qZA(),t.TgZ(15,"th",3),t._uU(16,"Workcenter"),t.qZA(),t.TgZ(17,"th",4),t._uU(18,"Actions"),t.qZA(),t.TgZ(19,"th",3)(20,"div",5)(21,"nb-icon",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t.qZA()()()()(),t.TgZ(22,"tbody",7),t.YNc(23,nt,28,18,"tr",8),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(22),t.Q6J("formArrayName","formArrayName"),t.xp6(1),t.Q6J("ngForOf",e.workstations)}}let T=class{constructor(o,e,n,r,a,c,p,d){this.bufferTypeApi=o,this.workstationApi=e,this.workcenterApi=n,this.activityApi=r,this.cdr=a,this.formBuilder=c,this.dialog=p,this.toastrService=d,this.dataAvailable=!1,this.workstations=[],this.workcenters=[],this.activities=[],this.editable=!1,this.positions=l.fe3,this.reloadData="",this.editItem=new t.vpe,this.removeItem=new t.vpe,this.addNewItem=new t.vpe,this.form=new s.cw({formArrayName:this.formBuilder.array([])})}ngOnInit(){this.findData()}getBuffersType(){}buildForm(){this.form=this.formBuilder.group({formArrayName:this.formBuilder.array([...this.workstations].map(o=>{var e,n,r,a,c,p,d,f,g,b,Z;return this.createWorkstationGroup(!!o.uuid,null!==(e=o.name)&&void 0!==e?e:"",null!==(n=o.nameShort)&&void 0!==n?n:"",null!==(r=o.amountOfWorkstations)&&void 0!==r?r:0,null!==(a=o.uuid)&&void 0!==a?a:"",null!==(p=null===(c=o.activity)||void 0===c?void 0:c.reference)&&void 0!==p?p:"",null!==(f=null===(d=o.workCenter)||void 0===d?void 0:d.reference)&&void 0!==f?f:"",o.workStationBuffers?null===(b=null===(g=o.workStationBuffers[0])||void 0===g?void 0:g.bufferType)||void 0===b?void 0:b.reference:"",o.workStationBuffers?null===(Z=o.workStationBuffers[0])||void 0===Z?void 0:Z.capacity:0)}))})}createWorkstationGroup(o=!0,e="",n="",r=0,a="",c="",p="",d="",f=0){return this.formBuilder.group({name:new s.NI({value:e,disabled:o},s.kI.required),nameShort:new s.NI({value:n,disabled:o},s.kI.required),amountOfWorkstations:new s.NI({value:r,disabled:o}),uuid:new s.NI({value:a,disabled:o}),activity:new s.NI({value:c,disabled:o}),workcenter:new s.NI({value:p,disabled:o}),bufferType:new s.NI({value:d,disabled:o}),capacity:new s.NI({value:f,disabled:o})})}onAdd(){this.workstations.push({name:"",nameShort:"",amountOfWorkstations:0,activity:{},workCenter:{}}),this.buildForm(),this.cdr.markForCheck()}onRemove(o){this.workstations.splice(o,1),this.form.get("formArrayName").removeAt(o),this.cdr.markForCheck()}onDelete(o,e){const n=this.dialog.open(C.D);n.componentRef.instance.title="Remove workstation",n.componentRef.instance.text="Are you sure you want to remove this workstation?",n.onBackdropClick.pipe((0,u.t)(this)).subscribe(()=>{n.close()}),n.componentRef.instance.completed.pipe((0,u.t)(this)).subscribe(r=>{o?this.workstationApi.dataWorkstationDeleteUuidDelete(o).pipe((0,u.t)(this)).subscribe({next:()=>{this.onRemove(e),this.cdr.markForCheck(),n.close(),this.showToast(this.positions.TOP_RIGHT,"success","Workstation succesfully removed.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):(this.onRemove(e),n.close())})}saveEdit(o){var e,n;const a=this.form.get("formArrayName").controls[o],p={bufferType:null===(n=null===(e=this.buffersTypes)||void 0===e?void 0:e.selectItems)||void 0===n?void 0:n.find(g=>g.reference===a.value.bufferType),capacity:a.value.capacity},d={name:a.value.name,nameShort:a.value.nameShort,amountOfWorkstations:a.value.amountOfWorkstations,workStationBuffers:[p],activity:this.getSelectedActivityObject(a.value.activity),workCenter:this.getSelectedWorkcenterObject(a.value.workcenter)},f=a.value.uuid;f?this.workstationApi.dataWorkstationUpdateUuidPut(f,d).pipe((0,u.t)(this)).subscribe({next:g=>{this.findData(),this.showToast(this.positions.TOP_RIGHT,"success","Workstation succesfully updated.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):this.workstationApi.dataWorkstationCreatePost(d).pipe((0,u.t)(this)).subscribe({next:()=>{this.findData(),this.showToast(this.positions.TOP_RIGHT,"success","Workstation succesfully created.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}),this.toggleEdit(o)}toggleEdit(o){const e=this.form.get("formArrayName");"DISABLED"===e.controls[o].status?e.controls[o].enable():e.controls[o].disable()}getControl(o){return this.form.get("formArrayName").controls[o]}cancelEdit(o){this.toggleEdit(o);const e=this.form.get("formArrayName"),n=this.workstations.find(r=>r.uuid===e.controls[o].value.uuid);e.controls[o].patchValue({name:null==n?void 0:n.name,nameShort:null==n?void 0:n.nameShort,amountOfWorkstations:null==n?void 0:n.amountOfWorkstations})}formControlState(o){return this.form.get("formArrayName").controls[o].disabled}getControlsArray(){return this.form.get("formArrayName")}findData(){(0,x.D)(this.workstationApi.dataWorkstationListGet(),this.bufferTypeApi.dataBufferTypeAllBufferTypesGet(),this.activityApi.dataActivityAllActivitiesGet(),this.workcenterApi.dataWorkCenterAllWorkCentersGet()).pipe((0,u.t)(this)).subscribe({next:([o,e,n,r])=>{this.workcenters=r.selectItems,this.workstations=o,this.activities=n.selectItems,this.buffersTypes=e,this.dataAvailable=!0,this.buildForm(),this.cdr.markForCheck(),this.showToast(this.positions.TOP_RIGHT,"danger",this.createToastMessage())}})}createToastMessage(){const o=[];return this.workstations.forEach(e=>{var n;(null===(n=null==e?void 0:e.missingLinks)||void 0===n?void 0:n.length)&&o.push(e.name)}),o.length?`${o.join(", ")} workstations has no activity connection or workcenter connection or buffer connection.`:""}getWarningInfo(o){const e=null==o?void 0:o.map(n=>n.displayValue).join(". ");return null!=e?e:""}getSelectedActivityObject(o){var e;return(null===(e=this.activities)||void 0===e?void 0:e.filter(r=>r.reference===o)[0])||{}}getSelectedWorkcenterObject(o){var e;return(null===(e=this.workcenters)||void 0===e?void 0:e.filter(r=>r.reference===o)[0])||{}}showToast(o,e,n,r=5e3,a=""){!n||this.toastrService.show(e||"Success",n,{icon:a,position:o,status:e,duration:r,destroyByClick:!0})}};T.\u0275fac=function(o){return new(o||T)(t.Y36(h.jg),t.Y36(h.F),t.Y36(h.Uv),t.Y36(h.B0),t.Y36(t.sBO),t.Y36(s.qu),t.Y36(l.Gln),t.Y36(l.quB))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-workstation-table"]],inputs:{reloadData:"reloadData"},outputs:{editItem:"editItem",removeItem:"removeItem",addNewItem:"addNewItem"},decls:3,vars:2,consts:[[1,"spinner-wrapper","overflow-auto",3,"nbSpinner"],["class","table",3,"formGroup",4,"ngIf"],[1,"table",3,"formGroup"],["scope","col"],["scope","col text-right"],[1,"float-right"],["title","Create","icon","add_circle",1,"table-icon",3,"click"],[3,"formArrayName"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["status","primary","nbInput","","type","text","formControlName","name",1,"editable-input",3,"id","value"],["class","text-danger",4,"ngIf"],["status","primary","nbInput","","type","text","formControlName","nameShort",1,"editable-input",3,"id","value"],["status","primary","nbInput","","type","number","formControlName","amountOfWorkstations",1,"editable-input",3,"id","value"],["fullWidth","","status","control","placeholder","Buffer type","formControlName","bufferType",1,"select","editable-input"],[3,"value",4,"ngFor","ngForOf"],["status","primary","nbInput","","type","number","formControlName","capacity",1,"editable-input",3,"value"],["fullWidth","","status","control","placeholder","Activity","formControlName","activity",1,"select","editable-input"],["fullWidth","","status","control","placeholder","Workcenter","formControlName","workcenter",1,"select","editable-input"],[1,"float-right","icons-wrapper"],["nbTooltipStatus","primary","class","warning-icon","icon","warning",3,"nbTooltip",4,"ngIf"],["class","table-icon","title","Edit","icon","edit",3,"click",4,"ngIf"],["class","table-icon","title","Edit","icon","check_circle","type","button",3,"ngClass","click",4,"ngIf"],["class","table-icon","title","Delete","icon","close",3,"click",4,"ngIf"],["class","table-icon","title","Delete","icon","delete",3,"click",4,"ngIf"],[1,"text-danger"],[3,"value"],["nbTooltipStatus","primary","icon","warning",1,"warning-icon",3,"nbTooltip"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Edit","icon","check_circle","type","button",1,"table-icon",3,"ngClass","click"],["title","Delete","icon","close",1,"table-icon",3,"click"],["title","Delete","icon","delete",1,"table-icon",3,"click"]],template:function(o,e){1&o&&(t.ynx(0),t.TgZ(1,"div",0),t.YNc(2,it,24,3,"table",1),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("nbSpinner",!e.dataAvailable),t.xp6(1),t.Q6J("ngIf",e.dataAvailable))},directives:[l.Q7R,_.O5,s.JL,s.sg,l.fMN,s.CE,_.sg,s.x0,l.h8i,s.Fj,s.JJ,s.u,s.wV,l.rs,l.q51,l.jNv,_.mk],styles:[""],changeDetection:0}),T=(0,A.gn)([(0,u.c)()],T);let rt=(()=>{class i{constructor(e){this.elementRef=e}onInput(){this.resize()}ngOnInit(){this.elementRef.nativeElement.scrollHeight&&setTimeout(()=>this.resize())}resize(){this.elementRef.nativeElement.style.height="0",this.elementRef.nativeElement.style.height=`${this.elementRef.nativeElement.scrollHeight+5}px`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275dir=t.lG2({type:i,selectors:[["","appTextareaAutoresize",""]],hostBindings:function(e,n){1&e&&t.NdJ("input",function(){return n.onInput()})}}),i})(),at=(()=>{class i{constructor(e){this.elementRef=e,this.isExpanded=!1,this.wrappers=[]}onClick(e){this.isExpanded=!this.isExpanded,this.resize()}ngAfterViewInit(){this.wrappers=this.elementRef.nativeElement.parentElement.parentElement.querySelectorAll(".toggle-height-wrapper"),this.wrappers.forEach(e=>{e.style.maxHeight="47px"})}resize(){this.wrappers.forEach(this.isExpanded?e=>e.style.maxHeight="none":e=>e.style.maxHeight="47px")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275dir=t.lG2({type:i,selectors:[["","appToggleElementHeight",""]],hostBindings:function(e,n){1&e&&t.NdJ("click",function(a){return n.onClick(a)})}}),i})();function st(i,o){1&i&&(t.TgZ(0,"span",21),t._uU(1," This field is required "),t.qZA())}function ct(i,o){1&i&&(t.TgZ(0,"span",21),t._uU(1," This field is required "),t.qZA())}function lt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).toggleEdit(r)}),t.qZA()}}const pt=function(i){return{"table-icon":!0,disabled:i}};function ut(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).saveEdit(r)}),t.qZA()}if(2&i){const e=t.oxw().index,n=t.oxw(2);let r;t.Q6J("ngClass",t.VKq(1,pt,null==(r=n.getControl(e).get("name"))?null:r.getError("required")))}}function dt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",24),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().index;return t.oxw(2).cancelEdit(r)}),t.qZA()}}function mt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"nb-icon",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(),a=r.$implicit,c=r.index;return t.oxw(2).onDelete(a.uuid,c)}),t.qZA()}}function _t(i,o){1&i&&t._UZ(0,"i",26)}function ft(i,o){if(1&i&&(t.TgZ(0,"tr",8)(1,"td"),t._UZ(2,"input",9),t.YNc(3,st,2,0,"span",10),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",11),t.YNc(6,ct,2,0,"span",10),t.qZA(),t.TgZ(7,"td")(8,"div",12)(9,"textarea",13),t._uU(10,"              "),t.qZA()()(),t.TgZ(11,"td")(12,"div",14),t.YNc(13,lt,1,0,"nb-icon",15),t.YNc(14,ut,1,3,"nb-icon",16),t.YNc(15,dt,1,0,"nb-icon",17),t.YNc(16,mt,1,0,"nb-icon",18),t.qZA()(),t.TgZ(17,"td",19),t.YNc(18,_t,1,0,"i",20),t.qZA()()),2&i){const e=o.$implicit,n=o.index,r=t.oxw(2);let a,c;t.Q6J("formGroupName",n),t.xp6(2),t.s9C("id",e.name),t.s9C("value",e.name),t.xp6(1),t.Q6J("ngIf",(null==(a=r.getControl(n).get("name"))?null:a.touched)&&(null==(a=r.getControl(n).get("name"))?null:a.getError("required"))),t.xp6(2),t.s9C("id",e.nameShort),t.s9C("value",e.nameShort),t.xp6(1),t.Q6J("ngIf",(null==(c=r.getControl(n).get("nameShort"))?null:c.touched)&&(null==(c=r.getControl(n).get("nameShort"))?null:c.getError("required"))),t.xp6(3),t.s9C("id",e.description),t.s9C("value",e.description),t.xp6(4),t.Q6J("ngIf",r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",!r.formControlState(n)),t.xp6(1),t.Q6J("ngIf",r.formControlState(n)),t.xp6(2),t.Q6J("ngIf",e.description&&e.description.length&&e.description.length>20)}}function ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th",3),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"th",3),t._uU(6,"Name Short"),t.qZA(),t.TgZ(7,"th",3),t._uU(8,"Description"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Actions"),t.qZA(),t.TgZ(11,"th",3)(12,"div",4)(13,"nb-icon",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().onAdd()}),t.qZA()()()()(),t.TgZ(14,"tbody",6),t.YNc(15,ft,19,14,"tr",7),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(14),t.Q6J("formArrayName","formArrayName"),t.xp6(1),t.Q6J("ngForOf",e.activities)}}let k=class{constructor(o,e,n,r,a,c,p,d){this.bufferTypeApi=o,this.workstationApi=e,this.workcenterApi=n,this.activityApi=r,this.cdr=a,this.formBuilder=c,this.dialog=p,this.toastrService=d,this.dataAvailable=!1,this.workstations=[],this.activities=[],this.editable=!1,this.positions=l.fe3,this.reloadData="",this.editItem=new t.vpe,this.removeItem=new t.vpe,this.addNewItem=new t.vpe,this.form=new s.cw({formArrayName:this.formBuilder.array([])})}ngOnInit(){this.findData()}getBuffersType(){}buildForm(){this.form=this.formBuilder.group({formArrayName:this.formBuilder.array([...this.activities].map(o=>{var e,n,r,a;return this.createActivityGroup(!!o.uuid,null!==(e=o.name)&&void 0!==e?e:"",null!==(n=o.nameShort)&&void 0!==n?n:"",null!==(r=o.description)&&void 0!==r?r:"",null!==(a=o.uuid)&&void 0!==a?a:"")}))})}createActivityGroup(o=!0,e="",n="",r="",a=""){return this.formBuilder.group({name:new s.NI({value:e,disabled:o},s.kI.required),nameShort:new s.NI({value:n,disabled:o},s.kI.required),description:new s.NI({value:r,disabled:o}),uuid:new s.NI({value:a,disabled:o})})}onAdd(){this.activities.push({name:"",nameShort:"",description:""}),this.buildForm(),this.cdr.markForCheck()}onRemove(o){this.activities.splice(o,1),this.form.get("formArrayName").removeAt(o),this.cdr.markForCheck()}onDelete(o,e){const n=this.dialog.open(C.D);n.componentRef.instance.title="Remove activity",n.componentRef.instance.text="Are you sure you want to remove this activity?",n.onBackdropClick.pipe((0,u.t)(this)).subscribe(()=>{n.close()}),n.componentRef.instance.completed.pipe((0,u.t)(this)).subscribe(r=>{o?this.activityApi.dataActivityDeleteUuidDelete(o).pipe((0,u.t)(this)).subscribe({next:()=>{this.onRemove(e),this.cdr.markForCheck(),n.close(),this.showToast(this.positions.TOP_RIGHT,"success","Activity succesfully removed.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):(this.onRemove(e),n.close())})}saveEdit(o){const n=this.form.get("formArrayName").controls[o],r={name:n.value.name,nameShort:n.value.nameShort,description:n.value.description},a=n.value.uuid;a?this.activityApi.dataActivityUpdateUuidPut(a,r).pipe((0,u.t)(this)).subscribe({next:c=>{this.findData(),this.showToast(this.positions.TOP_RIGHT,"success","Activity succesfully updated.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}):this.activityApi.dataActivityCreatePost(r).pipe((0,u.t)(this)).subscribe({next:()=>{this.findData(),this.showToast(this.positions.TOP_RIGHT,"success","Activity succesfully created.",3e3)},error:()=>{this.showToast(this.positions.TOP_RIGHT,"danger","Something went wrong, please try again later.",3e3)}}),this.toggleEdit(o)}toggleEdit(o){const e=this.form.get("formArrayName");"DISABLED"===e.controls[o].status?e.controls[o].enable():e.controls[o].disable()}getControl(o){return this.form.get("formArrayName").controls[o]}cancelEdit(o){this.toggleEdit(o);const e=this.form.get("formArrayName"),n=this.activities.find(r=>r.uuid===e.controls[o].value.uuid);e.controls[o].patchValue({name:null==n?void 0:n.name,nameShort:null==n?void 0:n.nameShort,description:null==n?void 0:n.description})}formControlState(o){return this.form.get("formArrayName").controls[o].disabled}getControlsArray(){return this.form.get("formArrayName")}findData(){(0,x.D)(this.workstationApi.dataWorkstationAllWorkstationsGet(),this.activityApi.dataActivityListGet()).pipe((0,u.t)(this)).subscribe({next:([o,e])=>{this.workstations=o.selectItems,this.activities=e,this.dataAvailable=!0,this.buildForm(),this.cdr.markForCheck(),this.showToast(this.positions.TOP_RIGHT,"danger",this.createToastMessage())}})}createToastMessage(){const o=[];return this.activities.forEach(e=>{var n;(null===(n=null==e?void 0:e.missingLinks)||void 0===n?void 0:n.length)&&o.push(e.name)}),o.length?`${o.join(", ")} activities has no workstation connection.`:""}getWarningInfo(o){const e=null==o?void 0:o.map(n=>n.displayValue).join(". ");return null!=e?e:""}showToast(o,e,n,r=5e3,a=""){!n||this.toastrService.show(e||"Success",n,{icon:a,position:o,status:e,duration:r,destroyByClick:!0,limit:1})}};k.\u0275fac=function(o){return new(o||k)(t.Y36(h.jg),t.Y36(h.F),t.Y36(h.Uv),t.Y36(h.B0),t.Y36(t.sBO),t.Y36(s.qu),t.Y36(l.Gln),t.Y36(l.quB))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-activity-table"]],inputs:{reloadData:"reloadData"},outputs:{editItem:"editItem",removeItem:"removeItem",addNewItem:"addNewItem"},decls:3,vars:2,consts:[[1,"spinner-wrapper","overflow-auto",3,"nbSpinner"],["class","table",3,"formGroup",4,"ngIf"],[1,"table",3,"formGroup"],["scope","col"],[1,"float-right"],["title","Create","icon","add_circle",1,"table-icon",3,"click"],[3,"formArrayName"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["status","primary","nbInput","","type","text","formControlName","name",1,"editable-input",3,"id","value"],["class","text-danger",4,"ngIf"],["status","primary","nbInput","","type","text","formControlName","nameShort",1,"editable-input",3,"id","value"],[1,"overflow-hidden","toggle-height-wrapper"],["appTextareaAutoresize","","status","primary","nbInput","","type","text","formControlName","description",1,"editable-input",3,"id","value"],[1,"float-right","icons-wrapper"],["class","table-icon","title","Edit","icon","edit",3,"click",4,"ngIf"],["class","table-icon","title","Edit","icon","check_circle","type","button",3,"ngClass","click",4,"ngIf"],["class","table-icon","title","Delete","icon","close",3,"click",4,"ngIf"],["class","table-icon","title","Delete","icon","delete",3,"click",4,"ngIf"],[1,"text-right"],["appToggleElementHeight","","class","iconEcheclon icon-arrow-down",4,"ngIf"],[1,"text-danger"],["title","Edit","icon","edit",1,"table-icon",3,"click"],["title","Edit","icon","check_circle","type","button",1,"table-icon",3,"ngClass","click"],["title","Delete","icon","close",1,"table-icon",3,"click"],["title","Delete","icon","delete",1,"table-icon",3,"click"],["appToggleElementHeight","",1,"iconEcheclon","icon-arrow-down"]],template:function(o,e){1&o&&(t.ynx(0),t.TgZ(1,"div",0),t.YNc(2,ht,16,3,"table",1),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("nbSpinner",!e.dataAvailable),t.xp6(1),t.Q6J("ngIf",e.dataAvailable))},directives:[l.Q7R,_.O5,s.JL,s.sg,l.fMN,s.CE,_.sg,s.x0,l.h8i,s.Fj,s.JJ,s.u,rt,_.mk,at],styles:[""],changeDetection:0}),k=(0,A.gn)([(0,u.c)()],k);let y=class{};y.\u0275fac=function(o){return new(o||y)},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-flow-table"]],decls:2,vars:0,template:function(o,e){1&o&&(t.TgZ(0,"p"),t._uU(1,"Flow table is not implkemented"),t.qZA())},styles:[""]}),y=(0,A.gn)([(0,u.c)()],y);var W=m(2268),gt=m(9004),bt=m(4515);let vt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-activities"]],decls:6,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Activities"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"p"),t._uU(4," Define and describe activities. An activity can be linked to a workstation to help planning and have a better understanding of the work (the activity) that is execuited by the workforce on a specific workstation.\n"),t.qZA(),t._UZ(5,"app-activity-table"))},directives:[k],styles:[""],changeDetection:0}),i})(),Tt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-flows"]],decls:3,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"flows"),t.qZA(),t._UZ(2,"app-flow-table"))},directives:[y],styles:[""]}),i})();function kt(i,o){if(1&i&&t._UZ(0,"nb-icon",14),2&i){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("nbTooltip",n.getWarningInfo(e.missingLinks))}}function yt(i,o){if(1&i&&(t.TgZ(0,"div")(1,"div",6),t.YNc(2,kt,1,1,"nb-icon",7),t.TgZ(3,"div",8),t._UZ(4,"img",9),t.qZA(),t.TgZ(5,"div",10)(6,"div",11)(7,"p",12),t._uU(8,"Workstation:"),t.qZA(),t.TgZ(9,"p",13),t._uU(10),t.qZA()(),t.TgZ(11,"div",11)(12,"p",12),t._uU(13,"Activity:"),t.qZA(),t.TgZ(14,"p",13),t._uU(15),t.qZA()(),t.TgZ(16,"div",11)(17,"p",12),t._uU(18,"Short:"),t.qZA(),t.TgZ(19,"p",13),t._uU(20),t.qZA()()()()()),2&i){const e=o.$implicit;t.xp6(2),t.Q6J("ngIf","Warning"===e.linkStatus||"Critical"===e.linkStatus),t.xp6(8),t.Oqu(e.displayValue),t.xp6(5),t.Oqu(e.activity.displayValue),t.xp6(5),t.Oqu(e.code)}}function wt(i,o){if(1&i&&(t.TgZ(0,"div",3)(1,"h2",3),t._uU(2),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,yt,21,4,"div",5),t.qZA()()),2&i){const e=o.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngForOf",e.workstations)}}function At(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,wt,5,2,"div",2),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.dataTree)}}let w=class{constructor(o,e,n){this.cdr=o,this.workcenterApi=e,this.workstationApi=n,this.workcenters=[],this.workstations=[],this.dataAvalaible=!1,this.dataTree=[]}ngOnInit(){this.getData()}getData(){(0,x.D)(this.workcenterApi.dataWorkCenterListGet(),this.workstationApi.dataWorkstationListGet()).pipe((0,u.t)(this)).subscribe({next:([o,e])=>{this.workcenters=o,this.workstations=e,this.dataAvalaible=!0,this.buildDataTree(),this.cdr.markForCheck()}})}buildDataTree(){const o=[...this.workcenters].map(e=>{var n;return null===(n=e.workstations)||void 0===n||n.forEach((r,a)=>{const c=r.reference,p=this.workstations.find(d=>d.uuid===c);e.workstations[a]=Object.assign(Object.assign({},e.workstations[a]),p)}),e});this.dataTree=o}getWarningInfo(o){return o.map(n=>n.displayValue).join(". ")}};w.\u0275fac=function(o){return new(o||w)(t.Y36(t.sBO),t.Y36(h.Uv),t.Y36(h.F))},w.\u0275cmp=t.Xpm({type:w,selectors:[["app-overview"]],decls:3,vars:2,consts:[[3,"nbSpinner"],[4,"ngIf"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"row"],[4,"ngFor","ngForOf"],[1,"item-card"],["nbTooltipStatus","primary","class","item-card__warning warning-icon","icon","warning",3,"nbTooltip",4,"ngIf"],[1,"item-card__image-wrapper"],["src","assets/images/packing.jpg","alt",""],[1,"item-card__content"],[1,"item-card__text"],[1,"item-card__label"],[1,"item-card__value"],["nbTooltipStatus","primary","icon","warning",1,"item-card__warning","warning-icon",3,"nbTooltip"]],template:function(o,e){1&o&&(t.ynx(0),t.TgZ(1,"div",0),t.YNc(2,At,2,1,"div",1),t.qZA(),t.BQk()),2&o&&(t.xp6(1),t.Q6J("nbSpinner",!e.dataAvalaible),t.xp6(1),t.Q6J("ngIf",e.dataAvalaible))},directives:[l.Q7R,_.O5,_.sg,l.fMN,l.jNv],styles:[""]}),w=(0,A.gn)([(0,u.c)()],w);const xt=[{path:"overview",component:w},{path:"activity",component:vt},{path:"workcenter",component:(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-workcenters"]],decls:6,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Workcenters"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"p"),t._uU(4," View and define your work centers here. A work center can contain zero or more workstations. These workstations can be linked to the work center in the details view.\n"),t.qZA(),t._UZ(5,"app-workcenter-table"))},directives:[v],styles:[""],changeDetection:0}),i})()},{path:"workstation",component:(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-workstations"]],decls:6,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"Workstations"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"p"),t._uU(4,"View and define your work stations here."),t.qZA(),t._UZ(5,"app-workstation-table"))},directives:[T],styles:[""],changeDetection:0}),i})()},{path:"flow",component:Tt},{path:"",pathMatch:"full",redirectTo:"overview"},{path:"**",component:gt.r}];let Ct=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[W.Bz.forChild(xt),bt.n],W.Bz]}),i})(),Zt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.ez,s.u5,s.UX,Ct,l.T2N,l.zyh,l.KdK,l._WB,l.IIj,l.EoG,E,l.uuI,l.rgH,N.r,l.nKr,l.COg,S]]}),i})()}}]);